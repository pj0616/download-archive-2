<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Permission Errors on POST</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                    <li>
                                <span><a href="Project-Profit-Application_315097089.html">Project Profit Application</a></span>
                            </li>
                                                    <li>
                                <span><a href="Hydrate-Database_338657281.html">Hydrate Database</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Permission Errors on POST
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span> on May 05, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>When using schema SOD_OTHER, getting following error on POST</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>POST Command</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Body</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/projects</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;projectName&quot;: &quot;P-X&quot;,
  &quot;projectDescription&quot;: &quot;Project X&quot;
}</pre>
</div></div><p><br/></p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;timestamp&quot;: &quot;2020-05-04T20:10:44.791Z&quot;,
  &quot;message&quot;: &quot;could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet&quot;,
  &quot;details&quot;: &quot;uri=/projects&quot;
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><p>Console displays following errors</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence"> WARN 4924 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: -551, SQLState: 42501
ERROR 4924 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : DB2 SQL Error: SQLCODE=-551, SQLSTATE=42501, SQLERRMC=DACT_DBO;USAGE;SOD_OTHER.HIBERNATE_SEQUENCE, DRIVER=4.19.49
 WARN 4924 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: -727, SQLState: 56098
ERROR 4924 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : DB2 SQL Error: SQLCODE=-727, SQLSTATE=56098, SQLERRMC=2;-551;42501;DACT_DBO|USAGE|SOD_OTHER.HIBERNATE_SEQUENCE, DRIVER=4.19.49</pre>
</div></div></td></tr></tbody></table></div><h1 id="PermissionErrorsonPOST-CheckingHIBERNATE_SEQUENCE">Checking HIBERNATE_SEQUENCE</h1><p>When logged in with  promproxy account, I can query HIBERNATE_SEQUENCE (for schema SOD_OTHER)</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p>select nextval for hibernate_sequence next_sequence_value from employee</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">NEXT_SEQUENCE_VALUE  
---------------------
105                  
106                  
107                  
108                  
109                  
110</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><p>However, when logged in with my kerberos</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><code>select nextval for hibernate_sequence next_sequence_value from employee</code></p></td><td class="confluenceTd"><p>&quot;DACT_DBO&quot; does not have the required authorization or privilege to perform operation &quot;USAGE&quot; on object &quot;SOD_OTHER.HIBERNATE_SEQUENCE&quot;.. SQLCODE=-551, SQLSTATE=42501, DRIVER=4.26.14 SQL Code: -551, SQL State: 42501</p></td></tr></tbody></table></div><h1 id="PermissionErrorsonPOST-Solution">Solution</h1><p>This problem is most likely because my account was not promoted to DACT_DBO_BATCH1. See <a href="https://confluence.apg.services.gs.com/display/~gunern/DB2+Troubleshooting" class="external-link" rel="nofollow">DB2 Troubleshooting</a>.</p><p>Using promproxy account solves this problem:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
datasource.url=jdbc:db2://nyg13qi8-vip.ny.fw.gs.com:56834/ntrkdi02
datasource.username=promproxydb
datasource.password=AshwinR0cks!
...

</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>POST Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Body</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>location</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/projects</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;projectName&quot;: &quot;P-X&quot;,
  &quot;projectDescription&quot;: &quot;Project X&quot;
}</pre>
</div></div><p><br/></p></td><td class="confluenceTd"><p><a href="http://localhost:8080/projects/111" class="external-link" rel="nofollow">http://localhost:8080/projects/111</a></p></td></tr></tbody></table></div><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
