<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Mokito</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Mokito
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span>, last modified on Apr 20, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>This tutorial demonstrates some of the basic features of Mockito Unit Testing Framework.</p><p>We will use a Maven command to create, build, and test the project.</p><p>We will also demonstrate how to save this project in GitLab.</p><h2 id="Mokito-UseMaventoCreate,Package,andTesttheProject">Use Maven to Create, Package, and Test the Project</h2><p>For this project we will choose following name and root package</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>Project Name (<code>artifactId</code>):</p></td><td class="confluenceTd"><p><code>mockito-basic</code></p></td></tr><tr><td class="confluenceTd"><p>Root Package Name (<code>groupId</code>):</p></td><td class="confluenceTd"><p><code>com.mockito.example</code></p></td></tr></tbody></table></div><h3 id="Mokito-CreateaProject">Create a Project</h3><p>Open the Command Console and make sure that following environment variables are set. See <a href="https://confluence.apg.services.gs.com/display/~gunern/Using+JDK+8+and+JDK+11" class="external-link" rel="nofollow">Using JDK 8 and JDK 11</a>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>Environment Variables:</p></td><td class="confluenceTd"><p><br/></p><p><code>M2_HOMEMAVEN_HOMEJAVA_HOME</code></p><p><br/></p></td></tr></tbody></table></div><p>Execute command to create a project:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>Command:</p></td><td class="confluenceTd"><p><code>mvn archetype:generate ^</code></p><ul><li><p>DgroupId=com.mockito.example ^</p></li><li><p>DartifactId=mockito-basic ^</p></li><li><p>DinteractiveMode=false</p></li></ul></td></tr></tbody></table></div><p>Above command will create a starter Maven project in <code>mockito-basic</code> directory.</p><h3 id="Mokito-BuildPackagefrommockito-basicDirectory">Build Package from <code>mockito-basic</code> Directory</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>Command:</p></td><td class="confluenceTd"><p><br/></p><p><code>cd mockito-basicmvn package</code></p><p><br/></p></td></tr></tbody></table></div><h3 id="Mokito-TestthePackage">Test the Package</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>Command:</p></td><td class="confluenceTd"><p><code>java -cp target/mockito-basic-1.0-SNAPSHOT.jar com.mockito.example.App</code></p></td></tr><tr><td class="confluenceTd"><p>Expected Result:</p></td><td class="confluenceTd"><p><code>Hello World!</code></p></td></tr></tbody></table></div><p>Open Project with IntelliJ and make a few changes.</p><h3 id="Mokito-Modifypom.xmltouseJUnitVersion4andtoIncludeMockitoandotherDependencies">Modify <code>pom.xml</code> to use JUnit Version 4 and to Include Mockito and other Dependencies</h3><p>Refer to Maven Repositories</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>URL</p></td><td class="confluenceTd"><p><a href="https://mvnrepository.com/" class="external-link" rel="nofollow">https://mvnrepository.com/</a></p></td></tr></tbody></table></div><p>Changes to <code>pom.xml</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.9&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
    &lt;version&gt;3.0&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.5.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;source&gt;1.8&lt;/source&gt;
        &lt;target&gt;1.8&lt;/target&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre>
</div></div></td></tr></tbody></table></div><h2 id="Mokito-Add.gitignoreFiletotheProject">Add <code>.gitignore</code> File to the Project</h2><p>Make sure to add <code>.gitignore</code> file to prevent unwanted files from being committed to GitLab</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>.gitignore</strong></p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">HELP.md
target/


### IntelliJ IDEA ###
.idea
*.iws
*.iml
*.ipr</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><h2 id="Mokito-AddBusinessClasses">Add Business Classes</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>DataService.java</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>BusinessObj.java</strong></p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public interface DataService
{
    int[] retrieveAllData();
}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public class BusinessObj
{
    private DataService dataService;

    public BusinessObj(DataService dataService)
    {
        this.dataService = dataService;
    }

    int findGreatestFromAllData()
    {
        int [] data = dataService.retrieveAllData();
        return data.length &gt; 0 ? Arrays.stream(data).max().getAsInt() : Integer.MIN_VALUE;
    }
}</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><h2 id="Mokito-MockBusinessObj">Mock BusinessObj</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>BusinessObjTest.java</strong></p></th></tr><tr><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@RunWith(MockitoJUnitRunner.class)
public class BusinessObjTest
{
    @Mock
    DataService dataServiceMock;

    @InjectMocks
    BusinessObj someBusinessImpl;

    @Test
    public void testFindGreatestFromAllData()
    {
        when(dataServiceMock.retrieveAllData()).thenReturn(new int[] {2, 4, 15, 9});
        assertEquals(15, someBusinessImpl.findGreatestFromAllData());
    }

    @Test
    public void testFindGreatestFromAllDataForOneValue()
    {
        when(dataServiceMock.retrieveAllData()).thenReturn(new int[] {15});
        assertEquals(15, someBusinessImpl.findGreatestFromAllData());
    }

    @Test
    public void testFindGreatestFromAllDataForNoValues()
    {
        when(dataServiceMock.retrieveAllData()).thenReturn(new int[] {});
        assertEquals(Integer.MIN_VALUE, someBusinessImpl.findGreatestFromAllData());
    }
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><h2 id="Mokito-MockListInterface">Mock List Interface</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>ListMockitoTest.java</strong></p></th></tr><tr><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public class ListMockitoTest
{
	@Test
	public void testSize()
	{
		List&lt;?&gt; listMock = mock(List.class);
		when(listMock.size()).thenReturn(10);
		assertEquals(10, listMock.size());
		assertEquals(10, listMock.size());
	}
	@Test
	public void testSizeMultipleReturns()
	{
		List&lt;?&gt; listMock = mock(List.class);
		when(listMock.size()).thenReturn(10).thenReturn(20);
		assertEquals(10, listMock.size());
		assertEquals(20, listMock.size());
		assertEquals(20, listMock.size());
	}

	@Test
	public void testGet()
	{
		List&lt;String&gt; listMock = mock(List.class);
		when(listMock.get(0)).thenReturn(&quot;MyString&quot;);
		assertEquals(&quot;MyString&quot;, listMock.get(0));
		assertEquals(null, listMock.get(1));
	}

	@Test
	public void testGetAnyInt()
	{
		List&lt;String&gt; listMock = mock(List.class);
		when(listMock.get(Mockito.anyInt())).thenReturn(&quot;MyString&quot;);
		assertEquals(&quot;MyString&quot;, listMock.get(0));
		assertEquals(&quot;MyString&quot;, listMock.get(1));
	}
}


</pre>
</div></div><p><br/></p><p><br/></p></td></tr></tbody></table></div><p><br/>Save This Project to GitLab</p><p>You can save personal projects to GitLab-UAT, see <a href="https://confluence.apg.services.gs.com/display/~gunern/GitLab+and+GitLab-UAT" class="external-link" rel="nofollow">GitLab and GitLab-UAT</a>.</p><p>From GitLab-UAT, click a button to create a  and give it a name. For this project,we will name if mockito-basic.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/thumbnails/595396092/image2019-9-16_14-38-23.png?version=1&amp;modificationDate=1568659103766&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/thumbnails/595396092/image2019-9-16_14-38-23.png?version=1&amp;modificationDate=1568659103766&amp;api=v2" loading="lazy"></span><p>GitLab will display instructions on various methods of checking in your code. Since we already have a directory with existing code, we will use following instructions:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">cd mockito-basics
git init
git remote add origin https://gitlab-uat.gs.com/gunern/mockito-basic.git
git add .
git commit -m &quot;Initial commit&quot;
git push -u origin master</pre>
</div></div></td></tr></tbody></table></div><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:35</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
