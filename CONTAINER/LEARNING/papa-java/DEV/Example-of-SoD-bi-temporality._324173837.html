<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Example of SoD bi-temporality.</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                    <li>
                                <span><a href="Project-Profit-Application_315097089.html">Project Profit Application</a></span>
                            </li>
                                                    <li>
                                <span><a href="Add-bi-temporality_324108289.html">Add bi-temporality</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Example of SoD bi-temporality.
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span> on Apr 30, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>When we edit an existing record, we create a new record to retain the audit state.</p><p>Let's say, the original record, which was created at time t0, has a &quot;name&quot; field set to &quot;Duty-A&quot;. Thus, we can represent our original record as follows:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>ID</strong></p></th><td class="confluenceTd"><p><code>1</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Name</strong></p></th><td class="confluenceTd"><p><code>Duty-A</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>in_utc</strong></p></th><td class="confluenceTd"><p><code>t0</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>out_utc</strong></p></th><td class="confluenceTd"><p><code>∞</code></p></td></tr></tbody></table></div><p>At the later time, we decide to modify this record to set the &quot;name&quot; field to value &quot;DUTA-A&quot;. Per the original bi-temporality design, following set of events should happen:</p><p>The original record (ID=1) which is likely connected to Rule and Assignable records continues its life as a &quot;live&quot; record. We will need to modify it's data and in_utc field. Thus, assuming that the change was made at time t1, we would have the following representation of the live record:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>ID</strong></p></th><td class="confluenceTd"><p><code>1</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Name</strong></p></th><td class="confluenceTd"><p><code>DUTY-A</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>in_utc</strong></p></th><td class="confluenceTd"><p><code>t1</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>out_utc</strong></p></th><td class="confluenceTd"><p><code>∞</code></p></td></tr></tbody></table></div><p>In addition, we create an audit record to store old values and timestamp values. Thus, out audit record can be represented like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>ID</strong></p></th><td class="confluenceTd"><p><code>1000001</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Name</strong></p></th><td class="confluenceTd"><p><code>Duty-A</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>in_utc</strong></p></th><td class="confluenceTd"><p><code>t0</code></p></td></tr><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>out_utc</strong></p></th><td class="confluenceTd"><p><code>t1</code><br/></p></td></tr></tbody></table></div><p>to generalize, we can represent state changes of in_utc and out_utc values like this:</p><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Time</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Record ID</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>in_utc</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>out_utc</strong></p></th></tr><tr><td class="confluenceTd"><p><code>t0</code></p></td><td class="confluenceTd"><p><code>1</code></p></td><td class="confluenceTd"><p><br/></p><p><code>t0t1t2t3</code></p><p><br/></p></td><td class="confluenceTd"><p><br/></p><p><code>∞∞∞∞</code></p><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>t1</code></p></td><td class="confluenceTd"><p><code>101</code></p></td><td class="confluenceTd"><p><code>t0</code></p></td><td class="confluenceTd"><p><code>t1</code></p></td></tr><tr><td class="confluenceTd"><p><code>t2</code></p></td><td class="confluenceTd"><p><code>102</code></p></td><td class="confluenceTd"><p><code>t1</code></p></td><td class="confluenceTd"><p><code>t2</code></p></td></tr><tr><td class="confluenceTd"><p><code>t3</code></p></td><td class="confluenceTd"><p><code>103</code></p></td><td class="confluenceTd"><p><code>t2</code></p></td><td class="confluenceTd"><p><code>t3</code></p></td></tr></tbody></table></div><h1 id="ExampleofSoDbi-temporality.-Checkhowbi-temporalityisimplementedinSoD">Check how bi-temporality is implemented in SoD</h1><p>Examine record with ID=1</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost.gs.com/" class="external-link" rel="nofollow">localhost.gs.com</a>:8443/sod/audit/duties/1</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;_embedded&quot;: {
    &quot;duties&quot;: [
      {
        &quot;outUtc&quot;: &quot;9999-12-01T00:00:00Z&quot;,
        &quot;inUtc&quot;: &quot;2020-04-30T10:49:37.457712Z&quot;,
        &quot;createdOn&quot;: &quot;2020-04-30T10:49:37.457712Z&quot;,
        &quot;lastModifiedBy&quot;: &quot;unknown&quot;,
        &quot;auditId&quot;: &quot;0001&quot;,
        &quot;name&quot;: &quot;Duty-A&quot;,
        &quot;description&quot;: null,
        &quot;state&quot;: null,
        &quot;ID&quot;: 1</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><p>Modify record with ID=1</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>PUT Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Body</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost.gs.com/" class="external-link" rel="nofollow">localhost.gs.com</a>:8443/sod/duties/1</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
    &quot;name&quot; : &quot;DUTY-A&quot;
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><p>Check &quot;live&quot; and &quot;audit&quot; records</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost.gs.com/" class="external-link" rel="nofollow">localhost.gs.com</a>:8443/sod/audit/duties/1</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;duties&quot;: [
  {
    &quot;outUtc&quot;: &quot;2020-04-30T14:52:18.094668Z&quot;,
    &quot;inUtc&quot;: &quot;2020-04-30T10:49:37.457712Z&quot;,
    &quot;createdOn&quot;: &quot;2020-04-30T10:49:37.457712Z&quot;,
    &quot;lastModifiedBy&quot;: &quot;unknown&quot;,
    &quot;auditId&quot;: &quot;0001&quot;,
    &quot;name&quot;: &quot;Duty-A&quot;,
    &quot;description&quot;: null,
    &quot;state&quot;: null,
    &quot;ID&quot;: 1000001
  },
  {
    &quot;outUtc&quot;: &quot;9999-12-01T00:00:00Z&quot;,
    &quot;inUtc&quot;: &quot;2020-04-30T14:52:18.11967Z&quot;,
    &quot;createdOn&quot;: &quot;2020-04-30T10:49:37.457712Z&quot;,
    &quot;lastModifiedBy&quot;: &quot;gunern&quot;,
    &quot;auditId&quot;: &quot;0001&quot;,
    &quot;name&quot;: &quot;DUTY-A&quot;,
    &quot;description&quot;: null,
    &quot;state&quot;: null,
    &quot;ID&quot;: 1
  }</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
