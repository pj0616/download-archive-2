<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Use Multiple Tables</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                    <li>
                                <span><a href="Spring-Boot_278888737.html">Spring Boot</a></span>
                            </li>
                                                    <li>
                                <span><a href="Basic_289898911.html">Basic</a></span>
                            </li>
                                                    <li>
                                <span><a href="Use-HATEOAS-and-Add-Filtering-to-the-Repository_289866425.html">Use HATEOAS and Add Filtering to the Repository</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Use Multiple Tables
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span> on Apr 20, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>In previous HATEOAS tutorial, we created REST endpoints with links for a single table - USER. See <a href="https://confluence.apg.services.gs.com/display/~gunern/Use+HATEOAS+and+Add+Filtering+to+the+Repository" class="external-link" rel="nofollow">Use HATEOAS and Add Filtering to the Repository</a>.</p><p>In this tutorial, we proceed with that exercise by adding another table - ORDER_DETAIL.</p><h2 id="UseMultipleTables-UserfulLinks">Userful Links</h2><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 99.0px;"/><col style="width: 861.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>URLs</p></td><td class="confluenceTd"><p><br/></p><p><a href="https://stackoverflow.com/questions/25858698/spring-hateoas-embedded-resource-support/37236781" class="external-link" rel="nofollow">https://stackoverflow.com/questions/25858698/spring-hateoas-embedded-resource-support/37236781</a><a href="https://jsonapi.org/format/#document-structure-resource-objects" class="external-link" rel="nofollow">https://jsonapi.org/format/#document-structure-resource-objects</a><a href="http://tommyziegler.com/how-to-expose-the-resourceid-with-spring-data-rest/" class="external-link" rel="nofollow">http://tommyziegler.com/how-to-expose-the-resourceid-with-spring-data-rest/</a><a href="https://stackoverflow.com/questions/30912826/expose-all-ids-when-using-spring-data-rest" class="external-link" rel="nofollow">https://stackoverflow.com/questions/30912826/expose-all-ids-when-using-spring-data-rest</a></p><p><br/></p></td></tr></tbody></table></div><p><br/></p><h2 id="UseMultipleTables-UseCareWhenNamingYourTables">Use Care When Naming Your Tables</h2><p>If you were to create an Entity object named &quot;<code>Order</code>&quot; and create a corresponding ORDER in-memory database table, Spring will generate many exceptions and errors without a good indication to the nature of the error. The reason for the error is the fact that &quot;<code>order</code>&quot; is an SQL reserved word. You may be able to add annotations to modify the name of the table, but &quot;order&quot; and other reserved SQL keywords may not b e used in their naked form.</p><h2 id="UseMultipleTables-SimplifyUserandUserControllerClasses">Simplify User and UserController Classes</h2><p>The main purpose of this tutorial is to use data from multiple tables and to join on that data.</p><p>We will not be filtering <code>User</code> on the <code>last_modified</code> value. Thus, the User class is simplified:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Entity
public class User extends ResourceSupport
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name=&quot;ID&quot;)
    private long userID;
    private String name;
    private String role;

    public long getUserID()
    {
        return userID;
    }

    public void setUserID(long userID)
    {
        this.userID = userID;
    }

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    public String getRole()
    {
        return role;
    }

    public void setRole(String role)
    {
        this.role = role;
    }

    @Override
    public String toString()
    {
        return &quot;User{&quot; +
                &quot;ID=&quot; + userID +
                &quot;, name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, role=&#39;&quot; + role + &#39;\&#39;&#39; +
                &#39;}&#39;;
    }
}</pre>
</div></div></td></tr></tbody></table></div><p>Similarly, <code>UserController</code> class no longer references<code> last_modifilied</code> field</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@RestController
@RepositoryRestController
public class UserController
{
    private Logger logger = LoggerFactory.getLogger(getClass());
    @Autowired
    private UserRepository userRepository;

    @GetMapping(&quot;/users&quot;)
    public @ResponseBody ResponseEntity&lt;?&gt; getAll()
    {
        List&lt;User&gt; users = userRepository.findAll().stream()
                .map(u -&gt; {u.add(linkTo(methodOn(getClass()).getAll()).slash( &quot;/&quot; + u.getUserID()).withSelfRel()); return u;})
                .collect(Collectors.toList());

        Resources&lt;User&gt; resources = new Resources&lt;&gt;(users);
        resources.add(linkTo(methodOn(getClass()).getAll()).withSelfRel());
        return ResponseEntity.ok(resources);
    }

    @GetMapping(&quot;/users/{id}&quot;)
    public @ResponseBody User getOne(@PathVariable(&quot;id&quot;) long id)
    {
        Optional&lt;User&gt; currentUserOptional = userRepository.findById(id);
        return currentUserOptional.get();
    }

    @PostMapping(path=&quot;/users&quot;, consumes = &quot;application/json&quot;)
    public User createUser(@Valid @RequestBody User user)
    {
        return userRepository.save(user);
    }

    @PutMapping(path=&quot;/users/{id}&quot;, consumes = &quot;application/json&quot;)
    public User updateUser(@PathVariable(&quot;id&quot;) long id, @Valid @RequestBody User user)
    {
        Optional&lt;User&gt; currentUserOptional = userRepository.findById(id);
        if(currentUserOptional.isPresent())
        {
            User currentUser = currentUserOptional.get();
            currentUser.setName(user.getName());
            currentUser.setRole(user.getRole());
            return userRepository.save(currentUser);
        }
        return userRepository.save(user);
    }

    @DeleteMapping(&quot;/users/{id}&quot;)
    public String deleteUser(@PathVariable(&quot;id&quot;) long id)
    {
        User user = userRepository.getOne(id);
        if(user != null)
        {
            userRepository.delete(user);
            return &quot;deleted&quot;;
        }
        return &quot;not found&quot;;
    }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="UseMultipleTables-AddClassesforOrderDetail">Add Classes for OrderDetail</h2><p>We will add a new <code>Entity</code>, <code>Repository</code>, and <code>Controller</code> classes from the new object - <code>OrderDetail</code>.</p><h3 id="UseMultipleTables-EntityClass">Entity Class</h3><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Entity
public class OrderDetail extends ResourceSupport
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name=&quot;ID&quot;)
    private long orderID;
    private double price;
    private int quantity;


    public long getOrderID()
    {
        return orderID;
    }

    public void setOrderID(long orderID)
    {
        this.orderID = orderID;
    }


    public double getPrice()
    {
        return price;
    }

    public void setPrice(double price)
    {
        this.price = price;
    }

    public int getQuantity()
    {
        return quantity;
    }

    public void setQuantity(int quantity)
    {
        this.quantity = quantity;
    }

    @Override
    public String toString()
    {
        return &quot;OrderDetail{&quot; +
                &quot;orderID=&quot; + orderID +
                &quot;, price=&quot; + price +
                &quot;, quantity=&quot; + quantity +
                &#39;}&#39;;
    }
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="UseMultipleTables-RepositoryClass">Repository Class</h3><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@RepositoryRestResource
public interface OrderDetailRepository extends JpaRepository&lt;OrderDetail, Long&gt;
{
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="UseMultipleTables-ControllerClass">Controller Class</h3><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@RestController
@RepositoryRestController
public class OrderDetailController
{
    private Logger logger = LoggerFactory.getLogger(getClass());

    @Autowired
    private OrderDetailRepository orderRepository;

    @GetMapping(&quot;/orders&quot;)
    public @ResponseBody
    ResponseEntity&lt;?&gt; getAll()
    {
        List&lt;OrderDetail&gt; orders = orderRepository.findAll().stream()
                .map(u -&gt; {u.add(linkTo(methodOn(getClass()).getAll()).slash(&quot;/&quot; + u.getOrderID()).withRel(&quot;self&quot;)); return u;})
                .collect(Collectors.toList());

        Resources&lt;OrderDetail&gt; resources = new Resources&lt;&gt;(orders);
        resources.add(linkTo(methodOn(OrderDetailController.class).getAll()).withSelfRel());
        return ResponseEntity.ok(resources);
    }

    @GetMapping(&quot;/orders/{id}&quot;)
    public @ResponseBody
    OrderDetail getOne(@PathVariable(&quot;id&quot;) long id)
    {
        Optional&lt;OrderDetail&gt; currentOrderOptional = orderRepository.findById(id);
        return currentOrderOptional.get();
    }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="UseMultipleTables-Populatein-memoryDatabaseandProvideConfiguration">Populate in-memory Database and Provide Configuration</h2><p>We populate our in-memory database by creating a file under resources with <code>*.sql</code> extension:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">INSERT INTO ORDER_DETAIL(ID, price, quantity) VALUES(1, 5.0, 10)
INSERT INTO ORDER_DETAIL(ID, price, quantity) VALUES(2, 7.0, 20)
INSERT INTO ORDER_DETAIL(ID, price, quantity) VALUES(3, 9.0, 30)


INSERT INTO USER(ID, name, role) VALUES(1, &#39;nick&#39;, &#39;dev&#39;)
INSERT INTO USER(ID, name, role) VALUES(2, &#39;paul&#39;, &#39;tech&#39;)
INSERT INTO USER(ID, name, role) VALUES(3, &#39;sam&#39;, &#39;dev&#39;)
INSERT INTO USER(ID, name, role) VALUES(4, &#39;mary&#39;, &#39;support&#39;)
INSERT INTO USER(ID, name, role) VALUES(5, &#39;jim&#39;, &#39;manager&#39;)</pre>
</div></div></td></tr></tbody></table></div><p>Set configuration</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">spring.jpa.show-sql=true
spring.h2.console.enabled=true
spring.datasource.url=jdbc:h2:mem:db</pre>
</div></div></td></tr></tbody></table></div><h2 id="UseMultipleTables-Testin-memoryDatabase">Test in-memory Database</h2><p>From Browser, navigate to:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 72.0px;"/><col style="width: 686.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>URL</p></td><td class="confluenceTd"><p><a href="http://localhost:8080/h2-console" class="external-link" rel="nofollow">http://localhost:8080/h2-console</a></p></td></tr></tbody></table></div><p>Provide following value for:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 111.0px;"/><col style="width: 647.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>JDBC URL:</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">jdbc:h2:mem:db</pre>
</div></div></td></tr></tbody></table></div><p>Click to &quot;Connect&quot; and notice presence of our tables:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/thumbnails/603200084/image2019-9-24_16-21-1.png?version=1&amp;modificationDate=1569356461946&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/thumbnails/603200084/image2019-9-24_16-21-1.png?version=1&amp;modificationDate=1569356461946&amp;api=v2" loading="lazy"></span><h3 id="UseMultipleTables-QueryDatainTables">Query Data in Tables</h3><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/attachments/603200084/image2019-9-25_7-30-50.png?version=1&amp;modificationDate=1569411051040&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/attachments/603200084/image2019-9-25_7-30-50.png?version=1&amp;modificationDate=1569411051040&amp;api=v2" loading="lazy"></span></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/thumbnails/603200084/image2019-9-24_16-22-43.png?version=1&amp;modificationDate=1569356563100&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/thumbnails/603200084/image2019-9-24_16-22-43.png?version=1&amp;modificationDate=1569356563100&amp;api=v2" loading="lazy"></span></td></tr></tbody></table></div><h2 id="UseMultipleTables-TestRESTAPIEndpoints">Test REST API Endpoints</h2><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 226.0px;"/><col style="width: 732.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>URL</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost:8080/users" class="external-link" rel="nofollow">http://localhost:8080/users</a></p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;_embedded&quot; : {
    &quot;users&quot; : [ {
      &quot;name&quot; : &quot;nick&quot;,
      &quot;role&quot; : &quot;dev&quot;,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/users/1&quot;
        }
      }
    }, {
      &quot;name&quot; : &quot;paul&quot;,
      &quot;role&quot; : &quot;tech&quot;,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/users/2&quot;
        }
      }
    }, {
      &quot;name&quot; : &quot;sam&quot;,
      &quot;role&quot; : &quot;dev&quot;,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/users/3&quot;
        }
      }
    }, {
      &quot;name&quot; : &quot;mary&quot;,
      &quot;role&quot; : &quot;support&quot;,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/users/4&quot;
        }
      }
    }, {
      &quot;name&quot; : &quot;jim&quot;,
      &quot;role&quot; : &quot;manager&quot;,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/users/5&quot;
        }
      }
    } ]
  },
  &quot;_links&quot; : {
    &quot;self&quot; : {
      &quot;href&quot; : &quot;http://localhost:8080/users&quot;
    }
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><a href="http://localhost:8080/orders" class="external-link" rel="nofollow">http://localhost:8080/orders</a></p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;_embedded&quot; : {
    &quot;orderDetails&quot; : [ {
      &quot;price&quot; : 5.0,
      &quot;quantity&quot; : 10,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/orders/1&quot;
        }
      }
    }, {
      &quot;price&quot; : 7.0,
      &quot;quantity&quot; : 20,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/orders/2&quot;
        }
      }
    }, {
      &quot;price&quot; : 9.0,
      &quot;quantity&quot; : 30,
      &quot;_links&quot; : {
        &quot;self&quot; : {
          &quot;href&quot; : &quot;http://localhost:8080/orders/3&quot;
        }
      }
    } ]
  },
  &quot;_links&quot; : {
    &quot;self&quot; : {
      &quot;href&quot; : &quot;http://localhost:8080/orders&quot;
    }
  }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="UseMultipleTables-TweaktheOutput">Tweak the Output</h2><p>Our current output has several problems. One of the problems is the name of the Entity class that appears in the output, for example:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>&quot;_embedded&quot; : { &quot;orderDetails&quot; : [ { &quot;price&quot; : 5.0, &quot;quantity&quot; : 10, &quot;_links&quot; : { &quot;self&quot; : { &quot;href&quot; : &quot;http://localhost:8080/orders/1&quot; } } }</code></p></td></tr></tbody></table></div><p>We do not want the &quot;orderDetails: to be displayed in the output. We know that we are display orders from the Endpoint being used, i.e.: <a href="http://localhost:8080/orders" class="external-link" rel="nofollow">http://localhost:8080/orders</a>.</p><h3 id="UseMultipleTables-SuppressdisplayingnameofEntityclassintheoutput">Suppress displaying name of Entity class in the output</h3><p>We suppress display of the Entity class with following addition to <code>application.properties</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
spring.data.rest.defaultMediaType=application/json</pre>
</div></div></td></tr></tbody></table></div><p>This property will suppress displaying name of the Entity class but introduce other problems:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>{ &quot;links&quot; : [ { &quot;rel&quot; : &quot;self&quot;, &quot;href&quot; : &quot;http://localhost:8080/orders&quot;, &quot;hreflang&quot; : null, &quot;media&quot; : null, &quot;title&quot; : null, &quot;type&quot; : null, &quot;deprecation&quot; : null } ], &quot;content&quot; : [ { &quot;price&quot; : 5.0, &quot;quantity&quot; : 10, &quot;links&quot; : [ { &quot;rel&quot; : &quot;self&quot;, &quot;href&quot; : &quot;http://localhost:8080/orders/1&quot;, &quot;hreflang&quot; : null, &quot;media&quot; : null, &quot;title&quot; : null, &quot;type&quot; : null, &quot;deprecation&quot; : null } ] },</code></p></td></tr></tbody></table></div><p>Note that the name is now displayed as &quot;content&quot;, however, we are also display a lot of link attributes with null values.</p><h3 id="UseMultipleTables-Suppressdisplayoflinkattributeswithnullvalues">Suppress display of link attributes with null values</h3><p>We can add another property to <code>application.properties</code> file</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
spring.jackson.default-property-inclusion=NON_NULL</pre>
</div></div></td></tr></tbody></table></div><p>and now, the display looks much better:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8080/orders&quot;
  } ],
  &quot;content&quot; : [ {
    &quot;price&quot; : 5.0,
    &quot;quantity&quot; : 10,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/1&quot;
    } ]
  }, {
    &quot;price&quot; : 7.0,
    &quot;quantity&quot; : 20,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/2&quot;
    } ]
  }, {
    &quot;price&quot; : 9.0,
    &quot;quantity&quot; : 30,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/3&quot;
    } ]
  } ]
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="UseMultipleTables-MissingIDvalues">Missing ID values</h3><p>HATEOAS serve a useful purpose in helping us to navigate between Entity objects. However, the addition of the link also removed the ID field (field which was marked with @Id annotation in the Entity object) from the display.</p><p>To put ID values back requires introduction of a Configuration class.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Configuration
public class RestConfigAdapter extends RepositoryRestConfigurerAdapter
{
    @Autowired
    private EntityManager entityManager;

    @Override
    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {
        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream()
                .map(e -&gt; e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0]));
    }
}</pre>
</div></div></td></tr></tbody></table></div><p>Finally, when we execute the final version of our code, we see all information displayed to our liking:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8080/orders&quot;
  } ],
  &quot;content&quot; : [ {
    &quot;orderID&quot; : 1,
    &quot;price&quot; : 5.0,
    &quot;quantity&quot; : 10,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/1&quot;
    } ]
  }, {
    &quot;orderID&quot; : 2,
    &quot;price&quot; : 7.0,
    &quot;quantity&quot; : 20,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/2&quot;
    } ]
  }, {
    &quot;orderID&quot; : 3,
    &quot;price&quot; : 9.0,
    &quot;quantity&quot; : 30,
    &quot;links&quot; : [ {
      &quot;rel&quot; : &quot;self&quot;,
      &quot;href&quot; : &quot;http://localhost:8080/orders/3&quot;
    } ]
  } ]
}</pre>
</div></div></td></tr></tbody></table></div><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:35</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
