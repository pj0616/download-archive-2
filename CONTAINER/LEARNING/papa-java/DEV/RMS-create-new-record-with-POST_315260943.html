<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : RMS create new record with POST</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                    <li>
                                <span><a href="RMS_315097111.html">RMS</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : RMS create new record with POST
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span> on Apr 27, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="RMScreatenewrecordwithPOST-Changestoin-memorydatabase">Changes to in-memory database</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
alter sequence HIBERNATE_SEQUENCE restart with 101</pre>
</div></div></td></tr></tbody></table></div><h1 id="RMScreatenewrecordwithPOST-ChangestoexistingcodeinpreparationforPOST">Changes to existing code in preparation for POST</h1><h2 id="RMScreatenewrecordwithPOST-AddteamIdfieldtoEmployeePresentationobjectandprovidedefaultconstructor">Add <code>teamId</code> field to EmployeePresentation object and provide default constructor</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public class EmployeePresentation extends ResourceSupport
{
    @JsonProperty
    private long employeeID;
    private String name;
    private String guid;
    private String kerberos;
    private String employeeNumber;
    private String title;
    private String phone;
    private String location;
    private String department;
    private int teamId;

    public EmployeePresentation()
    {
    }

    public EmployeePresentation(Employee employee)
    {
        this.employeeID = employee.getID();
        this.name = employee.getName();
        this.guid = employee.getGuid();
        this.kerberos = employee.getKerberos();
        this.employeeNumber = employee.getEmployeeNumber();
        this.title = employee.getTitle();
        this.phone = employee.getPhone();
        this.location = employee.getLocation();
        this.department = employee.getDepartment();
        this.teamId = employee.getTeam().getID();
    }
    ...
    public int getTeamId()
    {
        return teamId;
    }

    public void setTeamId(int teamId)
    {
        this.teamId = teamId;
    }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="RMScreatenewrecordwithPOST-AddconstructortoEmployeeobjecttobeabletoinitializefromEmployeePresentation">Add constructor to <code>Employee</code> object to be able to initialize from <code>EmployeePresentation</code></h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public Employee(EmployeePresentation employeePresentation)
{
    this.name = employeePresentation.getName();
    this.guid = employeePresentation.getGuid();
    this.kerberos = employeePresentation.getKerberos();
    this.employeeNumber = employeePresentation.getEmployeeNumber();
    this.title = employeePresentation.getTitle();
    this.phone = employeePresentation.getPhone();
    this.location = employeePresentation.getLocation();
    this.department = employeePresentation.getDepartment();
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="RMScreatenewrecordwithPOST-EmployeePOSTMethodinEmployeeController">Employee POST Method in <code>EmployeeController</code></h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@PostMapping(&quot;/employees&quot;)
public ResponseEntity&lt;?&gt; createEmployee(@RequestBody EmployeePresentation employeePresentation)
{
    Optional&lt;Team&gt; teamOptional = teamRepository.findById(employeePresentation.getTeamId());
    if(!teamOptional.isPresent())
    {
        throw new NotFoundException(&quot;team-&quot; + employeePresentation.getTeamId());
    }
    Team team = teamOptional.get();
    Employee employee = new Employee(employeePresentation);
    employee.setTeam(team);
    employeeRepository.save(employee);
    URI location = ServletUriComponentsBuilder
            .fromCurrentRequest()
            .path(&quot;/{id}&quot;)
            .buildAndExpand(employee.getID()).toUri();
    return ResponseEntity.created(location).build();
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="RMScreatenewrecordwithPOST-Addclassestotheconfigpackage">Add classes to the <code>config</code> package</h2><p>Create a new employee and examine data in the H2 console</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-24_12-38-20.png?version=1&amp;modificationDate=1587746300649&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-24_12-38-20.png?version=1&amp;modificationDate=1587746300649&amp;api=v2" loading="lazy"></span><p>Note that<code> created_by</code> and<code> last_modified_by</code> fields are set to null.</p><p>We will add following classes to the <code>config</code> package:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public class AuditorAwareImpl implements AuditorAware&lt;String&gt;
{
    @Override
    public Optional&lt;String&gt; getCurrentAuditor()
    {
        return Optional.of(System.getProperty(&quot;user.name&quot;));
    }
}</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Configuration
@EnableJpaAuditing(auditorAwareRef = &quot;auditorAware&quot;)
public class JpaConfig
{
    @Bean
    public AuditorAware&lt;String&gt; auditorAware()
    {
        return new AuditorAwareImpl();
    }
}</pre>
</div></div></td></tr></tbody></table></div><p>Now, after we add an employee and check H2 console, we can observe values in <code>created_by</code> and<code> last_modified_by</code> fields:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-24_12-45-22.png?version=1&amp;modificationDate=1587746722721&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-24_12-45-22.png?version=1&amp;modificationDate=1587746722721&amp;api=v2" loading="lazy"></span><h1 id="RMScreatenewrecordwithPOST-SaveRMSHierarchy">Save RMS Hierarchy</h1><p>We will implement this in phases. First, we only want to save RmsNodePair objects without employees. Once this works, we will add employees</p><h2 id="RMScreatenewrecordwithPOST-SaveRMSHierarchywithoutemployees">Save RMS Hierarchy without employees</h2><p>We will use following input:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;name&quot;: &quot;Tech Risk Engineering&quot;,
  &quot;nodeType&quot;: &quot;Group&quot;,
  &quot;code&quot;: &quot;OC.GRO.GMAA.74549&quot;,
  &quot;children&quot;: [
    {
      &quot;name&quot;: &quot;Risk Measurement and Strategy&quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO5768&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Measurement Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA4051&quot;
        }
      ]
    },
    {
      &quot;name&quot;: &quot;Security SWAT&quot;,
      &quot;nodeType&quot;: &quot;Team&quot;,
      &quot;code&quot;: &quot;OC_TEA9108&quot;
     },
    {
      &quot;name&quot;: &quot;TR Platform Engineering&quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO12320&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Core Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12323&quot;
        },
        {
          &quot;name&quot;: &quot;Vendor and Threat&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12322&quot;
        },
        {
          &quot;name&quot;: &quot;External Digital&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12321&quot;
        },
        {
          &quot;name&quot;: &quot;Security Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12324&quot;
        }
      ]
    },
    {
      &quot;name&quot;: &quot;Reporting and Analytics &quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO8061&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Reporting/Analytics&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC.TEA.MAR.19833&quot;
        },
        {
          &quot;name&quot;: &quot;Data Science&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12317&quot;
        }
      ]
    }
  ]
}</pre>
</div></div></td></tr></tbody></table></div><p>Let use manually map out relationships from above:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Parent Name</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Child Name</strong></p></th></tr><tr><td class="confluenceTd"><p>Tech Risk Engineering</p></td><td class="confluenceTd"><p>Risk Measurement and Strategy</p></td></tr><tr><td class="confluenceTd"><p>Risk Measurement and Strategy</p></td><td class="confluenceTd"><p>Measurement Engineering</p></td></tr><tr><td class="confluenceTd"><p>Tech Risk Engineering</p></td><td class="confluenceTd"><p>Security SWAT</p></td></tr><tr><td class="confluenceTd"><p>Tech Risk Engineering</p></td><td class="confluenceTd"><p>TR Platform Engineering</p></td></tr><tr><td class="confluenceTd"><p>TR Platform Engineering</p></td><td class="confluenceTd"><p>Core Engineering</p></td></tr><tr><td class="confluenceTd"><p>TR Platform Engineering</p></td><td class="confluenceTd"><p>Vendor and Threat</p></td></tr><tr><td class="confluenceTd"><p>TR Platform Engineering</p></td><td class="confluenceTd"><p>External Digital</p></td></tr><tr><td class="confluenceTd"><p>TR Platform Engineering</p></td><td class="confluenceTd"><p>Security Engineering</p></td></tr><tr><td class="confluenceTd"><p>Tech Risk Engineering</p></td><td class="confluenceTd"><p>Reporting and Analytics</p></td></tr><tr><td class="confluenceTd"><p>Reporting and Analytics</p></td><td class="confluenceTd"><p>Reporting/Analytics</p></td></tr><tr><td class="confluenceTd"><p>Reporting and Analytics</p></td><td class="confluenceTd"><p>Data Science</p></td></tr></tbody></table></div><p>Use H2 Console to validate results</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>RMS_NODE</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>RMS_NODE_MAP</strong></p></th></tr><tr><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-25_10-42-44.png?version=1&amp;modificationDate=1587825764308&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/attachments/747644569/image2020-4-25_10-42-44.png?version=1&amp;modificationDate=1587825764308&amp;api=v2" loading="lazy"></span></td><td class="confluenceTd"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image confluence-external-resource image-center" src="https://confluence.apg.services.gs.com/download/thumbnails/747644569/image2020-4-25_10-44-16.png?version=1&amp;modificationDate=1587825856293&amp;api=v2" data-image-src="https://confluence.apg.services.gs.com/download/thumbnails/747644569/image2020-4-25_10-44-16.png?version=1&amp;modificationDate=1587825856293&amp;api=v2" loading="lazy"></span></td></tr></tbody></table></div><p>Code in the RmsNodeController</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@PostMapping(&quot;/rmsnodes&quot;)
public ResponseEntity&lt;?&gt; createRmsNodes(@RequestBody RmsNodeInput rmsNodeInput)
{
    RmsNode rmsNode = new RmsNode();
    saveRmsNodePairs(rmsNodeInput, rmsNode);
    URI location = ServletUriComponentsBuilder
            .fromCurrentRequest()
            .path(&quot;/{id}&quot;)
            .buildAndExpand(rmsNode.getID()).toUri();
    return ResponseEntity.created(location).build();
}


private void saveRmsNodePairs(RmsNodeInput rmsNodeInput, RmsNode rmsNodeParent)
{
    rmsNodeParent.setName(rmsNodeInput.getName());
    rmsNodeParent.setNodeType(rmsNodeInput.getNodeType());
    rmsNodeParent.setCode(rmsNodeInput.getCode());
    for(RmsNodeInput childRmsNodeInput : rmsNodeInput.getChildren())
    {
        RmsNode rmsNodeChild = new RmsNode();
        saveRmsNodePairs(childRmsNodeInput, rmsNodeChild);
        rmsNodeMapRepository.save(new RmsNodePair(rmsNodeParent, rmsNodeChild));
    }
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="RMScreatenewrecordwithPOST-Note:">Note:</h3><p>Saving RmsNodePairs aslo saved RmsNodes, There was no call to R<code>msNodeRepository</code> to save <code>RmsNode</code>.</p><h2 id="RMScreatenewrecordwithPOST-SaveRMSHierarchywithEmployees">Save RMS Hierarchy with Employees</h2><p>We will use following input:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;name&quot;: &quot;Tech Risk Engineering&quot;,
  &quot;nodeType&quot;: &quot;Group&quot;,
  &quot;code&quot;: &quot;OC.GRO.GMAA.74549&quot;,
  &quot;children&quot;: [
    {
      &quot;name&quot;: &quot;Security SWAT&quot;,
      &quot;nodeType&quot;: &quot;Team&quot;,
      &quot;code&quot;: &quot;OC_TEA9108&quot;,
      &quot;team&quot;: [
        {
          &quot;name&quot;: &quot;Katz, Jeremy &quot;,
          &quot;guid&quot;: &quot;800004486&quot;,
          &quot;kerberos&quot;: &quot;katzj&quot;,
          &quot;employeeNumber&quot;: &quot;00014412&quot;,
          &quot;title&quot;: &quot;Vice President&quot;,
          &quot;phone&quot;: &quot;1(212)902-3620&quot;,
          &quot;location&quot;: &quot;New York&quot;,
          &quot;department&quot;: &quot;T966&quot;
        },
        {
          &quot;name&quot;: &quot;Devadas, Neeraja &quot;,
          &quot;guid&quot;: &quot;800350842&quot;,
          &quot;kerberos&quot;: &quot;devadn&quot;,
          &quot;employeeNumber&quot;: &quot;00188571&quot;,
          &quot;title&quot;: &quot;Associate&quot;,
          &quot;phone&quot;: &quot;1(212)855-8589&quot;,
          &quot;location&quot;: &quot;New York&quot;,
          &quot;department&quot;: &quot;T966&quot;
        },
        {
          &quot;name&quot;: &quot;Guner, Nicholas &quot;,
          &quot;guid&quot;: &quot;800245357&quot;,
          &quot;kerberos&quot;: &quot;gunern&quot;,
          &quot;employeeNumber&quot;: &quot;00071635&quot;,
          &quot;title&quot;: &quot;Vice President&quot;,
          &quot;phone&quot;: &quot;1(212)902-0401&quot;,
          &quot;location&quot;: &quot;New York&quot;,
          &quot;department&quot;: &quot;T966&quot;
        },
        {
          &quot;name&quot;: &quot;Wang, Christine &quot;,
          &quot;guid&quot;: &quot;800371394&quot;,
          &quot;kerberos&quot;: &quot;wac&quot;,
          &quot;employeeNumber&quot;: &quot;00198485&quot;,
          &quot;title&quot;: &quot;Exempt&quot;,
          &quot;phone&quot;: &quot;1(212)855-7790&quot;,
          &quot;location&quot;: &quot;New York&quot;,
          &quot;department&quot;: &quot;T966&quot;
        },
        {
          &quot;name&quot;: &quot;Goyal, Naman &quot;,
          &quot;guid&quot;: &quot;800351085&quot;,
          &quot;kerberos&quot;: &quot;goynam&quot;,
          &quot;employeeNumber&quot;: &quot;00189600&quot;,
          &quot;title&quot;: &quot;Associate&quot;,
          &quot;phone&quot;: &quot;1(646)446-4511&quot;,
          &quot;location&quot;: &quot;Bengaluru&quot;,
          &quot;department&quot;: &quot;T966&quot;
        },
        {
          &quot;name&quot;: &quot;S, Sanjana &quot;,
          &quot;guid&quot;: &quot;800355186&quot;,
          &quot;kerberos&quot;: &quot;ssanjan&quot;,
          &quot;employeeNumber&quot;: &quot;00190515&quot;,
          &quot;title&quot;: &quot;Exempt&quot;,
          &quot;phone&quot;: &quot;1(646)446-9341&quot;,
          &quot;location&quot;: &quot;Bengaluru&quot;,
          &quot;department&quot;: &quot;T966&quot;
        }
      ]
    },
    {
      &quot;name&quot;: &quot;Risk Measurement and Strategy&quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO5768&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Measurement Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA4051&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Townsend, Ryan &quot;,
              &quot;guid&quot;: &quot;800218187&quot;,
              &quot;kerberos&quot;: &quot;townsr&quot;,
              &quot;employeeNumber&quot;: &quot;00126203&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(917)343-3478&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Gupta, Gaurav (Tech Risk) &quot;,
              &quot;guid&quot;: &quot;800186753&quot;,
              &quot;kerberos&quot;: &quot;gugaur&quot;,
              &quot;employeeNumber&quot;: &quot;00108850&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)855-0946&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Krishnamoorthy, Meera &quot;,
              &quot;guid&quot;: &quot;800316371&quot;,
              &quot;kerberos&quot;: &quot;krimee&quot;,
              &quot;employeeNumber&quot;: &quot;00169669&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(917)343-7419&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Chan, Peter &quot;,
              &quot;guid&quot;: &quot;800060938&quot;,
              &quot;kerberos&quot;: &quot;chanpe&quot;,
              &quot;employeeNumber&quot;: &quot;00121691&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(917)343-2025&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Mengi, Sourabh &quot;,
              &quot;guid&quot;: &quot;800350895&quot;,
              &quot;kerberos&quot;: &quot;mengis&quot;,
              &quot;employeeNumber&quot;: &quot;30179064&quot;,
              &quot;title&quot;: &quot;Contingent Worker&quot;,
              &quot;phone&quot;: &quot;1(646)446-4490&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Kandkuru, Mallikaarjun &quot;,
              &quot;guid&quot;: &quot;800351960&quot;,
              &quot;kerberos&quot;: &quot;kandkm&quot;,
              &quot;employeeNumber&quot;: &quot;30179065&quot;,
              &quot;title&quot;: &quot;Contingent Worker&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Bandhu, Vinayak &quot;,
              &quot;guid&quot;: &quot;800315574&quot;,
              &quot;kerberos&quot;: &quot;bandhv&quot;,
              &quot;employeeNumber&quot;: &quot;30156388&quot;,
              &quot;title&quot;: &quot;Contingent Worker&quot;,
              &quot;phone&quot;: &quot;1(212)934-6091&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Ravi, Preethi &quot;,
              &quot;guid&quot;: &quot;800352906&quot;,
              &quot;kerberos&quot;: &quot;ravipre&quot;,
              &quot;employeeNumber&quot;: &quot;00191438&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(212)357-4678&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Madhu, Vaishak &quot;,
              &quot;guid&quot;: &quot;800360711&quot;,
              &quot;kerberos&quot;: &quot;madvai&quot;,
              &quot;employeeNumber&quot;: &quot;30185006&quot;,
              &quot;title&quot;: &quot;Contingent Worker&quot;,
              &quot;phone&quot;: &quot;1(212)934-7472&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Rath, Sankalpa &quot;,
              &quot;guid&quot;: &quot;800367506&quot;,
              &quot;kerberos&quot;: &quot;rathsan&quot;,
              &quot;employeeNumber&quot;: &quot;00197414&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(972)368-0469&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;K, Nikhil &quot;,
              &quot;guid&quot;: &quot;800369189&quot;,
              &quot;kerberos&quot;: &quot;knikhk&quot;,
              &quot;employeeNumber&quot;: &quot;30191359&quot;,
              &quot;title&quot;: &quot;Contingent Worker&quot;,
              &quot;phone&quot;: &quot;1(212)934-2752&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Rayini, Venu &quot;,
              &quot;guid&quot;: &quot;800373310&quot;,
              &quot;kerberos&quot;: &quot;rayinv&quot;,
              &quot;employeeNumber&quot;: &quot;00198757&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-0672&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Soundararaj, Sharath &quot;,
              &quot;guid&quot;: &quot;800334313&quot;,
              &quot;kerberos&quot;: &quot;thirsh&quot;,
              &quot;employeeNumber&quot;: &quot;00178599&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(972)368-9453&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Rosenthal, Gal &quot;,
              &quot;guid&quot;: &quot;800317983&quot;,
              &quot;kerberos&quot;: &quot;rosgal&quot;,
              &quot;employeeNumber&quot;: &quot;00171289&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(917)343-0496&quot;,
              &quot;location&quot;: &quot;Tel Aviv&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        }
      ]
    },
    {
      &quot;name&quot;: &quot;Reporting and Analytics &quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO8061&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Reporting/Analytics&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC.TEA.MAR.19833&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Ng, Evan &quot;,
              &quot;guid&quot;: &quot;800184948&quot;,
              &quot;kerberos&quot;: &quot;ngevan&quot;,
              &quot;employeeNumber&quot;: &quot;00100767&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(917)343-7829&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Elliott, Stacy A. &quot;,
              &quot;guid&quot;: &quot;800333621&quot;,
              &quot;kerberos&quot;: &quot;jostac&quot;,
              &quot;employeeNumber&quot;: &quot;00178489&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)902-9300&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Low, Eugene M &quot;,
              &quot;guid&quot;: &quot;800352799&quot;,
              &quot;kerberos&quot;: &quot;loweug&quot;,
              &quot;employeeNumber&quot;: &quot;00191744&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(212)357-4429&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Data Science&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12317&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;O&#39;Grady, Brian &quot;,
              &quot;guid&quot;: &quot;800333892&quot;,
              &quot;kerberos&quot;: &quot;ogradb&quot;,
              &quot;employeeNumber&quot;: &quot;00178431&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(212)357-2118&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Gupta, Nilesh &quot;,
              &quot;guid&quot;: &quot;800357113&quot;,
              &quot;kerberos&quot;: &quot;gunile&quot;,
              &quot;employeeNumber&quot;: &quot;00191358&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(212)934-0312&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        }
      ]
    },
    {
      &quot;name&quot;: &quot;TR Platform Engineering&quot;,
      &quot;nodeType&quot;: &quot;Group&quot;,
      &quot;code&quot;: &quot;OC_GRO12320&quot;,
      &quot;children&quot;: [
        {
          &quot;name&quot;: &quot;Security Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12324&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Davis, Joshua &quot;,
              &quot;guid&quot;: &quot;800351780&quot;,
              &quot;kerberos&quot;: &quot;djoshu&quot;,
              &quot;employeeNumber&quot;: &quot;00190148&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-9165&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Jauregui, Juan &quot;,
              &quot;guid&quot;: &quot;800321388&quot;,
              &quot;kerberos&quot;: &quot;jaurej&quot;,
              &quot;employeeNumber&quot;: &quot;00171600&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(972)368-0287&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Pasco, Stephen &quot;,
              &quot;guid&quot;: &quot;800295597&quot;,
              &quot;kerberos&quot;: &quot;pascos&quot;,
              &quot;employeeNumber&quot;: &quot;00158844&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-2751&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Schipp, Will &quot;,
              &quot;guid&quot;: &quot;800374601&quot;,
              &quot;kerberos&quot;: &quot;schipw&quot;,
              &quot;employeeNumber&quot;: &quot;00199236&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-0720&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Kondru, Jag &quot;,
              &quot;guid&quot;: &quot;800249782&quot;,
              &quot;kerberos&quot;: &quot;kondrj&quot;,
              &quot;employeeNumber&quot;: &quot;00142038&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-2860&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;External Digital&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12321&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Srivastava, Shubhra &quot;,
              &quot;guid&quot;: &quot;800364140&quot;,
              &quot;kerberos&quot;: &quot;srishub&quot;,
              &quot;employeeNumber&quot;: &quot;00196533&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(212)934-7177&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Verma, Nitesh &quot;,
              &quot;guid&quot;: &quot;800360902&quot;,
              &quot;kerberos&quot;: &quot;venite&quot;,
              &quot;employeeNumber&quot;: &quot;00195028&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(212)934-2197&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Somasundar, Soujanya S &quot;,
              &quot;guid&quot;: &quot;800328037&quot;,
              &quot;kerberos&quot;: &quot;somsou&quot;,
              &quot;employeeNumber&quot;: &quot;00176201&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)934-5948&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Vendor and Threat&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12322&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Boyapati, Amulya &quot;,
              &quot;guid&quot;: &quot;800358283&quot;,
              &quot;kerberos&quot;: &quot;boyapa&quot;,
              &quot;employeeNumber&quot;: &quot;00193693&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;phone&quot;: &quot;1(972)368-9107&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Panda, Siddharth &quot;,
              &quot;guid&quot;: &quot;800373726&quot;,
              &quot;kerberos&quot;: &quot;psiddh&quot;,
              &quot;employeeNumber&quot;: &quot;00199217&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(972)368-0688&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;B.R, Navaneeth &quot;,
              &quot;guid&quot;: &quot;800225384&quot;,
              &quot;kerberos&quot;: &quot;brnava&quot;,
              &quot;employeeNumber&quot;: &quot;00130261&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(972)368-2533&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Srinath, Chinmay &quot;,
              &quot;guid&quot;: &quot;800376088&quot;,
              &quot;kerberos&quot;: &quot;srinac&quot;,
              &quot;employeeNumber&quot;: &quot;00199590&quot;,
              &quot;title&quot;: &quot;Associate&quot;,
              &quot;location&quot;: &quot;Dallas&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Core Engineering&quot;,
          &quot;nodeType&quot;: &quot;Team&quot;,
          &quot;code&quot;: &quot;OC_TEA12323&quot;,
          &quot;team&quot;: [
            {
              &quot;name&quot;: &quot;Aragon, David &quot;,
              &quot;guid&quot;: &quot;800221336&quot;,
              &quot;kerberos&quot;: &quot;aragod&quot;,
              &quot;employeeNumber&quot;: &quot;00127342&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)855-9113&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Araile, Carla &quot;,
              &quot;guid&quot;: &quot;800228390&quot;,
              &quot;kerberos&quot;: &quot;arailc&quot;,
              &quot;employeeNumber&quot;: &quot;00131330&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)357-3973&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Dhungana, Adarsh &quot;,
              &quot;guid&quot;: &quot;800330597&quot;,
              &quot;kerberos&quot;: &quot;dhunad&quot;,
              &quot;employeeNumber&quot;: &quot;00177616&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)934-6016&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;LNU, Chetna &quot;,
              &quot;guid&quot;: &quot;800350720&quot;,
              &quot;kerberos&quot;: &quot;lnuche&quot;,
              &quot;employeeNumber&quot;: &quot;00188672&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(212)934-3215&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Vizcaino De La Garza, Sharon &quot;,
              &quot;guid&quot;: &quot;800308750&quot;,
              &quot;kerberos&quot;: &quot;vizcas&quot;,
              &quot;employeeNumber&quot;: &quot;00167253&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(917)343-7972&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Munjal, Anjali &quot;,
              &quot;guid&quot;: &quot;800358319&quot;,
              &quot;kerberos&quot;: &quot;munjaa&quot;,
              &quot;employeeNumber&quot;: &quot;00190500&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(646)446-6788&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Singh, Gursimran &quot;,
              &quot;guid&quot;: &quot;800356285&quot;,
              &quot;kerberos&quot;: &quot;sgursi&quot;,
              &quot;employeeNumber&quot;: &quot;00190492&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(646)446-9642&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Vellore, Deepak &quot;,
              &quot;guid&quot;: &quot;800202936&quot;,
              &quot;kerberos&quot;: &quot;vellde&quot;,
              &quot;employeeNumber&quot;: &quot;00117526&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(917)343-8049&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Smalley, Ellen &quot;,
              &quot;guid&quot;: &quot;800339435&quot;,
              &quot;kerberos&quot;: &quot;smalel&quot;,
              &quot;employeeNumber&quot;: &quot;00182625&quot;,
              &quot;title&quot;: &quot;Exempt&quot;,
              &quot;phone&quot;: &quot;1(917)343-2665&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Motiyani, Noopur &quot;,
              &quot;guid&quot;: &quot;800303954&quot;,
              &quot;kerberos&quot;: &quot;motiyn&quot;,
              &quot;employeeNumber&quot;: &quot;00162485&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)902-1347&quot;,
              &quot;location&quot;: &quot;New York&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Agarwal, Manish &quot;,
              &quot;guid&quot;: &quot;800375796&quot;,
              &quot;kerberos&quot;: &quot;agma&quot;,
              &quot;employeeNumber&quot;: &quot;00199666&quot;,
              &quot;title&quot;: &quot;Vice President&quot;,
              &quot;phone&quot;: &quot;1(212)934-1360&quot;,
              &quot;location&quot;: &quot;Bengaluru&quot;,
              &quot;department&quot;: &quot;T966&quot;
            },
            {
              &quot;name&quot;: &quot;Mazumder, Ankur &quot;,
              &quot;guid&quot;: &quot;800378898&quot;,
              &quot;kerberos&quot;: &quot;mazank&quot;,
              &quot;employeeNumber&quot;: &quot;00200436&quot;,
              &quot;title&quot;: &quot;Summer Employee&quot;,
              &quot;department&quot;: &quot;T966&quot;
            }
          ]
        }
      ]
    }
  ]
}</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><h3 id="RMScreatenewrecordwithPOST-AddPOSTmethodtoTeamController">Add POST method to TeamController</h3><p>First, we will need a method to create a new Team. Note that the method will be called from RmsNodeController and thus we factor it out from the @PostMapping call. This example might be a poor justification for separating out code into Controllers and Services.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
@PostMapping(&quot;/teams&quot;)
public ResponseEntity&lt;?&gt; createTeam()
{
    Team team = createTeamInternal();
    URI location = ServletUriComponentsBuilder
            .fromCurrentRequest()
            .path(&quot;/{id}&quot;)
            .buildAndExpand(team.getID()).toUri();
    return ResponseEntity.created(location).build();
}
//  Note internal visiblity
Team createTeamInternal()
{
    Team team = new Team();
    teamRepository.save(team);
    return team;
}
...</pre>
</div></div></td></tr></tbody></table></div><h3 id="RMScreatenewrecordwithPOST-ModifyPOSTmethodinEmployeeControllertobreakitintotwoseparatemethods">Modify POST method in EmployeeController to break it into two separate methods</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@PostMapping(&quot;/employees&quot;)
public ResponseEntity&lt;?&gt; createEmployee(@RequestBody EmployeePresentation employeePrese
{
    Employee employee = createEmployeeInternal(employeePresentation);
    URI location = ServletUriComponentsBuilder
            .fromCurrentRequest()
            .path(&quot;/{id}&quot;)
            .buildAndExpand(employee.getID()).toUri();
    return ResponseEntity.created(location).build();
}
//  note internal visibility
Employee createEmployeeInternal(EmployeePresentation employeePresentation)
{
    Optional&lt;Team&gt; teamOptional = teamRepository.findById(employeePresentation.getTeamI
    if(!teamOptional.isPresent())
    {
        throw new NotFoundException(&quot;team-&quot; + employeePresentation.getTeamId());
    }
    Team team = teamOptional.get();
    Employee employee = new Employee(employeePresentation);
    employee.setTeam(team);
    employeeRepository.save(employee);
    return employee;
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="RMScreatenewrecordwithPOST-AddPOSTmethodinRmsNodeController">Add POST method in RmsNodeController</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">private void saveRmsNodes(RmsNodeInput rmsNodeInput, RmsNode rmsNodeParent)
{
    rmsNodeParent.setName(rmsNodeInput.getName());
    rmsNodeParent.setNodeType(rmsNodeInput.getNodeType());
    rmsNodeParent.setCode(rmsNodeInput.getCode());
    List&lt;Employee&gt; employees = rmsNodeInput.getTeam();
    if(!employees.isEmpty())
    {
        Team team = teamController.createTeamInternal();
        for(Employee employee : employees)
        {
            employee.setTeam(team);
            employeeController.createEmployeeInternal(new EmployeePresentation(employee));
        }
        rmsNodeParent.setTeam(team);
    }
    for(RmsNodeInput childRmsNodeInput : rmsNodeInput.getChildren())
    {
        RmsNode rmsNodeChild = new RmsNode();
        saveRmsNodes(childRmsNodeInput, rmsNodeChild);
        rmsNodeMapRepository.save(new RmsNodePair(rmsNodeParent, rmsNodeChild));
    }
}


@PostMapping(&quot;/rmsnodes&quot;)
public ResponseEntity&lt;?&gt; createRmsNodes(@RequestBody RmsNodeInput rmsNodeInput)
{
    RmsNode rmsNode = new RmsNode();
    saveRmsNodes(rmsNodeInput, rmsNode);
    URI location = ServletUriComponentsBuilder
            .fromCurrentRequest()
            .path(&quot;/{id}&quot;)
            .buildAndExpand(rmsNode.getID()).toUri();
    return ResponseEntity.created(location).build();
}</pre>
</div></div></td></tr></tbody></table></div><p>Prior to testing this code, we need to modify the in-memory database since the data we will be injesting will use same codes as our in-memory database.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(1, &#39;0001&#39;, &#39;Measurement Engineering&#39;, &#39;Team&#39;, &#39;CODE_1&#39;, 1, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(2, &#39;0002&#39;, &#39;Security SWAT&#39;, &#39;Team&#39;, &#39;CODE_1&#39;, 2, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(3, &#39;0003&#39;, &#39;Core Engineering&#39;, &#39;Team&#39;, &#39;CODE_3&#39;, 3, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(4, &#39;0004&#39;, &#39;TR Platform Engineering&#39;, &#39;Group&#39;, &#39;CODE_4&#39;, null, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(5, &#39;0005&#39;, &#39;Risk Measurement and Strategy&#39;, &#39;Group&#39;, &#39;CODE_5&#39;, null, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
INSERT INTO RMS_NODE(ID, AUDIT_ID, NAME, NODE_TYPE, CODE, TEAM_ID, IN_UTC, OUT_UTC, created_by, last_modified_by) VALUES(6, &#39;0006&#39;, &#39;Tech Risk Engineering&#39;, &#39;Group&#39;, &#39;CODE_6&#39;, null, CURRENT_TIMESTAMP, &#39;9999-12-31&#39;, &#39;unknown&#39;, &#39;unknown&#39;)
...</pre>
</div></div></td></tr></tbody></table></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
