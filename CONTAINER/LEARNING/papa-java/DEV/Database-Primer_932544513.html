<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Database Primer</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Learn_522715137.html">Learn</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Database Primer
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span> on Nov 25, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="DatabasePrimer-EntityRelationships">Entity Relationships</h1><h2 id="DatabasePrimer-One-to-manyrelationship">One-to-many relationship</h2><p>We have a company which manages multiple software projects. We hire people and assign them to projects. Consequently, each project will have several people working on it. From this statement, it is easy to observe that project-to-workers constitute a <code>one-to-many</code> relationship, i.e. multiple people work on one project.</p><p>Note that in this relationship, we are assuming that one person may not work on more than one project.</p><p>If we had to represent a <code>one-to-many</code> relationship in the relational database, it would do it like this:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932642817.png" data-image-src="attachments/932544513/932642817.png" data-height="388" data-width="608" data-unresolved-comment-count="0" data-linked-resource-id="932642817" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180326.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="694dcd14-04bb-4d7f-95aa-a6120fc5a6d4" data-media-type="file"></span><p>Notes:</p><ol><li><p>We only included a minimum set of fields to demonstrate the point of the current topic.</p></li></ol><p>Let us analyze this design.</p><p>Each table <strong>must</strong> have a unique primary key. In both EMPLOYEE table and PROJECT tables, this field is named &quot;ID&quot;. There are times when the primary key is made up of multiple keys, referred to as &quot;composite key&quot;, however, we will not consider this case here.</p><p>For the EMPLOYEE table, we could have designated the SSN as the primary key since we know that the Social Security number would be unique. This would not be a great idea for at least two reasons:</p><ol><li><p>We may hire some foreign workers who do not have a Social Security number and whatever unique ID they may have, will likely not conform to the SSN format - &quot;xxx-xx-xxxx&quot;.</p></li><li><p>If we chose SSN to be the primary key, its datatype  would be STRING. Primary keys are used for joining data from multiple tables. Joining on a field whose type is INTEGER is a lot faster than if its type were STRING.</p></li></ol><p>All databases have a SEQUENCE GENERATOR. We can designate the primary key as a SEQUENCE GENERATED key and the database will created it for us. Thus, when we try to insert our first employee into the PEOPLE table, it's ID will be 1.</p><p>From EMPLOYEE and PROJECT tables above we can see that both have a primary key named &quot;ID&quot;.</p><p>To express the <code>one-to-many</code> relationship, the EMPLOYEE table also has a key named &quot;PROJECT_ID&quot;. The PROJECT_ID is a <code>foreign</code> key. A <code>foreign</code> key is the primary key of another table, in this case table PROJECT.</p><p>From the demonstration above, we can see that people whose IDs are 1 &amp; 2 work for project ID=1, people with IDs 3, 4, and 5 work for project ID=2, etc.</p><p>The <code>one-to-many</code> (or <code>many-to-one</code>) relationships are incredibly common. </p><p>Consider another situation where we want to store information about each employee. In addition to the obvious fields such as &quot;First Name&quot;, &quot;Last Name&quot;, &quot;SSN&quot;, each employee also has a phone number, email address, and residence address. However, many employees will have more than one phone number, email address, and may have multiple residences. The only logical way to represent this would be with a <code>one-to-many</code> relationship:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932610051.png" data-image-src="attachments/932544513/932610051.png" data-height="252" data-width="889" data-unresolved-comment-count="0" data-linked-resource-id="932610051" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180420.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="cb477dd9-dbf3-4e51-9a09-d5ec94218037" data-media-type="file"></span><h2 id="DatabasePrimer-One-to-onerelationship">One-to-one relationship</h2><p><code>One-to-on</code>e relationships are less common than <code>many-to-one</code> but they are still used very extensively. Lets go back to the task of storing data for each employee. In addition to storing employee's name, phone-numbers, etc., we also want to store employee's salary, start and end date (end data would be set to null for current employees), and other sensitive information. SSN field may also be considered sensitive data. While many applications will need access to employee's general information, such as name, department number, title, etc., only HR applications that are entrusted to few employees should have access to sensitive data, such as employee's salary. </p><p>Each database table can have associated privileges indicating who can see and modify data. Thus, we can create other tables for storing employee's sensitive data and assign privileges to this table to select few.</p><p>The <code>one-to-one</code> relationships are represented the same as the<code> many-to-many</code> relationships, that is with a <code>foreign</code> key.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932806657.png" data-image-src="attachments/932544513/932806657.png" data-height="217" data-width="629" data-unresolved-comment-count="0" data-linked-resource-id="932806657" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180454.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="a73a2c1f-fd46-4dfa-8bfc-363b849e649d" data-media-type="file"></span><p>Note:</p><ol><li><p>EMPLOYEE_ID in EMPLOYEE_HR table is the foreign key. It contains values from <a href="http://EMPLOYEE.ID" class="external-link" rel="nofollow">EMPLOYEE.ID</a> field.</p></li><li><p>Unlike the primary key, a foreign need need not (and usually will not) be unique and it may be null.</p></li><li><p>In the case of a <code>one-to-one</code> relationship, we could have placed the &quot;foreign&quot; key in either table.</p></li></ol><p>For example, our design could look like this, where we place the foreign key - EMPLOYEE_HR_ID in the EMPLOYEE table.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932577286.png" data-image-src="attachments/932544513/932577286.png" data-height="217" data-width="616" data-unresolved-comment-count="0" data-linked-resource-id="932577286" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180521.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="c6755857-8da6-40ad-8eff-89399d9f6897" data-media-type="file"></span><p>However, since most people in the organization will be privy to data in the EMPLOYEE table, and only people who work in HR will be able to see the EMPLOYEE_HR table, it is better to place the foreign key into the EMPLOYEE_HR table so that those who examine contents of the EMPLOYEE table would not even know that EMPLOYEE_HR table exists.</p><p>There are other reasons to create <code>one-to-one</code> relationships.</p><p>Let's say we also want to store a single hobby for our employees. The description of a hobby may contain many fields. Most employees are very boring and do not have any hobbies. If we added Hobby fields to the EMPLOYEE table, most records would contain &quot;holes&quot;, i.e. empty values. Thus, we can make a decision to define a HOBBY table and link it to EMPLOYEE with a <code>one-to-one</code> relationship.</p><h2 id="DatabasePrimer-Many-to-manyrelationship">Many-to-many relationship</h2><p>Next, we expand our original definition by allowing one person to work on many projects. For example, some person may dedicate 60% of his time working on project #1 and 40% working on project #2. Any one person may work on more than two projects. Following this rule, we progress from a <code>one-to-many</code> relationship to a <code>many-to-many</code> relationship. In this <code>many-to-many</code> relationship, we have many people working on one project and each person may work on many projects. To support the many-to-many relationship, we need to introduce a new &quot;MAPPING&quot; table.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932577292.png" data-image-src="attachments/932544513/932577292.png" data-height="300" data-width="847" data-unresolved-comment-count="0" data-linked-resource-id="932577292" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180600.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="b1e73f04-aab8-4a93-ae26-468a66c23484" data-media-type="file"></span><p>Note that table PROJECT_WORKER_MAP, maps Projects to Employees (Workers). For example,</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932642824.png" data-image-src="attachments/932544513/932642824.png" data-height="387" data-width="687" data-unresolved-comment-count="0" data-linked-resource-id="932642824" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180629.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="b22ca8fd-2902-43f7-a4ab-fb0630448ad2" data-media-type="file"></span><p>From the PROJECT_EMPLOYEE_MAP table we can see that employees with IDs 1 and 2 work on project 1, employee with IDs 2, 4, and 5 work on project 2, employees with IDs 1, 7, and 8 work on project 3, etc. We can also observe that employee with ID 2 works on projects 1 and 2, employee with ID 1 works on projects 1 and 3.</p><p>With <code>many-to-many</code> relationships, it is quite possible to have some employees who do not work on any projects, let's say that an active employee goes on a sabbatical and will not be involved on any project. It is also possible to have a project that does not have any employees, for example, an upstart project that is still in the research phase. In cases where employees are not assigned to any projects or project do not have any employees, the PROJECT_EMPLOYEE_MAP table will not have a row for associating employee to a project.</p><p>Note that in the example above, no employee is assigned to project ID=5 and Employee ID=9 does not work on any projects.</p><h1 id="DatabasePrimer-DatabaseCommands-DDLandDML">Database Commands - DDL and DML</h1><p>All databases support two types of commands: DDL that stands for Data Definition Language and DML that stands for Data Manipulation Language.</p><h2 id="DatabasePrimer-DDLCommands">DDL Commands</h2><p>The list of DDL commands is exhaustive. You use DDL commands to created and alter tables and indexes, drop (i.e. delete) tables, manage privileges, and much-much more.</p><h3 id="DatabasePrimer-CreateTable">Create Table</h3><p>Before we can execute any database commands we need to create required tables and populate them with data. Let us examine the CREATE TABLE command:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">create table worker (
     id integer not null,
     created_by varchar(255),
     in_utc timestamp not null,
     last_modified_by varchar(255),
     out_utc timestamp,
     audit_id varchar(255),
     compensation double not null,
     worker_code varchar(255),
     worker_name varchar(255),
     primary key (id)
);</pre>
</div></div></td></tr></tbody></table></div><p>The WORKER table in our real project has following fields:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932839427.png" data-image-src="attachments/932544513/932839427.png" data-height="122" data-width="987" data-unresolved-comment-count="0" data-linked-resource-id="932839427" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180709.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="2082af5a-35e4-40b4-ace7-1006432f1173" data-media-type="file"></span><p>Each field is listed along with its datatype. For STRING fields (i.e. varchar) we also need to specify maximum length.</p><p>Some fields may require a value, i.e. may not contain nulls. For example, <code>&quot;compensation double not null&quot;</code></p><p>One or more fields must be designated as primary. (<code>primary key (id)</code>). A Primary key in unique and non-nullable by definition.</p><h3 id="DatabasePrimer-IndicesandUniqueIndices">Indices and Unique Indices</h3><p>Databases support many types of indices and we can't cover this topic exhaustively. Let's first discuss an index in a general sense.</p><p>Suppose we have an ORDERS table with 1,000,000 rows. We may want to perform certain types of operations on the ORDERS table very frequently. For example, find order where SELLER_NAME is &quot;One First&quot;. With 1M rows, we would have to check 1M records in the worst case (order O(n)).</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">SELECT *
FROM ORDERS
WHERE SELLER_NAME = &#39;One First&#39;</pre>
</div></div></td></tr></tbody></table></div><p>However, if we create an index for field SELLER_NAME, we would be able to locate this record in almost constant time (O(1)).</p><p>The DDL command to create an index may look like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">CREATE INDEX INDEX_SELLER_NAME
ON ORDERS(SELLER_NAME)</pre>
</div></div></td></tr></tbody></table></div><p>One of the common interview questions goes something like this:</p><p>&quot;You work on your application and test it continuously in your dev (development) environment. Everything works great so you decide to deploy it to the production environment. However, in production, your application's performance becomes very sluggish. Why is that?&quot;</p><p>Your answer may be as follows:</p><p>&quot;It is quite possible that the dev database has been property tuned with required indices and it is therefore performant. However, production environments uses a different database and it is possible that it does not have all the required indices&quot;.</p><p>In addition to a simple index, databases support a notion of a <code>unique index</code>.</p><p>Let's say that we want our database to enforce business rules and one of our business rules is that the combination of values in <code>audit_id</code> and <code>out_utc</code> fields must be unique. Thus, it would be an error if two records had same values in both <code>audit_id</code> and <code>out_utc</code> fields. The DDL command for a unique index would look like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">create unique index UKbe6uin1lttt8dh3oddmrb6g6d on worker (audit_id, out_utc);</pre>
</div></div></td></tr></tbody></table></div><p>The name of the index (&quot;<code>UKbe6uin1lttt8dh3oddmrb6g6d</code>&quot; in the example above) was randomly generated and the name itself is not important. The only thing that is important is to identify a set  of fields that must be unique.</p><h3 id="DatabasePrimer-Constraints">Constraints</h3><p>Let's go back to our <code>many-to-many</code> illustration and consider what would happen if someone decided to delete an employee with ID=1</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">delete from employee where id = 1</pre>
</div></div></td></tr></tbody></table></div><p>We would be left with records in table PROJECT_EMPLOYEE_MAP that would not make sense. (See records with ID 1 and 6 where the EMPLOYEE_ID is 1 which was deleted)</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932839433.png" data-image-src="attachments/932544513/932839433.png" data-height="398" data-width="708" data-unresolved-comment-count="0" data-linked-resource-id="932839433" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-180812.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="5f86647e-67e0-4ebe-9ddd-aec17527f5eb" data-media-type="file"></span><p>We can still delete employee with ID=1, however, we first need to delete records from the PROJECT_EMPLOYEE_MAP table that associate employee ID=1 with projects. This constraint can be enforced with command:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">alter table project_worker_map add constraint FK6baomleyjvq2jkfy8n5tscn0l foreign key (worker_id) references worker;</pre>
</div></div></td></tr></tbody></table></div><p>There are too many DDL commands and it is not important to know them all, only to know that they exist and can be easily discovered. Most of the common DDL commands affect tables and indices, such as:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">create table ...
alter table ...
drop table ...
create index ...
create unique index ...
drop index ...</pre>
</div></div></td></tr></tbody></table></div><h3 id="DatabasePrimer-Privileges">Privileges</h3><p>We had mentioned earlier the need for a one-to-one relationship. In that example, we decided to store sensitive employee information inside EMPLOYEE_HR table, accessible to HR staff only. For people working in HR who do need this access, we can assign them to a user (or group) with a special name, i.e. USER_HR. Then, we can execute the following command:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">GRANT ALL ON TABLE EMPLOYEE_HR TO USER USER_HR</pre>
</div></div></td></tr></tbody></table></div><p>One may think that knowing the syntax of this command might allow you to peek at other employee's salary. However, only database admins, or other users with special privileges, would be able to execute the GRANT command.</p><h2 id="DatabasePrimer-DMLCommands">DML Commands</h2><p>The good news about Data manipulation commands (DML) is that they comprise only four commands: INSERT, UPDATE, DELETE, and SELECT. In the industry, these are often referred to as CRUD commands for Create, Read, Update, Delete.</p><p>The bad news is that some of these commands, particularly SELECT could get very complex. In this document we will only cover the basics.</p><h3 id="DatabasePrimer-INSERTCommand">INSERT Command</h3><p>Most of the INSERT commands are very simple.</p><p>For example:</p><div class="table-wrap"><table data-layout="full-width" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">INSERT INTO WORKER(ID, AUDIT_ID, IN_UTC, OUT_UTC, WORKER_CODE, WORKER_NAME, COMPENSATION, CREATED_BY, LAST_MODIFIED_BY)
VALUES(1, &#39;00000000-0000-0000-0000-000000000001&#39;, CURRENT_TIMESTAMP - CURRENT_TIMEZONE, &#39;9999-12-31&#39;, &#39;CODE-1&#39;, &#39;One First&#39;, 120000.00, &#39;unknown&#39;, &#39;unknown&#39;);</pre>
</div></div></td></tr></tbody></table></div><p>This example could also be written like this:</p><div class="table-wrap"><table data-layout="full-width" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">INSERT INTO WORKER VALUES(1, &#39;00000000-0000-0000-0000-000000000001&#39;, CURRENT_TIMESTAMP - CURRENT_TIMEZONE, &#39;9999-12-31&#39;, &#39;CODE-1&#39;, &#39;One First&#39;, 120000.00, &#39;unknown&#39;, &#39;unknown&#39;);</pre>
</div></div></td></tr></tbody></table></div><p>The reason why the above syntax would work is because we are populating every single field in the WORKER table. If we only wanted to populate some of the fields, we would need to list them, as in:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">INSERT INTO WORKER(ID, AUDIT_ID, WORKER_CODE, WORKER_NAME, COMPENSATION)
VALUES(1, &#39;00000000-0000-0000-0000-000000000001&#39;, &#39;CODE-1&#39;, &#39;One First&#39;, 120000.00);</pre>
</div></div></td></tr></tbody></table></div><p>Note that if you don't specify a field inside the INSERT statement, that field must be nullable.</p><h3 id="DatabasePrimer-UPDATECommand">UPDATE Command</h3><p>To change values in an existing record we can do this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">update worker
set compensation = 200000,
worker_code = &#39;CODE-X&#39;
where id = 3</pre>
</div></div></td></tr></tbody></table></div><p>Naturally, this syntax could get a lot more complex and we will return to this command later.</p><h3 id="DatabasePrimer-DELETECommand">DELETE Command</h3><p>The simplest delete command looks like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td data-highlight-colour="initial" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">delete from worker</pre>
</div></div></td></tr></tbody></table></div><p>This command will delete all records from table WORKER. </p><p>One of the common interview questions it to ask about the difference of this <code>delete</code> command and the <code>drop table</code> command:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>DELETE</p></th><th class="confluenceTh"><p>DROP</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">delete from worker</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">drop table worker</pre>
</div></div></td></tr></tbody></table></div><p>When you use the <code>delete</code> command, the table still exists but contains no records. When you <code>drop</code> the table, the table is destroyed and you would need to create it again if you decide to add records to it.</p><p>More often than not, we will add a condition to the delete command, for example:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 648.0px;"/><col style="width: 312.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Command</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">delete from worker where compensation &lt; 100000</pre>
</div></div></td><td class="confluenceTd"><p>Delete workers who make less than 100,000</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">delete from worker where worker_code in (&#39;CODE-1&#39;, &#39;CODE-2&#39;)</pre>
</div></div></td><td class="confluenceTd"><p>Delete workers with WORKER_CODE CODE-1 and CODE-2</p></td></tr></tbody></table></div><h3 id="DatabasePrimer-SELECTCommand">SELECT Command</h3><p>This is where all the fun is. Many books and PhD decertations are dedicated to this topic. Let us start simple:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932872195.png" data-image-src="attachments/932544513/932872195.png" data-height="516" data-width="800" data-unresolved-comment-count="0" data-linked-resource-id="932872195" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-181044.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="108c3c66-d552-4c6e-8183-6633cd0883ce" data-media-type="file"></span><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932839439.png" data-image-src="attachments/932544513/932839439.png" data-height="307" data-width="801" data-unresolved-comment-count="0" data-linked-resource-id="932839439" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-181101.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="10318896-2b5d-48db-b0ff-25998ae1ae23" data-media-type="file"></span><p>Note:</p><ol><li><p>To select all fields use &quot;<code>select * ...</code>&quot;</p></li><li><p>We use &quot;<code>where</code>&quot; to filter records to be displayed. Multiple expressions may be strung together with <code>and, or, in,</code> and other operators.</p></li><li><p>Note the usage of  <code>like</code> operator</p></li><li><p>Aliases are often used with SELECT commands.</p></li></ol><h4 id="DatabasePrimer-GROUPBYandHAVINGClauses">GROUP BY and HAVING Clauses</h4><p>Another powerful feature of SELECT is to aggregate records via GROUP BY. Let's start with example. We would like to find out how many people work on each project. We use the PROJECT_WORKER_MAP table to map workers to projects:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Response</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select project_id, count(worker_id) as WorkerCount
from project_worker_map
group by project_id</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_ID   WORKERCOUNT 
--------------------------
1            2           
2            2           
3            4</pre>
</div></div></td></tr></tbody></table></div><p>Suppose we are interested in seeing only those projects where the worker count is greater than 2</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Response</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select project_id, count(worker_id) as Worker_Count
from project_worker_map
group by project_id
having count(worker_id) &gt; 2</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_ID   WORKER_COUNT 
---------------------------
3            4</pre>
</div></div></td></tr></tbody></table></div><p>Note:</p><p><code>having</code> to <code>group by</code> is what <code>where</code> is to <code>select</code></p><p>Above command is incredibly useful and you should store it somewhere in your memory bank. Often you run a process which will populate rows in some table. It may be an error to have records with a duplicate value in some field. Thus, you would execute the following query to check:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select some_field
from some_table
group by some_field
having count(some_field) &gt; 1</pre>
</div></div></td></tr></tbody></table></div><h3 id="DatabasePrimer-JoiningTables">Joining Tables</h3><p>Let us take a leap into something more interesting. We would like to determine the total compensations for each project. The compensation is specified in the WORKER table, so we need to join WORKER and PROJECT_WORKER_MAP tables.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Result</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select p.project_id, sum(w.compensation) as TotalComp
from worker w, project_worker_map p
where  = p.worker_id
group by project_id</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_ID   TOTALCOMP
----------------------
1            310000.0
2            425000.0
3            735000.0</pre>
</div></div></td></tr></tbody></table></div><p>Let us observe several things from above command:</p><p>In group by selects, fields that are listed on the select clause must match fields that appear in the group by clause. However, the select clause may also specify aggregate operations such as SUM, AVG, and others.</p><p>As a slight variation to above, let's say we only want to see projects whose total compensation is greater than 500,000.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Result</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select p.project_id, sum(w.compensation) as TotalComp
from worker w, project_worker_map p
where  = p.worker_id
group by project_id
having sum(w.compensation) &gt; 500000</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_ID   TOTALCOMP
----------------------
3            735000.0</pre>
</div></div></td></tr></tbody></table></div><p>Notes:</p><p>In the previous query, I used alias w for worker and p for project_worker_map. If I had not used aliases, I would need to type the full name of the table, as in:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 680.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select project_worker_map.project_id, sum(worker.compensation)
from worker, project_worker_map
where worker = project_worker_map.worker_id
group by project_id
having sum(worker.compensation) &gt; 500000</pre>
</div></div></td></tr></tbody></table></div><h4 id="DatabasePrimer-MinandMax">Min and Max</h4><p>These examples will be provided without explanations:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 340.0px;"/><col style="width: 340.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Response</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select max(compensation) as Max
from worker</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">MAX    
--------
240000.0</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select min(compensation) as Min
from worker</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">MIN   
-------
40000.0</pre>
</div></div></td></tr></tbody></table></div><h4 id="DatabasePrimer-Subqueries">Subqueries</h4><p>Suppose we only have information on WORKER_CODE, i.e. 'CODE-1' and 'CODE-2' and we would like to find out what projects they are working on. To join table WORKER to table WORKER_PROJECT_MAP we need to have <a href="http://WORKER.ID" class="external-link" rel="nofollow">WORKER.ID</a> and WORKER_PROJECT_MAP.WORKER_ID. However, we do not know values for <a href="http://WORKER.ID" class="external-link" rel="nofollow">WORKER.ID</a>, we only know WORKER_CODE.</p><p>Before we accomplish our final task, let's perform some intermediate steps, like joining three tables: PROJECT, WORKER, and PROJECT_WORKER_MAP.</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932642837.png" data-image-src="attachments/932544513/932642837.png" data-height="569" data-width="657" data-unresolved-comment-count="0" data-linked-resource-id="932642837" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-181300.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="9f7840b5-5322-4116-b71f-6148f63da02f" data-media-type="file"></span><p>Note:</p><p>Second command uses <code>order by</code> clause to sort results by <code>worker_name</code> field.</p><p>However, for our current task, we don't have IDs of workers, we have <code>worker_code</code>. Thus, we need to use the worker_code to get to the <a href="http://WORKER.ID" class="external-link" rel="nofollow">WORKER.ID</a>.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 644.0px;"/><col style="width: 316.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Result</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select p.project_name, w.worker_name
from project p, worker w, project_worker_map m
where m.project_id = p.id
and m.worker_id = w.id
and m.worker_id in (
    select id from worker where worker_code in(&#39;CODE-1&#39;, &#39;CODE-2&#39;)
    )</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_NAME  WORKER_NAME
-------------------------
P-1           One First 
P-2           Two Second
P-3           One First 
P-3           Two Second</pre>
</div></div></td></tr></tbody></table></div><p>Note:</p><p>We need to join three tables and define the filtering criteria</p><p>We can combine this result with GROUP BY clause to determine the total compensation for these projects:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 602.0px;"/><col style="width: 356.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Result</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select p.project_name, sum(w.compensation) as TotalComp
from project p, worker w, project_worker_map m
where m.project_id = p.id
and m.worker_id = w.id
and m.worker_id in (
    select id from worker where worker_code in(&#39;CODE-1&#39;, &#39;CODE-2&#39;)
    )
group by p.project_name</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PROJECT_NAME  TOTALCOMP
-----------------------
P-1           120000.0
P-2           240000.0
P-3           360000.0</pre>
</div></div></td></tr></tbody></table></div><h1 id="DatabasePrimer-NextSteps">Next Steps</h1><p>The information presented so far does not even scratch the surface. There are things that you need to be aware of even though they are not demonstrated in this document.</p><h2 id="DatabasePrimer-SQLStandards">SQL Standards</h2><p>Like everything else, SQL went through a lot of iterations over many years. The SQL presented here follows the original SQL-86 format. I believe the latest is called SQL:2003. The syntax for SELECT commands has changed, however, the original syntax is still supported. Some operations differ by database providers. For example, to perform a left outer join (discussed shortly), you will need to adhere to the format of the database provider such as Oracle, Sybase, Postgres, DB2, etc.</p><p>The main point is to understand what capabilities are possible. It is easy to find the syntax for a specific command on the internet.</p><h2 id="DatabasePrimer-LEFTandRIGHTOUTERJOINS">LEFT and RIGHT OUTER JOINS</h2><p>So far, the examples provided here used a standard, or &quot;INNER&quot; join. For example, we can join multiple tables using INNER join to see all projects and people who are assigned to them. Some projects may not have any people assigned. Suppose we want to see all projects. If people are assigned to them, we will see person name in the WORKER column. If a project has no workers assigned, that project will not appear in the response. Often, we want to see projects and workers assigned to them and also projects that have no workers. This is the job for a LEFT OUTER join. If no one is assigned  to some project, the project will still appear but the value in the WORKER column will be null. RIGHT OUTER join is similar to LEFT OUTER join but works in the right-to-left order.</p><h2 id="DatabasePrimer-SELFJOIN">SELF JOIN</h2><p>Here is one of the most common problems for a SELF JOIN. Let's say we have a table of employees, along with their salaries and ID of the manager. Let's say our fictitious table looks like this:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" loading="lazy" src="attachments/932544513/932872205.png" data-image-src="attachments/932544513/932872205.png" data-height="288" data-width="381" data-unresolved-comment-count="0" data-linked-resource-id="932872205" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-20201125-181453.png" data-base-url="https://nickguner.atlassian.net/wiki" data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513" data-linked-resource-container-version="1" data-media-id="46f6ac14-5898-4d08-a39d-a8fa7e2d732e" data-media-type="file"></span><p /><p>We need to answer following question: &quot;Provide a list on employees who make more money than their manager.&quot; From table's data we can observe that Employee IDs 1, 2 3, 4 all report to employee whose ID is 5. Only employee ID=4 makes more money than his manager.</p><p>This question comes up so often at interviews that I owe you a demonstration.</p><p>Let's create a new table with data as shown above:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 158.0px;"/><col style="width: 802.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Create Table</p></th><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">create table workerX (id integer not null, name varchar(255), compensation double not null, manager_id integer not null)</pre>
</div></div></td></tr><tr><th class="confluenceTh"><p>Populate</p></th><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">insert into workerX (id, name, compensation, manager_id) values (1, &#39;One First&#39;, 50000, 5)
insert into workerX (id, name, compensation, manager_id) values (2, &#39;Two Second&#39;, 70000, 5)
insert into workerX (id, name, compensation, manager_id) values (3, &#39;Three Third&#39;, 90000, 5)
insert into workerX (id, name, compensation, manager_id) values (4, &#39;Four Fourth&#39;, 180000, 5)
insert into workerX (id, name, compensation, manager_id) values (5, &#39;Five Fifth&#39;, 160000, 9)</pre>
</div></div></td></tr></tbody></table></div><p>Now we can execute a query to find all employees who make more money than their managers:</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 540.0px;"/><col style="width: 418.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p>Query</p></th><th class="confluenceTh"><p>Result</p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">select employee.*
from workerX employee, workerX manager
where employee.manager_id = 
and employee.compensation &gt; manager.compensation</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">ID NAME         COMPENSATION  MANAGER_ID
----------------------------------------
4  Four Fourth  180000.0      5</pre>
</div></div></td></tr></tbody></table></div><p>Note how use of aliases, employee and manager, were absolutely essential for a SELF JOIN query.</p><h2 id="DatabasePrimer-UNIONS">UNIONS</h2><p>There may be times when we would like to combine results from multiple tables. Our SELECT clause identifies fields and they datatype. As long as the fields in the SELECT clause match, data from multiple tables may be combined with a UNION command.</p><h2 id="DatabasePrimer-StoredProcedures,Triggers,andTemporaryTables">Stored Procedures, Triggers, and Temporary Tables</h2><p>SELECT command is extremely powerful and provides many clauses to wield incredible power. In addition to standard features of the SQL, each database provide furnishes a library of functions to works with strings, dates, and just about anything else. However, sometimes all this power is still not enough. There may be times when it would be useful to create intermediate results and stored them in the <code>temp</code> table. Next, subsequent commands can me used in combination with data in the temp table to produce more elaborate answers.</p><p>For anything that can't be done with SQL, there are stored procedures. Each database provider has its own programming language to interact with databases. A program written in this language is called the stored procedure. Some companies build their entire applications with stored procedures. In my view, this is a terrible idea but it may be justified for certain types of projects. One of the problems if stored procedures is that they can't be debugged. You may need tp place results of some intermediate computation into a table for debugging purposes.</p><p>It is also important to realize that a stored procedure is often composed to several SQL statements without resorting to any other programming aspects. To support transactions, you will need to place your SQL commands inside the stored procedure.</p><p>A Trigger is a stored procedure. It is triggered when a certain action occurs, such as inserting a new row or updating it. Some time ago, triggers where relied on very heavily, however, over the years they usefulness has diminished.</p><h2 id="DatabasePrimer-TransactionsandRollBacks">Transactions and RollBacks</h2><p>Let's say we have a site for taking customer orders. When the order is placed we need to update ORDERS table, INVENTORY table, and possible CUSTOMERS table to keep track of all the money they had spent on our crap.</p><p>Say we update the ORDERS table first and then try to update the INVERTORY table, but that update fails. Now we have a system in an inconsistent state. To prevent this inconsistent state we need to ROLL-BACK our transaction. Thus, either all commands complete successfully or none at all.</p><p>Failure to update the INVERNTORY table may happen for many diffident reasons, for example, the table may run out of storage space that was allocated for it.</p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932642817.png">image-20201125-180326.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932610051.png">image-20201125-180420.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932806657.png">image-20201125-180454.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932577286.png">image-20201125-180521.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932577292.png">image-20201125-180600.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932642824.png">image-20201125-180629.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932839427.png">image-20201125-180709.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932839433.png">image-20201125-180812.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932872195.png">image-20201125-181044.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932839439.png">image-20201125-181101.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932642837.png">image-20201125-181300.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/932544513/932872205.png">image-20201125-181453.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:35</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
