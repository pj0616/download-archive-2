<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : JavaScript Definitive Guide</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Learn_522715137.html">Learn</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : JavaScript Definitive Guide
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span>, last modified on Aug 09, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="JavaScriptDefinitiveGuide-Types,Values,andVariables">Types, Values, and Variables</h1><h1 id="JavaScriptDefinitiveGuide-Links">Links</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 115.0px;"/><col style="width: 643.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Resource</strong></p></th><th class="confluenceTh"><p><strong>URL</strong></p></th></tr><tr><td class="confluenceTd"><p>MDN</p></td><td class="confluenceTd"><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="external-link" rel="nofollow">https://developer.mozilla.org/en-US/docs/Web/JavaScript</a></p></td></tr><tr><td class="confluenceTd"><p>Run Snippets</p></td><td class="confluenceTd"><p><a href="https://developers.google.com/web/tools/chrome-devtools/javascript/snippets" class="external-link" rel="nofollow">https://developers.google.com/web/tools/chrome-devtools/javascript/snippets</a></p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ExplicitConversions">Explicit Conversions</h2><p>The simplest way to perform an explicit type conversion is to use the <code>Boolean(), Number()</code>, and <code>String()</code> functions.</p><p>Any value other than <code>null </code>or <code>undefined </code>has a<code> toString()</code> method.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 163.0px;"/><col style="width: 592.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>n.toString(2);</code></p></td><td class="confluenceTd"><p>binary</p></td></tr><tr><td class="confluenceTd"><p><code>n.toString(8);</code></p></td><td class="confluenceTd"><p>octal</p></td></tr><tr><td class="confluenceTd"><p><code>n.toString(16);</code></p></td><td class="confluenceTd"><p>hex</p></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 242.0px;"/><col style="width: 516.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let n = 123456.789;</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>n.toFixed(0)</code></p></td><td class="confluenceTd"><p>&quot;123457&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>n.toFixed(5)</code></p></td><td class="confluenceTd"><p>&quot;123456.78900&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>n.toExponential(3)</code></p></td><td class="confluenceTd"><p>&quot;1.235e+5&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>n.toPrecision(7)</code></p></td><td class="confluenceTd"><p>&quot;123456.8&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>n.toPrecision(10)</code></p></td><td class="confluenceTd"><p>&quot;123456.7890&quot;</p></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 273.0px;"/><col style="width: 485.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>parseInt(&quot;3 blind mice&quot;)</code></p></td><td class="confluenceTd"><p>3</p></td></tr><tr><td class="confluenceTd"><p><code>parseFloat(&quot; 3.14 meters&quot;)</code></p></td><td class="confluenceTd"><p>3.14</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;-12.34&quot;)</code></p></td><td class="confluenceTd"><p>-12</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;0xFF&quot;)</code></p></td><td class="confluenceTd"><p>255</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;0xff&quot;)</code></p></td><td class="confluenceTd"><p>255</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;-0XFF&quot;)</code></p></td><td class="confluenceTd"><p>-255</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;0.1&quot;)</code></p></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;.1&quot;)</code></p></td><td class="confluenceTd"><p>NaN: integers can't start with &quot;.&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>parseFloat(&quot;$72.47&quot;)</code></p></td><td class="confluenceTd"><p>NaN: numbers can't start with &quot;$&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><u>Supply Radix</u></p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;11&quot;, 2)</code></p></td><td class="confluenceTd"><p>3</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;ff&quot;, 16)</code></p></td><td class="confluenceTd"><p>255</p></td></tr><tr><td class="confluenceTd"><p><code>parseInt(&quot;077&quot;, 8)</code></p></td><td class="confluenceTd"><p>63</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ConversionIdioms">Conversion Idioms</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 163.0px;"/><col style="width: 595.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>x + &quot;&quot;</code></p></td><td class="confluenceTd"><p><code>String(x)</code></p></td></tr><tr><td class="confluenceTd"><p><code>+x</code></p></td><td class="confluenceTd"><p><code>Number(x)</code></p></td></tr><tr><td class="confluenceTd"><p><code>x-0</code></p></td><td class="confluenceTd"><p><code>Number(x)</code></p></td></tr><tr><td class="confluenceTd"><p><code>!!x</code></p></td><td class="confluenceTd"><p><code>Boolean(x)</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-DestructuringAssignment">Destructuring Assignment</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 228.0px;"/><col style="width: 530.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let [x,y] = [1,2];</code></p></td><td class="confluenceTd"><p>let x=1, y=2</p></td></tr><tr><td class="confluenceTd"><p><code>[x,y] = [x + 1,y + 1];</code></p></td><td class="confluenceTd"><p>x = x + 1, y = y + 1</p></td></tr><tr><td class="confluenceTd"><p><code>[x,y] = [y,x];</code></p></td><td class="confluenceTd"><p>Swap the value of the two variables</p></td></tr></tbody></table></div><p>Destructuring assignment makes it easy to work with functions that return arrays of values:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 282.0px;"/><col style="width: 476.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let [r,theta] = toPolar(1.0, 1.0);</code></p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function toPolar(x, y) {
  return [Math.sqrt(x*x+y*y), Math.atan2(y,x)];
}</pre>
</div></div></td></tr></tbody></table></div><p>Variable destructuring in loops:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let o = { x: 1, y: 2 };</code></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(const [name, value] of Object.entries(o)) {
  console.log(name, value); // Prints &quot;x 1&quot; and &quot;y 2&quot;
}</pre>
</div></div></td></tr></tbody></table></div><p><strong>Note</strong>: The <code>Object.entries()</code> method returns an array of a given object's own enumerable string-keyed property <code>[key, value]</code> pairs, in the same order as that provided by a <code>for...in</code> loop. (The only important difference is that a <code>for...in</code> loop enumerates properties in the prototype chain as well).</p><p>The list of variables on the left can include extra commas to skip certain values on the right</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 197.0px;"/><col style="width: 561.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>[,x,,y] = [1,2,3,4];</code></p></td><td class="confluenceTd"><p>x == 2; y == 4</p></td></tr></tbody></table></div><p><strong>Note</strong>: the last comma does not stand for a value.</p><p>To collect all unused or remaining values into a single variable when destructuring an array, use three dots <code>(...) </code>before the last variable name on the left-hand side</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 280.0px;"/><col style="width: 478.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let [x, ...y] = [1,2,3,4];</code></p></td><td class="confluenceTd"><p>y == [2,3,4]</p></td></tr><tr><td class="confluenceTd"><p><code>let [first, ...rest] = &quot;Hello&quot;;</code></p></td><td class="confluenceTd"><p>first == &quot;H&quot;; rest ==[&quot;e&quot;,&quot;l&quot;,&quot;l&quot;,&quot;o&quot;]</p></td></tr></tbody></table></div><p>Destructuring assignment can also be performed when the righthand side is an object value.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 273.0px;"/><col style="width: 487.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let transparent = {r: 0.0, g: 0.0, b: 0.0, a: 1.0};</code></p></td></tr><tr><td class="confluenceTd"><p><code>let {r, g, b} = transparent;</code></p></td><td class="confluenceTd"><p>r == 0.0; g == 0.0; b == 0.0</p></td></tr><tr><td class="confluenceTd"><p><code>const {sin, cos, tan} = Math;</code></p></td><td class="confluenceTd"><p>sin=Math.sin, cos=Math.cos, tan=Math.tan</p></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-ExpressionsandOperators">Expressions and Operators</h1><p>In JavaScript, the values <code>null </code>and <code>undefined </code>are the only two values that do not have properties. In a regular property access expression using . or [], you get a <code>TypeError</code> if the expression on the left evaluates to <code>null </code>or <code>undefined</code>. You can use <code>?.</code> and <code>?.[]</code> syntax to guard against errors of this  type.</p><p>You can also invoke a function using <code>?.()</code> instead of <code>()</code>.</p><p>With the <code>new ?.()</code> invocation syntax, if the expression to the left of the <code>?.</code> evaluates to <code>null</code> or <code>undefined</code>, then the entire invocation expression evaluates to <code>undefined </code>and no exception is thrown.</p><p>Write the function invocation using <code>?.(),</code> knowing that invocation will only happen if there is actually a value to be invoked</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function square(x, log) { 
  log?.(x); // Call the function if there is one
  return x * x;
}</pre>
</div></div></td></tr></tbody></table></div><p>Note that expression <code>x++</code> is not always the same as <code>x = x + 1</code>.The <code>++</code> operator never performs string concatenation: it always converts its operand to a number and increments it. If x is the string “1”, <code>++x</code> is the number 2, but<code> x + 1</code> is the string “11”.</p><p>JavaScript objects are compared by reference, not by value. An object is equal to itself, but not to any other object. If two distinct objects have the same number of properties, with the same names and values, they are still not equal. Similarly, two arrays that have the same elements in the same order are not equal to each other.</p><p><code>NaN </code>value is never equal to any other value, including itself! To check whether a value <code>x</code> is <code>NaN</code>, use <code>x !== </code>, or the global <code>isNaN()</code> function.</p><p>If both values refer to the same object, array, or function, they are equal. If they refer to different objects, they are not equal, even if both objects have identical properties.</p><h2 id="JavaScriptDefinitiveGuide-EvaluatingExpressions">Evaluating Expressions</h2><p>JavaScript has the ability to interpret strings of JavaScript source code, evaluating them to produce a value.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>eval(&quot;3+2&quot;)</code></p></td></tr></tbody></table></div><p>Because of security issues, some web servers use the HTTP “Content-Security-Policy” header to disable<code> eval()</code> for an entire website.</p><h2 id="JavaScriptDefinitiveGuide-First-Defined(??)">First-Defined (??)</h2><p>The first-defined operator <code>??</code> evaluates to its first defined operand: if its left operand is not <code>null</code> and not <code>undefined</code>, it returns that value.</p><p><code>a ?? b</code> is equivalent to <code>(a !== null &amp;&amp; a !== undefined) ? a : b</code></p><p><code>??</code> is a useful alternative to <code>||.</code>  The problem with this idiomatic use is that zero, the empty string, and false are all <code>falsy </code>values that may be perfectly valid in some circumstances. In this code example, if <code>maxWidth </code>is zero, that value will be ignored. But if we change the <code>||</code> operator to <code>??</code>, we end up with an expression where zero is a valid value.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 760.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let max = maxWidth || preferences.maxWidth || 500;</code></p></td></tr><tr><td class="confluenceTd"><p><code>let max = maxWidth ?? preferences.maxWidth ?? 500;</code></p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-deleteOperator">delete Operator</h2><p>Deleting an array element leaves a “hole” in the array and does not change the array’s length. The resulting array is sparse.</p><h2 id="JavaScriptDefinitiveGuide-voidOperator">void Operator</h2><p>Using the <code>void</code> operator makes sense only if the operand has side effects.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 332.0px;"/><col style="width: 426.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let counter = 0;</code></p><p><code>const increment = () =&gt; void counter++;</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>increment()</code></p></td><td class="confluenceTd"><p>undefined</p></td></tr><tr><td class="confluenceTd"><p><code>counter</code></p></td><td class="confluenceTd"><p>1</p></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-Statements">Statements</h1><p>Expressions are evaluated to produce a value, but statements are executed to make something happen.</p><p>Expressions with side effects, such as assignments and function invocations, can stand alone as statements, and when used this way are known as expression statements.</p><p>A similar category of statements are the declaration statements that declare new variables and define new functions.</p><p>If a function does not have any side effects, there is no sense in calling it, unless it is part of a larger expression or an assignment statement.</p><h2 id="JavaScriptDefinitiveGuide-for/of">for/of</h2><p>The <code>for/of</code> loop works with iterable objects. Arrays, strings, sets, and maps are iterable.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 171.0px;"/><col style="width: 587.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>Array</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let data = [1, 2, 3, 4, 5, 6, 7, 8, 9], sum = 0;
for(let element of data) {
  sum += element;
}</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let text = &quot;Na na na na na na na na&quot;;
let wordSet = new Set(text.split(&quot; &quot;));
let unique = [];
for(let word of wordSet) {
  unique.push(word);
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p>String</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let frequency = {};
for(let letter of &quot;mississippi&quot;) {
  if (frequency[letter]) {
    frequency[letter]++;
  } 
  else {
    frequency[letter] = 1;
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p>Map</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let m = new Map([[1, &quot;one&quot;]]);
for(let [key, value] of m) {
  key // =&gt; 1
  value // =&gt; &quot;one&quot;
}</pre>
</div></div></td></tr></tbody></table></div><p>Objects are not (by default) iterable. Attempting to use <code>for/of</code> on a regular object throws a <code>TypeError</code> at runtime.</p><p>If you want to iterate through the properties of an object, you can use the <code>for/in</code> loop.</p><p>Note: <code>for/of</code> can be used on objects with <code>Object.entries</code> property, but it will not pick properties from object’s prototype.</p><h2 id="JavaScriptDefinitiveGuide-for/in">for/in</h2><p><code>for/in</code> loop works with any object after the <code>in</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let p in o) { 
  console.log(o[p]); 
}</pre>
</div></div></td><td class="confluenceTd"><p>Note: this will enumerate array indexes, not values.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let i in a) console.log(i);</pre>
</div></div></td></tr></tbody></table></div><p>The <code>for/in</code> loop does not actually enumerate all properties of an object. It does not enumerate properties whose names are symbols. And of the properties whose names are strings, it only loops over the <code>enumerable</code>properties.</p><h2 id="JavaScriptDefinitiveGuide-with">with</h2><p>The with statement runs a block of code as if the properties of a specified object were variables in scope for that code.</p><p>The <code>with </code>statement is forbidden in strict mode  and should be considered deprecated in non-strict mode: avoid using it whenever possible.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">document.forms[0].address.value</pre>
</div></div><p><br/></p><p><br/></p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">with(document.forms[0]) {
  name.value = &quot;&quot;;
  address.value = &quot;&quot;;
  email.value = &quot;&quot;;
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-debugger">debugger</h2><p>If a debugger program is available and is running, then an implementation may (but is not required to) perform some kind of debugging action.</p><p>In practice, this statement acts like a breakpoint: execution of JavaScript code stops, and you can use the debugger to print variables’ values, examine the call stack, and so on.</p><p>Note that it is not enough to have a debugger available: the debugger statement won’t start the debugger for you. If you’re using a web browser and have the developer tools console open, however, this statement will cause a breakpoint.</p><h2 id="JavaScriptDefinitiveGuide-usestrict">use strict</h2><p>Strict mode is a restricted subset of the language that fixes important language deficiencies and provides stronger error checking and increased security.</p><p>The differences between strict mode and non-strict mode are the following:</p><ul><li><p>The <code>with </code>statement is not allowed in strict mode.</p></li><li><p>In strict mode, all variables must be declared: a <code>ReferenceError </code>is thrown if you assign a value to an identifier that is not a declared variable, function, function parameter, catch clause parameter, or property of the global object. </p></li><li><p>In non-strict mode, this implicitly declares a global variable by adding a new property to the global object.</p></li><li><p>In strict mode, functions invoked as functions (rather than as methods) have a <code>this </code>value of undefined. (In non-strict mode, functions invoked as functions are always passed the global object as their <code>this </code>value.) </p></li><li><p>A function is invoked with <code>call() </code>or <code>apply()</code> , the <code>this </code>value is exactly the value passed as the first argument to <code>call()</code> or <code>apply()</code>. (In non-strict mode, <code>null </code>and <code>undefined </code>values are replaced with the global object and non-object values are converted to objects.)</p></li><li><p>In strict mode, assignments to non-writable properties and attempts to create new properties on non-extensible objects throw a <code>TypeError</code>. (In non-strict mode, these attempts fail silently.)</p></li><li><p>In strict mode, code passed to <code>eval() </code>cannot declare variables or define functions in the caller’s scope as it can in non-strict mode. Instead, variable and function definitions live in a new scope created for the <code>eval()</code>. This scope is discarded when the <code>eval()</code> returns.</p></li><li><p>In strict mode, the Arguments object  in a function holds a static copy of the values passed to the function. In non-strict mode, the Arguments object has “magical” behavior in which elements of the array and named function parameters both refer to the same value.</p></li><li><p>In strict mode, a <code>SyntaxError </code>is thrown if the <code>delete </code>operator is followed by an unqualified identifier such as a variable, function, or function parameter. (In non-strict mode, such a <code>delete </code>expression does nothing and evaluates to false.)</p></li><li><p>In strict mode, an attempt to delete a non-configurable property throws a <code>TypeError</code>. (In non-strict mode, the attempt fails and the delete expression evaluates to false.)</p></li><li><p>In strict mode, it is a syntax error for an object literal to define two or more properties by the same name. (In non-strict mode, no error occurs.)</p></li><li><p>...</p></li></ul><h1 id="JavaScriptDefinitiveGuide-Objects">Objects</h1><p>In addition to its name and value, each property has three property attributes:</p><ul><li><p>The <code>writable </code>attribute specifies whether the value of the property can be set.</p></li><li><p>The <code>enumerable </code>attribute specifies whether the property name is returned by a <code>for/in</code> loop.</p></li><li><p>The <code>configurable </code>attribute specifies whether the property can be deleted and whether its attributes can be altered.</p></li></ul><h2 id="JavaScriptDefinitiveGuide-Prototypes">Prototypes</h2><p>All objects created by object literals have the same prototype object, <code>Object.prototype.</code></p><p>Objects created using the <code>new </code>keyword and a constructor invocation use the value of the prototype property of the constructor function as their prototype.</p><p>Object created by <code>new Object()</code> inherits from <code>Object.prototype</code>, just as the object created by <code>{}</code> does. Similarly, the object created by <code>new Array()</code> uses <code>Array.prototype</code> as its prototype, and the object created by<code> new Date()</code> uses <code>Date.prototype</code> as its prototype.</p><p>Almost all objects have a prototype, but only a relatively small number of objects have a <code>prototype </code>property. It is these objects with prototype properties that define the prototypes for all the other objects.</p><p>Most built-in constructors (and most user-defined constructors) have a prototype that inherits from <code>Object.prototype</code>.</p><p><code>Date.prototype</code> inherits properties from <code>Object.prototype</code>, so a Date object created by <code>new Date()</code> inherits properties from both <code>Date.prototype</code> and <code>Object.prototype</code>. This linked series of prototype objects is known as a prototype chain.</p><h2 id="JavaScriptDefinitiveGuide-CreatingObjects">Creating Objects</h2><p>Objects can be created with object literals, with the <code>new</code> keyword, and with the <code>Object.create()</code> function.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 148.0px;"/><col style="width: 610.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>Literal</p></td><td class="confluenceTd"><p><code>let empty = {};</code></p><p><code>let point = { x: 0, y: 0 };</code></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let book = {
  &quot;main title&quot;: &quot;JavaScript&quot;,
  &quot;sub-title&quot;: &quot;The Definitive Guide&quot;, 
  for: &quot;all audiences&quot;, 
  author: {
    firstname: &quot;David&quot;, .
    surname: &quot;Flanagan&quot;
  }
};</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>new</code></p></td><td class="confluenceTd"><p><code>let o = new Object(); </code><br/><code>let a = new Array(); </code><br/><code>let d = new Date(); </code><br/><code>let r = new Map();</code></p></td></tr><tr><td class="confluenceTd"><p><code>Object.create</code></p></td><td class="confluenceTd"><p><code>let o3 = Object.create(Object.prototype);</code></p></td></tr></tbody></table></div><p>Use <code>Object.create</code> to guard against accidental modifications:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = { x: &quot;don&#39;t change this value&quot; };
library.function(Object.create(o));</pre>
</div></div></td></tr></tbody></table></div><p>Note: the library function can modify the passed in object, but not the original <code>o</code> object</p><h2 id="JavaScriptDefinitiveGuide-AccessObjectPropertieswithanarray([])notation">Access Object Properties with an array ([]) notation</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let addr = &quot;&quot;;
for(let i = 0; i &lt; 4; i++) {
  addr += customer[`address${i}`] + &quot;\n&quot;;
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Inheritance">Inheritance</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 271.0px;"/><col style="width: 487.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let o = {};</code></p><p><code>o.x = 1;</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>let p = Object.create(o);</code></p><p><code>p.y = 2;</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>let q = Object.create(p);</code></p><p><code>q.z = 3;</code></p></td><td class="confluenceTd"><p>Property <code>x</code> and <code>y</code> available on object <code>q</code></p><p><code>q.x + q.y</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Howtoqueryforpropertywhichmaybeundefined">How to query for property which may be undefined</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>surname = book &amp;&amp; book.author &amp;&amp; book.author.surname;</code></p></td></tr><tr><td class="confluenceTd"><p><code>let surname = book?.author?.surname;</code></p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Deletingproperties">Deleting properties</h2><p>The <code>delete</code> operator only deletes own properties, not inherited ones. (To delete an inherited property, you must delete it from the prototype object in which it is defined. Doing this affects every object that inherits from that prototype.)</p><p><code>delete</code> does not remove properties that have a <code>configurable </code>attribute of false.</p><p>Certain properties of built-in objects are non-configurable, as are properties of the global object created by variable declaration and function declaration.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 229.0px;"/><col style="width: 529.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>delete Object.prototype</code></p></td><td class="confluenceTd"><p>false: property is non-configurable</p></td></tr><tr><td class="confluenceTd"><p><code>var x = 1;</code></p><p><code>delete globalThis.x</code></p></td><td class="confluenceTd"><p>false: can't delete <code>this </code>property</p></td></tr><tr><td class="confluenceTd"><p><code>function f() {}</code></p><p><code>delete globalThis.f</code></p></td><td class="confluenceTd"><p>false</p></td></tr><tr><td class="confluenceTd"><p><code>globalThis.x = 1;</code></p><p><code>delete globalThis.x</code></p></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Testingproperties">Testing properties</h2><p>To check whether an object has a property with a given name. You can do this with the <code>in</code> operator, with the <code>hasOwnProperty()</code> and <code>propertyIsEnumerable()</code> methods, or simply by querying the property </p><p>( <code>!= undefined</code>).</p><h3 id="JavaScriptDefinitiveGuide-in&amp;query">in &amp; query</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 180.0px;"/><col style="width: 325.0px;"/><col style="width: 253.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let o = { x: 1 };</code></p></td><td class="confluenceTd"><p /></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>&quot;x&quot; in o</code></p></td><td class="confluenceTd"><p>true</p></td><td class="confluenceTd"><p><code>o.x !== undefined</code></p></td></tr><tr><td class="confluenceTd"><p><code>&quot;y&quot; in o</code></p></td><td class="confluenceTd"><p>false</p></td><td class="confluenceTd"><p><code>o.y !== undefined</code></p></td></tr><tr><td class="confluenceTd"><p><code>&quot;toString&quot; in o</code></p></td><td class="confluenceTd"><p>true: o inherits a <code>toString </code>property</p></td><td class="confluenceTd"><p><code>o.toString !== undefined</code></p></td></tr></tbody></table></div><p>Advantage of using in: <code>in</code> can distinguish between properties that do not exist and properties that exist but have been set to <code>undefined</code>.</p><h3 id="JavaScriptDefinitiveGuide-hasOwnProperty">hasOwnProperty</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 250.0px;"/><col style="width: 508.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let o = { x: 1 };</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>o.hasOwnProperty(&quot;x&quot;)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>o.hasOwnProperty(&quot;y&quot;)</code></p></td><td class="confluenceTd"><p>false</p></td></tr><tr><td class="confluenceTd"><p><code>o.hasOwnProperty(&quot;toString&quot;)</code></p></td><td class="confluenceTd"><p>false: toString is an inherited property</p></td></tr></tbody></table></div><p>The <code>propertyIsEnumerable()</code> returns true only if the named property is an own property and its <code>enumerable</code> attribute is true.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 424.0px;"/><col style="width: 334.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let o = { x: 1 };</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>o.propertyIsEnumerable(&quot;x&quot;)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>o.propertyIsEnumerable(&quot;toString&quot;)</code></p></td><td class="confluenceTd"><p>false: not an own property</p></td></tr><tr><td class="confluenceTd"><p><code>Object.prototype.propertyIsEnumerable(&quot;toString&quot;)</code></p></td><td class="confluenceTd"><p>false: not enumerable</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Enumeratingproperties">Enumerating properties</h2><p>To guard against enumerating inherited properties with <code>for/in</code>, you can add an explicit check inside the loop body:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let p in o) {
  if (!o.hasOwnProperty(p)) continue; 
}</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let p in o) {
  if (typeof o[p] === &quot;function&quot;) continue;
}</pre>
</div></div></td></tr></tbody></table></div><p>Functions you can use to get an array of property names</p><ul><li><p><code>Object.keys()</code> returns an array of the names of the enumerable own properties of an object. It does not include non-enumerable properties, inherited properties, or properties whose name is a Symbol.</p></li><li><p><code>Object.getOwnPropertyNames()</code> works like <code>Object.keys() </code>but returns an array of the names of nonenumerable own properties as well.</p></li><li><p><code>Object.getOwnPropertySymbols()</code> returns own properties whose names are Symbols, whether or not they are enumerable.</p></li><li><p><code>Reflect.ownKeys()</code> returns all own property names, both enumerable and non-enumerable, and both string and Symbol.</p></li></ul><h2 id="JavaScriptDefinitiveGuide-ExtendingObjects">Extending Objects</h2><p>To copy the properties of one object to another object</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let target = {x: 1}, source = {y: 2, z: 3};
for(let key of Object.keys(source)) {
  target[key] = source[key];
}</pre>
</div></div></td></tr></tbody></table></div><p>One reason to assign properties from one object into another is when you have an object that defines default values for many properties and you want to copy those default properties into another object if a property by that name does not already exist in that object. Using <code>Object.assign()</code> naively will not do what you want:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Object.assign(o, defaults);</pre>
</div></div></td><td class="confluenceTd"><p>overwrites everything in o with defaults</p></td></tr></tbody></table></div><p>Instead, use one of the following:,</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>o = Object.assign({}, defaults, o);</code></p></td></tr><tr><td class="confluenceTd"><p><code>o = {...defaults, ...o};</code></p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-SerializingObjects">Serializing Objects</h2><p>The functions <code>JSON.stringify()</code> and<code> JSON.parse()</code> serialize and restore JavaScript objects.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let o = {x: 1, y: {z: [false, null, &quot;&quot;]}};</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>let s = JSON.stringify(o);</code></p></td><td class="confluenceTd"><p>s == '{&quot;x&quot;:1,&quot;y&quot;:{&quot;z&quot;:[false,null,&quot;&quot;]}}'</p></td></tr><tr><td class="confluenceTd"><p><code>let p = JSON.parse(s);</code></p></td><td class="confluenceTd"><p>p == {x: 1, y: {z: [false,null, &quot;&quot;]}}</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Objectmethods">Object methods</h2><p><code>toString(), valueOf(), loLocaleString(), toJSON()</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let s = { x: 1, y: 1 }.toString();</code></p></td><td class="confluenceTd"><p>s == &quot;[object Object]&quot;</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ExtendedObjectLiteralSyntax">Extended Object Literal Syntax</h2><h3 id="JavaScriptDefinitiveGuide-ShorthandProperties">Shorthand Properties</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let x = 1, y = 2;
let o = {
  x: x,
  y: y
};</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><p><code>let x = 1, y = 2;</code><br/><code>let o = { x, y };</code><br/></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ComputerPropertyNames">Computer Property Names</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>const PROPERTY_NAME = &quot;p1&quot;;</code><br/><code>function computePropertyName() { return &quot;p&quot; + 2; }</code></p></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 315.0px;"/><col style="width: 129.0px;"/><col style="width: 314.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = {};
o[PROPERTY_NAME] = 1;
o[computePropertyName()] = 2;</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let p = {
  [PROPERTY_NAME]: 1,
  [computePropertyName()]: 2
};</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-SymbolsasPropertyNames">Symbols as Property Names</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const extension = Symbol(&quot;my extension symbol&quot;);
let o = {
  [extension]: {}
};
o[extension].x = 0;</pre>
</div></div></td></tr></tbody></table></div><p>Two Symbols created with the same string argument are still different from one another.</p><p>The point of Symbols is not security, but to define a safe extension mechanism for JavaScript objects. If you get an object from third-party code that you do not control and need to add some of your own properties to that object but want to be sure that your properties will not conflict with any properties that may already exist on the object, you can safely use Symbols as your property names.</p><h3 id="JavaScriptDefinitiveGuide-SpreadOperator">Spread Operator</h3><p>You can copy the properties of an existing object into a new object using the “spread operator” ... inside an object literal:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let position = { x: 0, y: 0 };</code><br/><code>let dimensions = { width: 100, height: 75 };</code><br/><code>let rect = { ...position, ...dimensions };</code><br/><code>rect.x + rect.y + rect.width + rect.height</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ShorthandMethods">Shorthand Methods</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 344.0px;"/><col style="width: 75.0px;"/><col style="width: 339.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let square = {
  area: function() {
    return this.side * this.side; },
  side: 10
};</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let square = {
  area() { 
    return this.side * this.side; },
  side: 10
};</pre>
</div></div></td></tr></tbody></table></div><p>When you write a method using this shorthand syntax, the property name can take any of the forms that are legal in an object literal: in addition to a regular JavaScript identifier like the name area above, you can also use string literals and computed property names, which can include Symbol property names:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const METHOD_NAME = &quot;m&quot;;
const symbol = Symbol();
let weirdMethods = {
  &quot;method With Spaces&quot;(x) { return x + 1; },
  [METHOD_NAME](x) { return x + 2; },
  [symbol](x) { return x + 3; }
};</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>weirdMethods[&quot;method With Spaces&quot;](1)</code></p></td><td class="confluenceTd"><p>2</p></td></tr><tr><td class="confluenceTd"><p><code>weirdMethods[METHOD_NAME](1)</code></p></td><td class="confluenceTd"><p>3</p></td></tr><tr><td class="confluenceTd"><p><code>weirdMethods[symbol](1)</code></p></td><td class="confluenceTd"><p>4</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-PropertyGettersandSetters">Property Getters and Setters</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = {
  dataProp: value,
  get accessorProp() { return this.dataProp; },
  set accessorProp(value) { this.dataProp = value; }
};</pre>
</div></div></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-Arrays">Arrays</h1><h2 id="JavaScriptDefinitiveGuide-CreatingArrays">Creating Arrays</h2><ul><li><p>Array literals</p></li><li><p>The ... spread operator on an iterable object</p></li><li><p>The <code>Array()</code> constructor</p></li><li><p>The <code>Array.of()</code> and <code>Array.from()</code> factory methods</p></li></ul><h3 id="JavaScriptDefinitiveGuide-Arrayliterals">Array literals</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let empty = [];</code></p><p><code>let primes = [2, 3, 5, 7, 11];</code></p><p><code>let misc = [ 1.1, true, &quot;a&quot;, ];</code></p></td></tr><tr><td class="confluenceTd"><p><code>let b = [[1, {x: 1, y: 2}], [2, {x: 3, y: 4}]];</code></p></td></tr></tbody></table></div><p>If an array literal contains multiple commas in a row, with no value between, the array is sparse</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let count = [1,,3];</code></p></td></tr><tr><td class="confluenceTd"><p><code>let undefs = [,,];</code></p></td></tr></tbody></table></div><p>Array literal syntax allows an optional trailing comma, so <code>[,,]</code> has a length of 2, not 3.</p><h3 id="JavaScriptDefinitiveGuide-TheSpreadOperator">The Spread Operator</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 215.0px;"/><col style="width: 543.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let a = [1, 2, 3];</code></p></td></tr><tr><td class="confluenceTd"><p><code>let b = [0, ...a, 4];</code></p></td><td class="confluenceTd"><p>[0, 1, 2, 3, 4]</p></td></tr></tbody></table></div><p>create a copy of an array - modifying the copy does not change the original</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let original = [1,2,3];</code><br/><code>let copy = [...original];</code></p></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 315.0px;"/><col style="width: 443.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let digits = [...&quot;0123456789ABCDEF&quot;];</code></p></td><td class="confluenceTd"><p>[&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;]</p></td></tr><tr><td class="confluenceTd"><p><code>let letters = [...&quot;hello world&quot;];</code></p></td><td class="confluenceTd"><p>[&quot;h&quot;,&quot;e&quot;,&quot;l&quot;,”l”&quot;o&quot;,&quot;&quot;,&quot;w&quot;,”o”&quot;r&quot;,”l”,&quot;d&quot;]</p></td></tr><tr><td class="confluenceTd"><p><code>[...new Set(letters)]</code></p></td><td class="confluenceTd"><p>[&quot;h&quot;,&quot;e&quot;,&quot;l&quot;,&quot;o&quot;,&quot;&quot;,&quot;w&quot;,&quot;r&quot;,&quot;d&quot;]</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Array.of()">Array.of()</h3><p>When the <code>Array()</code> constructor function is invoked with one numeric argument, it uses that argument as an array length. But when invoked with more than one numeric argument, it treats those arguments as elements for the array to be created. This means that the <code>Array()</code> constructor cannot be used to create an array with a single numeric element.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>Array.of()</code></p></td><td class="confluenceTd"><p>[]</p></td></tr><tr><td class="confluenceTd"><p><code>Array.of(10)</code></p></td><td class="confluenceTd"><p>[10]</p></td></tr><tr><td class="confluenceTd"><p><code>Array.of(1,2,3)</code></p></td><td class="confluenceTd"><p>[1, 2, 3]</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Array.from()">Array.from()</h3><p>It is also a simple way to make a copy of an array:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let copy = Array.from(original);</code></p></td></tr></tbody></table></div><p><code>Array.from()</code> is also important because it defines a way to make a true-array copy of an array-like object. Array-like objects are non-array objects that have a numeric length property and have values stored with properties whose names happen to be integers.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let truearray = Array.from(arraylike);</code></p></td></tr></tbody></table></div><p><code>Array.from()</code> also accepts an optional second argument. If you pass a function as the second argument, then as the new array is being built, each element from the source object will be passed to the function you specify, and the return value of the function will be stored in the array instead of the original value.</p><h3 id="JavaScriptDefinitiveGuide-ReadingandWritingArrayElements">Reading and Writing Array Elements</h3><p>What is special about arrays is that when you use property names that are non-negative integers , the array automatically maintains the value of the <code>length</code> property for you.</p><p>JavaScript converts the numeric array index you specify to a string—the index 1 becomes the string &quot;1&quot;, then uses that string as a property name.</p><p>It is helpful to clearly distinguish an array index from an object property name. All indexes are property names, but only property names that are integers between 0 and 2<sup>31</sup> are indexes. All arrays are objects, and you can create properties of any name on them. If you use properties that are array indexes, however, arrays have the special behavior of updating their <code>length</code> property as needed.</p><p>Note that you can index an array using numbers that are negative or that are not integers. When you do this, the number is converted to a string, and that string is used as the property name. Since the name is not a non-negative integer, it is treated as a regular object property, not an array index.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 209.0px;"/><col style="width: 549.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>a[-1.23] = true;</code></p></td><td class="confluenceTd"><p>This creates a property named &quot;-1.23&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>a[&quot;1000&quot;] = 0;</code></p></td><td class="confluenceTd"><p>This the 1001st element of the array</p></td></tr><tr><td class="confluenceTd"><p><code>a[1.000] = 1;</code></p></td><td class="confluenceTd"><p>Array index 1. Same as a[1] = 1;</p></td></tr></tbody></table></div><p>The fact that array indexes are simply a special type of object property name means that JavaScript arrays have no notion of an “out of bounds” error. When you try to query a nonexistent property of any object, you don’t get an error; you simply get <code>undefined</code>.</p><h3 id="JavaScriptDefinitiveGuide-SparseArrays">Sparse Arrays</h3><p>Sparse arrays can be created with the <code>Array()</code> constructor or simply by assigning to an array index larger than the current array length.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>a[1000] = 0;</code></p></td><td class="confluenceTd"><p>Assignment adds one element but sets length to 1001.</p></td></tr></tbody></table></div><p>you can also make an array sparse with the <code>delete</code> operator. </p><p>Note that when you omit a value in an array literal (using repeated commas as in <code>[1,,3]</code>), the resulting array is sparse, and the omitted elements simply do not exist</p><h3 id="JavaScriptDefinitiveGuide-ArrayLength">Array Length</h3><p>if you set the length property to a nonnegative integer <code>n</code> smaller than its current value, any array elements whose index is greater than or equal to n are deleted from the array.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 216.0px;"/><col style="width: 542.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>a = [1,2,3,4,5];</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>a.length = 3;</code></p></td><td class="confluenceTd"><p>a is now [1,2,3].</p></td></tr><tr><td class="confluenceTd"><p><code>a.length = 0;</code></p></td><td class="confluenceTd"><p>Delete all elements. a is [].</p></td></tr><tr><td class="confluenceTd"><p><code>a.length = 5;</code></p></td><td class="confluenceTd"><p>Length is 5, but no elements, like <code>new Array(5)</code></p></td></tr></tbody></table></div><p>You can also set the length property of an array to a value larger than its current value. Doing this does not actually add any new elements to the array; it simply creates a sparse area at the end of the array.</p><h2 id="JavaScriptDefinitiveGuide-AddingandDeletingArrayElements">Adding and Deleting Array Elements</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 183.0px;"/><col style="width: 575.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let a = [];</code></p></td></tr><tr><td class="confluenceTd"><p><code>a[0] = &quot;zero&quot;;</code></p><p><code>a[1] = &quot;one&quot;;</code></p></td><td class="confluenceTd"><p>add elements to it.</p></td></tr></tbody></table></div><p>You can also use the <code>push()</code> method to add one or more values to the end of an array.</p><p>You can use the<code> unshift()</code> method to insert a value at the beginning of an array, shifting the existing array elements to higher indexes.</p><p>The <code>pop()</code> method is the opposite of <code>push()</code>: it removes the last element of the array and returns it, reducing the length of an array by 1.</p><p>Similarly, the <code>shift()</code> method removes and returns the first element of the array, reducing the length by 1 and shifting all elements down to an index one lower than their current index.</p><p>You can delete array elements with the delete operator</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 172.0px;"/><col style="width: 586.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let a = [1,2,3];</code></p></td></tr><tr><td class="confluenceTd"><p><code>delete a[2];</code></p></td><td class="confluenceTd"><p>a now has no element at index 2</p></td></tr><tr><td class="confluenceTd"><p><code>2 in a</code></p></td><td class="confluenceTd"><p>false</p></td></tr><tr><td class="confluenceTd"><p><code>a.length</code></p></td><td class="confluenceTd"><p>3: delete does not affect array length</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-IteratingArrays">Iterating Arrays</h2><p>The easiest way to loop through each of the elements of an array (or any iterable object) is with the <code>for/of</code>loop</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let letters = [...&quot;Hello world&quot;];
let string = &quot;&quot;;
for(let letter of letters) {
  string += letter;
}</pre>
</div></div></td></tr></tbody></table></div><p>It has no special behavior for sparse arrays and simply returns <code>undefined</code> for any array elements that do not exist.</p><p>If you want to use a <code>for/of</code> loop for an array and need to know the index of each array element, use the <code>entries()</code> method of the array</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let letters = [...&quot;Hello world&quot;];
let everyother = &quot;&quot;;
for(let [index, letter] of letters.entries()) {
  if (index % 2 === 0) everyother += letter; 
}</pre>
</div></div></td></tr></tbody></table></div><p>Another good way to iterate arrays is with <code>forEach()</code>. This is not a new form of the for loop, but an array method that offers a functional approach to array iteration.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let letters = [...&quot;Hello world&quot;];
let uppercase = &quot;&quot;;
letters.forEach(letter =&gt; { 
  uppercase += letter.toUpperCase();
});</pre>
</div></div></td></tr></tbody></table></div><p>You can also loop through the elements of an array with a <code>for</code> loop.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let i = 0, len = letters.length; i &lt; len; i++) {
  // loop body 
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-MultidimensionalArrays">Multidimensional Arrays</h2><h3 id="JavaScriptDefinitiveGuide-Createamultidimensionalarray">Create a multidimensional array</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let table = new Array(10);</code></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let i = 0; i &lt; table.length; i++) {
  table[i] = new Array(10); 
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let row = 0; row &lt; table.length; row++) {
  for(let col = 0; col &lt; table[row].length; col++) {
    table[row][col] = row * col;
  }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ArrayMethods">Array Methods</h2><h3 id="JavaScriptDefinitiveGuide-ArrayIteratorMethods">Array Iterator Methods</h3><p>First, all of these methods accept a function as their first argument and invoke that function once for each element (or some elements) of the array. If the array is sparse, the function you pass is not invoked for nonexistent elements. In most cases, the function you supply is invoked with three arguments: the value of the array element, the index of the array element, and the array itself.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 121.0px;"/><col style="width: 436.0px;"/><col style="width: 201.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>FOREACH()</p></td><td class="confluenceTd"><p><code>let data = [1,2,3,4,5], sum = 0;</code></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">data.forEach(value =&gt; { sum += value; });</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">data.forEach(function(v, i, a) {
  a[i] = v + 1; 
});</pre>
</div></div></td><td class="confluenceTd"><p><br/>15</p><p /><p>[2,3,4,5,6]</p></td></tr><tr><td class="confluenceTd"><p>MAP()</p></td><td class="confluenceTd"><p><code>let a = [1, 2, 3];</code><br/><code>a.map(x =&gt; x*x)</code></p></td><td class="confluenceTd"><p>[1, 4, 9]</p></td></tr><tr><td class="confluenceTd"><p>FILTER()</p></td><td class="confluenceTd"><p><code>let a = [5, 4, 3, 2, 1];</code><br/><code>a.filter(x =&gt; x &lt; 3) </code><br/><code>a.filter((x,i) =&gt; i % 2 === 0)</code></p></td><td class="confluenceTd"><p>[2, 1];</p><p>[5, 3, 1];</p></td></tr><tr><td class="confluenceTd"><p>FIND()</p><p>FINDINDEX()</p></td><td class="confluenceTd"><p><code>let a = [1,2,3,4,5];</code></p><p><code>a.findIndex(x =&gt; x === 3)</code></p><p><code>a.find(x =&gt; x % 5 === 0)</code></p><p><code>a.find(x =&gt; x % 7 === 0)</code></p></td><td class="confluenceTd"><p /><p>2</p><p>5</p><p>undefined</p></td></tr><tr><td class="confluenceTd"><p>EVERY()</p><p>SOME()</p></td><td class="confluenceTd"><p><code>let a = [1,2,3,4,5];</code></p><p><code>a.every(x =&gt; x &lt; 10)</code></p><p><code>a.some(x =&gt; x % 2 === 0)</code></p><p><code>a.some(isNaN)</code></p></td><td class="confluenceTd"><p /><p>true</p><p>true</p><p>false</p></td></tr><tr><td class="confluenceTd"><p>REDUCE()</p><p>ReduceRight()</p><p /></td><td class="confluenceTd"><p>l<code>et a = [1,2,3,4,5];</code></p><p><code>a.reduce((x,y) =&gt; x+y, 0)</code></p><p><code>a.reduce((x,y) =&gt; x*y, 1)</code></p><p><code>a.reduce((x,y) =&gt; (x &gt; y) ? x : y)</code></p></td><td class="confluenceTd"><p /><p>15</p><p>120</p><p>5</p></td></tr></tbody></table></div><p>Note that <code>map()</code> returns a new array: it does not modify the array it is invoked on. If that array is sparse, your function will not be called for the missing elements, but the returned array will be sparse in the same way as the original array: it will have the same length and the same missing elements.</p><p>To close the gaps in a sparse array, you can do this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let dense = sparse.filter(() =&gt; true);</code></p></td></tr></tbody></table></div><p>And to close gaps and remove undefined and null elements, you can use filter, like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>a = a.filter(x =&gt; x !== undefined &amp;&amp; x !== null);</code></p></td></tr></tbody></table></div><p>Unlike <code>filter()</code>, however,<code> find()</code> and <code>findIndex()</code> stop iterating the first time the predicate finds an element. When that happens, <code>find()</code> returns the matching element, and <code>findIndex()</code> returns the index of the matching element. If no matching element is found,<code> find()</code> returns <code>undefined</code> and<code> findIndex()</code>returns -1.</p><p>When you invoke <code>reduce()</code> with no initial value, it uses the first element of the array as the initial value.</p><p><code>reduceRight()</code> works just like <code>reduce()</code>, except that it processes the array from highest index to lowest (right-to-left), rather than from lowest to highest. You might want to do this if the reduction operation has right-to-left associativity</p><h3 id="JavaScriptDefinitiveGuide-Flatteningarrayswithflat()andflatMap()">Flattening arrays with <code>flat()</code> and <code>flatMap()</code></h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 461.0px;"/><col style="width: 297.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>[1, [2, 3]].flat()</code></p></td><td class="confluenceTd"><p>[1, 2, 3]</p></td></tr><tr><td class="confluenceTd"><p><code>[1, [2, [3]]].flat()</code></p></td><td class="confluenceTd"><p>[1, 2, [3]]</p></td></tr><tr><td class="confluenceTd"><p><code>let a = [1, [2, [3, [4]]]];</code></p><p><code>a.flat(1)</code></p><p><code>a.flat(2)</code></p><p><code>a.flat(3)</code></p><p><code>a.flat(4)</code></p></td><td class="confluenceTd"><p><br/>[1, 2, [3, [4]]]</p><p>[1, 2, 3, [4]]</p><p>[1, 2, 3, 4]</p><p>[1, 2, 3, 4]</p></td></tr><tr><td class="confluenceTd"><p><code>let phrases = [&quot;hello world&quot;, &quot;the definitive guide&quot;];</code><br/><code>let words = phrases.flatMap(phrase =&gt; phrase.split(&quot; &quot;));</code></p></td><td class="confluenceTd"><p>[&quot;hello&quot;, &quot;world&quot;, &quot;the&quot;, &quot;definitive&quot;, &quot;guide&quot;];</p></td></tr></tbody></table></div><p>Calling <code>a.flatMap(f)</code> is the same as (but more efficient than) <code>a.map(f).flat()</code>:</p><h3 id="JavaScriptDefinitiveGuide-Addingarrayswithconcat()">Adding arrays with concat()</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let a = [1,2,3];</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>a.concat(4, 5)</code></p></td><td class="confluenceTd"><p>[1,2,3,4,5]</p></td></tr><tr><td class="confluenceTd"><p><code>a.concat([4,5],[6,7])</code></p></td><td class="confluenceTd"><p>[1,2,3,4,5,6,7]</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-StacksandQueueswithpush(),pop(),shift(),andunshift()">Stacks and Queues with push(), pop(), shift(), and unshift()</h3><p>The <code>push()</code> and<code> pop()</code> methods allow you to work with arrays as if they were stacks. The <code>push()</code> method appends one or more new elements to the end of an array and returns the new length of the array.</p><p>The <code>unshift()</code> and <code>shift()</code> methods behave much like <code>push()</code> and<code> pop()</code>, except that they insert and remove elements from the beginning of an array rather than from the end.</p><p>You can implement a queue data structure by using <code>push()</code> to add elements at the end of an array and <code>shift()</code> to remove them from the start of the array. Note differences in <code>unshift </code>with single and multiple values.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 215.0px;"/><col style="width: 543.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let a = [];</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>a.unshift(1)</code></p></td><td class="confluenceTd"><p>[1]</p></td></tr><tr><td class="confluenceTd"><p><code>a.unshift(2)</code></p></td><td class="confluenceTd"><p>[2, 1]</p></td></tr><tr><td class="confluenceTd"><p><code>a = [];</code></p></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><p><code>a.unshift(1,2)</code></p></td><td class="confluenceTd"><p>[1, 2]</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Subarrayswithslice(),splice(),fill(),andcopyWithin()">Subarrays with <code>slice(), splice(), fill()</code>, and <code>copyWithin()</code></h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 138.0px;"/><col style="width: 367.0px;"/><col style="width: 253.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>SLICE()</p></td><td class="confluenceTd"><p><code>let a = [1,2,3,4,5];</code></p><p><code>a.slice(0,3);</code></p><p><code>a.slice(3);</code></p><p><code>a.slice(1,-1);</code></p><p><code>a.slice(-3,-2);</code></p></td><td class="confluenceTd"><p /><p>[1,2,3]</p><p>[4,5]</p><p>[2,3,4]</p><p>[3]</p></td></tr><tr><td class="confluenceTd"><p>SPLICE</p></td><td class="confluenceTd"><p><code>let a = [1,2,3,4,5,6,7,8];</code></p><p><code>a.splice(4)</code></p><p><code>a.splice(1,2)</code></p><p><code>a.splice(1,1)</code></p><p><code>let a = [1,2,3,4,5];</code></p><p><code>a.splice(2,0,&quot;a&quot;,&quot;b&quot;)</code></p><p><code>a.splice(2,2,[1,2],3)</code></p></td><td class="confluenceTd"><p /><p>[5,6,7,8]; <code>a</code> is now [1,2,3,4]</p><p>[2,3]; a is now [1,4]</p><p>[4]; a is now [1]</p><p /><p>[]; a is now [1,2,&quot;a&quot;,&quot;b&quot;,3,4,5]</p><p>[&quot;a&quot;,&quot;b&quot;]; a is now [1,2,[1,2],3,3,4,5]</p></td></tr><tr><td class="confluenceTd"><p>FILL()</p></td><td class="confluenceTd"><p><code>let a = new Array(5);</code></p><p><code>a.fill(0)</code></p><p><code>a.fill(9, 1)</code></p><p><code>a.fill(8, 2, -1)</code></p></td><td class="confluenceTd"><p /><p>[0,0,0,0,0]</p><p>[0,9,9,9,9]</p><p>[0,9,8,8,9]</p></td></tr><tr><td class="confluenceTd"><p>COPYWITHIN()</p></td><td class="confluenceTd"><p><code>let a = [1,2,3,4,5];</code></p><p><code>a.copyWithin(1)</code></p><p><code>a.copyWithin(2, 3, 5)</code></p><p><code>a.copyWithin(0, -2)</code></p></td><td class="confluenceTd"><p /><p>[1,1,2,3,4]</p><p>[1,1,3,4,4]</p><p>[4,4,3,4,4]</p></td></tr></tbody></table></div><p><code>splice()</code> is a general-purpose method for inserting or removing elements from an array.<code> splice()</code> can delete elements from an array, insert new elements into an array, or perform both operations at the same time. </p><p>The first argument to <code>splice()</code> specifies the array position at which the insertion and/or deletion is to begin. The second argument specifies the number of elements that should be deleted from (spliced out of) the array.</p><p>Unlike <code>concat(), splice()</code> inserts arrays themselves, not the elements of those arrays.</p><p><code>copyWithin()</code> copies a slice of an array to a new position within the array. It modifies the array in place and returns the modified array, but it will not change the length of the array.</p><h3 id="JavaScriptDefinitiveGuide-ArraySearchingandSortingMethods">Array Searching and Sorting Methods</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 134.0px;"/><col style="width: 401.0px;"/><col style="width: 223.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p>INDEXOF()<br/>LASTINDEXOF()</p></td><td class="confluenceTd"><p><code>let a = [0,1,2,1,0];</code></p><p><code>a.indexOf(1)</code></p><p><code>a.lastIndexOf(1)</code></p><p><code>a.indexOf(3)</code></p></td><td class="confluenceTd"><p /><p>1</p><p>3</p><p>-1</p></td></tr><tr><td class="confluenceTd"><p>SORT()</p></td><td class="confluenceTd"><p><code>let a = [33, 4, 1111, 222];</code></p><p><code>a.sort();</code></p><p><code>a.sort((a,b) =&gt; a - b);</code></p><p>Case-insensitive sort</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let a = [&quot;ant&quot;, &quot;Bug&quot;, &quot;cat&quot;, &quot;Dog&quot;];
a.sort(); // a == [&quot;Bug&quot;,&quot;Dog&quot;,&quot;ant&quot;,&quot;cat&quot;]; 
a.sort(function(s,t) {
  let a = s.toLowerCase();
  let b = t.toLowerCase();
  if (a &lt; b) return -1;
  if (a &gt; b) return 1;
  return 0;
});</pre>
</div></div></td><td class="confluenceTd"><p /><p><code>[1111, 222, 33, 4];</code></p><p><code>[4, 33, 222, 1111]</code></p><p><br/></p></td></tr><tr><td class="confluenceTd"><p>REVERSE()</p></td><td class="confluenceTd"><p><code>let a = [1,2,3];</code><br/><code>a.reverse();</code></p></td><td class="confluenceTd"><p>[3,2,1]</p></td></tr></tbody></table></div><p><code>indexOf()</code> and <code>lastIndexOf()</code> compare their argument to the array elements using the equivalent of the === operator. If your array contains objects instead of primitive values, these methods check to see if two references both refer to exactly the same object. If you want to actually look at the content of an object, try using the <code>find()</code> method with your own custom predicate function instead.</p><p><code>indexOf()</code> and <code>lastIndexOf()</code> take an optional second argument that specifies the array index at which to begin the search. Negative values are allowed for the second argument and are treated as an offset from the end of the array.</p><p><code>indexOf()</code> will not detect the NaN value in an array, but <code>includes()</code> will</p><p>When <code>sort()</code> is called with no arguments, it sorts the array elements in alphabetical order. To sort an array into some order other than alphabetical, you must pass a comparison function as an argument to <code>sort()</code>.</p><h3 id="JavaScriptDefinitiveGuide-ArraytoStringConversions">Array to String Conversions</h3><p>The <code>join()</code> method converts all the elements of an array to strings and concatenates them, returning the resulting string.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let a = [1, 2, 3];</code></p></td></tr><tr><td class="confluenceTd"><p><code>a.join()</code></p><p><code>a.join(&quot; &quot;)</code></p><p><code>a.join(&quot;&quot;)</code></p></td><td class="confluenceTd"><p>&quot;1,2,3&quot;</p><p>&quot;1 2 3&quot;</p><p>&quot;123&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let b = new Array(10);</code></p></td></tr><tr><td class="confluenceTd"><p><code>b.join(&quot;-&quot;)</code></p></td><td class="confluenceTd"><p>&quot;---------&quot;</p></td></tr></tbody></table></div><p>Arrays, like all JavaScript objects, have a <code>toString()</code> method. For an array, this method works just like the <code>join()</code> method with no arguments:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>[1,2,3].toString()</code></p></td><td class="confluenceTd"><p>&quot;1,2,3&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].toString()</code></p></td><td class="confluenceTd"><p>&quot;a,b,c&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>[1, [2,&quot;c&quot;]].toString()</code></p></td><td class="confluenceTd"><p>&quot;1,2,c&quot;</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-StaticArrayFunctions">Static Array Functions</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 195.0px;"/><col style="width: 563.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>Array.isArray([])</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>Array.isArray({})</code></p></td><td class="confluenceTd"><p>false</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Array-LikeObjects">Array-Like Objects</h2><p>It is often perfectly reasonable to treat any object with a numeric <code>length</code> property and corresponding non-negative integer properties as a kind of array.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let a = {}; 
let i = 0;
while(i &lt; 10) {
  a[i] = i * i;
  i++;
}
a.length = i;
// Now iterate through it as if it were a real array
let total = 0;
for(let j = 0; j &lt; a.length; j++) {
  total += a[j];
}</pre>
</div></div></td></tr></tbody></table></div><p>Since array-like objects do not inherit from <code>Array.prototype</code>, you cannot invoke array methods on them directly. You can invoke them indirectly using the <code>Function.call</code> method.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 423.0px;"/><col style="width: 335.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>let a = {&quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot;, length: 3};</code></p></td><td class="confluenceTd"><p>// An array-like object</p></td></tr><tr><td class="confluenceTd"><p><code>Array.prototype.join.call(a, &quot;+&quot;)</code></p></td><td class="confluenceTd"><p>&quot;a+b+c&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>Array.prototype.join.call(&quot;JavaScript&quot;, &quot; &quot;)</code></p></td><td class="confluenceTd"><p>&quot;J a v a S c r i p t&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>Array.prototype.map.call(a, x =&gt; x.toUpperCase())</code></p></td><td class="confluenceTd"><p>[&quot;A&quot;,&quot;B&quot;,&quot;C&quot;]</p></td></tr><tr><td class="confluenceTd"><p><code>Array.from(a)</code></p></td><td class="confluenceTd"><p>[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-StringsasArrays">Strings as Arrays</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let s = &quot;test&quot;;</code></p></td></tr><tr><td class="confluenceTd"><p><code>s.charAt(0)</code></p></td><td class="confluenceTd"><p>t</p></td></tr><tr><td class="confluenceTd"><p><code>s[1]</code></p></td><td class="confluenceTd"><p>e</p></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-Functions">Functions</h1><p>In addition to the arguments, each invocation has another value - the invocation context - that is the value of the <code>this</code> keyword.</p><h2 id="JavaScriptDefinitiveGuide-FunctionDeclarations">Function Declarations</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function printprops(o) {
  for(let p in o) {
    console.log(`${p}: ${o[p]}\n`);
  }
}</pre>
</div></div></td></tr></tbody></table></div><p>Function declaration statements are “hoisted” to the top of the enclosing script, function, or block so that functions defined in this way may be invoked from code that appears before the definition.</p><h2 id="JavaScriptDefinitiveGuide-FunctionExpressions">Function Expressions</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 407.0px;"/><col style="width: 351.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>const square = function(x) { return x*x; };</code></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const f = function fact(x) {
  if (x &lt;= 1) return 1;
  return x * fact(x-1);
}</pre>
</div></div></td><td class="confluenceTd"><p>Function expressions can include names, which is useful for recursion</p></td></tr><tr><td class="confluenceTd"><p><code>[3,2,1].sort(function(a,b) { return a - b; });</code></p></td><td class="confluenceTd"><p>Function expressions can also be used as arguments to other functions</p></td></tr><tr><td class="confluenceTd"><p><code>let tensquared = (function(x) {return x*x;}(10));</code></p></td><td class="confluenceTd"><p>Function expressions are sometimes defined and immediately invoked</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ArrowFunctions">Arrow Functions</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>const sum = (x, y) =&gt; { return x + y; };</code></p></td></tr><tr><td class="confluenceTd"><p><code>const sum = (x, y) =&gt; x + y;</code></p></td><td class="confluenceTd"><p>no need for <code>return</code></p></td></tr><tr><td class="confluenceTd"><p><code>const polynomial = x =&gt; x*x + 2*x + 3;</code></p></td><td class="confluenceTd"><p>omit parens with single parameter</p></td></tr><tr><td class="confluenceTd"><p><code>const constantFunc = () =&gt; 42;</code></p></td><td class="confluenceTd"><p>usage for no params</p></td></tr></tbody></table></div><p>If the body of your arrow function is a single return statement but the expression to be returned is an object literal, then you have to put the object literal inside parentheses to avoid syntactic ambiguity between the curly braces of a function body and the curly braces of an object literal</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>const f = x =&gt; { return { value: x }; };</code></p></td><td class="confluenceTd"><p>good</p></td></tr><tr><td class="confluenceTd"><p><code>const g = x =&gt; ({ value: x });</code></p></td><td class="confluenceTd"><p>good</p></td></tr><tr><td class="confluenceTd"><p><code>const h = x =&gt; { value: x };</code></p></td><td class="confluenceTd"><p>returns nothing</p></td></tr><tr><td class="confluenceTd"><p><code>const i = x =&gt; { v: x, w: x };</code></p></td><td class="confluenceTd"><p>syntax error</p></td></tr></tbody></table></div><p>Arrow functions differ from functions defined in other ways in one critical way: they inherit the value of the <code>this</code> keyword from the environment in which they are defined rather than defining their own invocation context as functions defined in other ways do.</p><h2 id="JavaScriptDefinitiveGuide-NestedFunctions">Nested Functions</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function hypotenuse(a, b) {
  function square(x) { return x*x; }
  return Math.sqrt(square(a) + square(b));
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-InvokingFunctions">Invoking Functions</h2><p>For function invocation in non-strict mode, the invocation context (the <code>this</code> value) is the global object. In strict mode, however, the invocation context is <code>undefined</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>const strict = (function() { return !this; }())</code></p></td><td class="confluenceTd"><p>Determine if we're in strict mode</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ConstructorInvocation">Constructor Invocation</h2><p>A constructor invocation creates a new, empty object that inherits from the object specified by the <code>prototype</code>property of the constructor.</p><h2 id="JavaScriptDefinitiveGuide-Indirectinvocation">Indirect invocation</h2><p>JavaScript functions are objects, and like all JavaScript objects, they have methods. Two of these methods, <code>call()</code> and <code>apply()</code>, invoke the function indirectly. Both methods allow you to explicitly specify the <code>this </code>value for the invocation, which means you can invoke any function as a method of any object, even if it is not actually a method of that object.</p><h2 id="JavaScriptDefinitiveGuide-FunctionArgumentsandParameters">Function Arguments and Parameters</h2><h3 id="JavaScriptDefinitiveGuide-OptionalParametersandDefaults">Optional Parameters and Defaults</h3><p>When a function is invoked with fewer arguments than declared parameters, the additional parameters are set to their default value, which is normally <code>undefined</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function getPropertyNames(o, a) {
  a = a || [];
  for(let property in o) a.push(property);
  return a;
}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function getPropertyNames(o, a = []) {
  for(let property in o) a.push(property);
  return a;
}</pre>
</div></div></td></tr></tbody></table></div><p>One interesting case is that, for functions with multiple parameters, you can use the value of a previous parameter to define the default value of the parameters that follow it</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const rectangle = (width, height = width*2) =&gt; ({width, height});</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-RestParametersandVariable-LengthArgumentLists">Rest Parameters and Variable-Length Argument Lists</h3><p>Rest parameters enable us to write functions that can be invoked with arbitrarily more arguments than parameters.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function max(first=-Infinity, ...rest) {
  let maxValue = first; 

  for(let n of rest) {
    if (n &gt; maxValue) {
      maxValue = n;
    }
  }

  return maxValue;
}</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">max(1, 10, 100, 2, 3, 1000, 4, 5, 6)</pre>
</div></div></td><td class="confluenceTd"><p>1000</p></td></tr></tbody></table></div><p>within the body of a function, the value of a rest parameter will always be an array. The array may be empty, but a rest parameter will never be <code>undefined</code>.</p><p>This type of function is called variadic functions, variable arity functions, or vararg functions.</p><h3 id="JavaScriptDefinitiveGuide-TheArgumentsObject">The Arguments Object</h3><p>Within the body of any function, the identifier <code>arguments</code> refers to the Arguments object for that invocation.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function max(x) {
  let maxValue = -Infinity;

  for(let i = 0; i &lt; arguments.length; i++) {
    if (arguments[i] &gt; maxValue)
      maxValue = arguments[i];
    }
  return maxValue;
}</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">max(1, 10, 100, 2, 3, 1000, 4, 5, 6)</pre>
</div></div></td><td class="confluenceTd"><p>1000</p></td></tr></tbody></table></div><p>you should avoid using it in any new code you write.</p><h3 id="JavaScriptDefinitiveGuide-TheSpreadOperatorforFunctionCalls">The Spread Operator for Function Calls</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let numbers = [5, 2, 10, -1, 9, 100, 1];</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Math.min(...numbers)</pre>
</div></div></td><td class="confluenceTd"><p>-1</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function timed(f) {
  return function(...args) {
    console.log(`Entering function ${f.name}`);
    let startTime = Date.now();
    try {
      return f(...args); 
    }
    finally {
      console.log(`Exiting ${f.name} after ${Date.now() - startTime}ms`);
    }
  };
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// Compute the sum of the numbers between 1 and n by brute force
function benchmark(n) {
  let sum = 0;
  for(let i = 1; i &lt;= n; i++) sum += i;
  return sum;
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// Now invoke the timed version of that test function
timed(benchmark)(1000000)</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-DestructuringFunctionArgumentsintoParameters">Destructuring Function Arguments into Parameters</h3><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 492.0px;"/><col style="width: 91.0px;"/><col style="width: 377.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function vectorAdd(v1, v2) {
  return [v1[0] + v2[0], v1[1] + v2[1]];
}

vectorAdd([1,2], [3,4])</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function vectorAdd([x1,y1], [x2,y2]) {
  return [x1 + x2, y1 + y2];
}

vectorAdd([1,2], [3,4])</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function vectorMultiply({x, y}, scalar) {
  return { x: x*scalar, y: y*scalar };
}

vectorMultiply({x: 1, y: 2}, 2)</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function vectorMultiply({x,y}, scalar) {
  return { x: x*scalar, y: y*scalar};
}
vectorMultiply({x: 1, y: 2}, 2)</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ArgumentTypes">Argument Types</h3><p>Adding code to check the types of arguments</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function sum(a) {
  let total = 0;
  for(let element of a) { 
    if (typeof element !== &quot;number&quot;) {
      throw new TypeError(&quot;sum(): elements must be numbers&quot;);
    }
    total += element;
  }
  return total;
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>sum([1,2,3])</code></p></td><td class="confluenceTd"><p>6</p></td></tr><tr><td class="confluenceTd"><p><code>sum(1, 2, 3);</code></p></td><td class="confluenceTd"><p><code>TypeError</code>: 1 is not iterable</p></td></tr><tr><td class="confluenceTd"><p><code>sum([1,2,&quot;3&quot;]);</code></p></td><td class="confluenceTd"><p><code>TypeError</code>: element 2 is not a number</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-FunctionsasValues">Functions as Values</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function square(x) { return x * x; }</pre>
</div></div></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 137.0px;"/><col style="width: 621.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let s = square;</code></p></td></tr><tr><td class="confluenceTd"><p><code>square(4)</code></p></td><td class="confluenceTd"><p>16</p></td></tr><tr><td class="confluenceTd"><p><code>s(4)</code></p></td><td class="confluenceTd"><p>16</p></td></tr></tbody></table></div><p>Functions can also be assigned to object properties rather than variables.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let o = {square: function(x) { return x*x; }};</code></p></td></tr><tr><td class="confluenceTd"><p><code>let y = o.square(16);</code></p></td><td class="confluenceTd"><p>256</p></td></tr></tbody></table></div><p>Functions don’t even require names at all, as when they’re assigned to array elements:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let a = [x =&gt; x*x, 20];</code></p></td></tr><tr><td class="confluenceTd"><p><code>a[0](a[1])</code></p></td><td class="confluenceTd"><p>400</p></td></tr></tbody></table></div><p><code>a[0]</code> accesses first element of the array, which is &quot;<code>x =&gt; x*x</code>&quot;, <code>(a[1])</code> passes parameter, which is 20.</p><h3 id="JavaScriptDefinitiveGuide-Examplesofusingfunctionsasdata">Examples of using functions as data</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 513.0px;"/><col style="width: 245.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function add(x,y) { return x + y; }
function subtract(x,y) { return x - y; }
function multiply(x,y) { return x * y; }
function divide(x,y) { return x / y; }</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function operate(operator, operand1, operand2) {
  return operator(operand1, operand2);
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>let i = operate(add, operate(add, 2, 3), operate(multiply, 4,5));</code></p></td><td class="confluenceTd"><p><code>(2+3) + (4*5):</code></p></td></tr></tbody></table></div><p>or:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 496.0px;"/><col style="width: 262.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const operators = {
  add: (x,y) =&gt; x+y,
  subtract: (x,y) =&gt; x-y,
  multiply: (x,y) =&gt; x*y,
  divide: (x,y) =&gt; x/y,
  pow: Math.pow 
};</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function operate2(operation, operand1, operand2) {
  if (typeof operators[operation] === &quot;function&quot;) {
    return operators[operation](operand1, operand2);
  }
  else throw &quot;unknown operator&quot;;
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>operate2(&quot;add&quot;, &quot;hello&quot;, operate2(&quot;add&quot;, &quot; &quot;, &quot;world&quot;)) </code></p></td><td class="confluenceTd"><p>// &quot;hello world&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>operate2(&quot;pow&quot;, 10, 2)</code></p></td><td class="confluenceTd"><p>100</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-DefiningYourOwnFunctionProperties">Defining Your Own Function Properties</h2><p>When a function needs a “static” variable whose value persists across invocations, it is often convenient to use a property of the function itself.</p><p>For example, suppose you want to write a function that returns a unique integer whenever it is invoked. The function must never return the same value twice. In order to manage this, the function needs to keep track of the values it has already returned, and this information must persist across function invocations.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">uniqueInteger.counter = 0;
function uniqueInteger() {
  return uniqueInteger.counter++;
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">uniqueInteger()</pre>
</div></div></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">uniqueInteger()</pre>
</div></div></td><td class="confluenceTd"><p>1</p></td></tr></tbody></table></div><p>Compute factorials and cache results as properties of the function itself.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function factorial(n) {
  if (Number.isInteger(n) &amp;&amp; n &gt; 0) { 
    if (!(n in factorial)) { 
      factorial[n] = n * factorial(n-1);
    }
    return factorial[n]; 
  } 
  else {
    return NaN; 
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">factorial[1] = 1;</pre>
</div></div></td><td class="confluenceTd"><p>Initialize the cache to hold this base case.</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">factorial(6)</pre>
</div></div></td><td class="confluenceTd"><p>720</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">factorial[5]</pre>
</div></div></td><td class="confluenceTd"><p>120; the call above caches this value</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-FunctionsasNamespaces">Functions as Namespaces</h2><p>Variables declared within a function are not visible outside of the function. For this reason, it is sometimes useful to define a function simply to act as a temporary namespace in which you can define variables without cluttering the global namespace.</p><p>Variables that would have been global become local to the function. Following code defines only a single global variable: the function name <code>chunkNamespace</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function chunkNamespace() {
  // Chunk of code goes here
  // Any variables defined in the chunk are local to this function 
  // instead of cluttering up the global namespace.
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">chunkNamespace();</pre>
</div></div></td></tr></tbody></table></div><p>If defining even a single property is too much, you can define and invoke an anonymous function in a single expression - IIEF (immediately invoked function expression)</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">(function() { 
// chunkNamespace() function rewritten as an unnamed expression.
// Chunk of code goes here
}());</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Closures">Closures</h2><p>JavaScript uses lexical scoping. This means that functions are executed using the variable scope that was in effect when they were defined, not the variable scope that is in effect when they are invoked.</p><p>In order to implement lexical scoping, the internal state of a JavaScript function object must include not only the code of the function but also a reference to the scope in which the function definition appears.</p><p>This combination of a function object and a scope (a set of variable bindings) in which the function’s variables are resolved is called a closure.</p><p>Closures become interesting when they are invoked from a different scope than the one they were defined in. This happens most commonly when a nested function object is returned from the function within which it was defined.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let scope = &quot;global scope&quot;;

function checkscope() {
  let scope = &quot;local scope&quot;; 
  function f() { return scope; } 
  return f();
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>checkscope()</code></p></td><td class="confluenceTd"><p>&quot;local scope&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let scope = &quot;global scope&quot;;

function checkscope() {
  let scope = &quot;local scope&quot;; 
  function f() { return scope; } 
  return f;
}</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>let s = checkscope()();</code></p></td><td class="confluenceTd"><p>&quot;local scope&quot;</p></td></tr></tbody></table></div><p>Closures capture the local variables of a single function invocation and can use those variables as private state.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let uniqueInteger = (function() { 
  let counter = 0; 
  return function() { return counter++; };
}());</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>uniqueInteger()</code></p></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p><code>uniqueInteger()</code></p></td><td class="confluenceTd"><p>1</p></td></tr></tbody></table></div><p>it is the return value of the function that is being assigned to <code>uniqueInteger</code>.</p><p>Private variables like counter need not be exclusive to a single closure: it is perfectly possible for two or more nested functions to be defined within the same outer function and share the same scope.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function counter() {
  let n = 0;
  return {
    count: function() { return n++; },
    reset: function() { n = 0; }
  };
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let c = counter(), d = counter();</code></p></td></tr><tr><td class="confluenceTd"><p><code>c.count()</code></p></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p><code>d.count()</code></p></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p><code>c.reset();</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>c.count()</code></p></td><td class="confluenceTd"><p>0</p></td></tr><tr><td class="confluenceTd"><p><code>d.count()</code></p></td><td class="confluenceTd"><p>1</p></td></tr></tbody></table></div><p>You can combine this closure technique with property getters and setters</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function counter(n) { 
  return {
    get count() { return n++; },
    set count(m) {
      if (m &gt; n) n = m;
      else throw Error(&quot;count can only be set to a larger value&quot;)
    }
  };
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let c = counter(1000);</code></p></td></tr><tr><td class="confluenceTd"><p><code>c.count</code></p></td><td class="confluenceTd"><p>1000</p></td></tr><tr><td class="confluenceTd"><p><code>c.count</code></p></td><td class="confluenceTd"><p>1001</p></td></tr><tr><td class="confluenceTd"><p><code>c.count = 2000;</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>c.count</code></p></td><td class="confluenceTd"><p>2000</p></td></tr><tr><td class="confluenceTd"><p><code>c.count = 2000;</code></p></td><td class="confluenceTd"><p>Error: count can only be set to a larger value</p></td></tr></tbody></table></div><p>Define a private variable and two nested functions to get and set the value of that variable.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function addPrivateProperty(o, name, predicate) {
  let value; 
  o[`get${name}`] = function() { return value; };
  o[`set${name}`] = function(v) {
    if (predicate &amp;&amp; !predicate(v)) {
      throw new TypeError(`set${name}: invalid value ${v}`);
    }
    else {
      value = v;
    }
  };
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>let o = {};</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>addPrivateProperty(o, &quot;Name&quot;, x =&gt; typeof x === &quot;string&quot;);</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>o.setName(&quot;Frank&quot;);</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>o.getName()</code></p></td><td class="confluenceTd"><p>&quot;Frank&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>o.setName(0);</code></p></td><td class="confluenceTd"><p>TypeError: try to set a value ofthe wrong type</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-FunctionProperties,Methods,andConstructor">Function Properties, Methods, and Constructor</h2><p>Since functions are objects, they can have properties and methods, just like any other object.</p><h3 id="JavaScriptDefinitiveGuide-ThelengthProperty">The length Property</h3><p>The read-only length property of a function specifies the arity of the function—the number of parameters it declares in its parameter list, which is usually the number of arguments that the function expects.</p><h3 id="JavaScriptDefinitiveGuide-ThenameProperty">The name Property</h3><p>This property is primarily useful when writing debugging or error messages.</p><h3 id="JavaScriptDefinitiveGuide-TheprototypeProperty">The prototype Property</h3><p>When a function is used as a constructor, the newly created object inherits properties from the prototype object.</p><h3 id="JavaScriptDefinitiveGuide-Thecall()andapply()Methods">The call() and apply() Methods</h3><p><code>call()</code> and <code>apply()</code> allow you to indirectly invoke a function as if it were a method of some other object. The first argument to both <code>call()</code> and <code>apply()</code> is the object on which the function is to be invoked; this argument is the invocation context and becomes the value of the <code>this</code> keyword within the body of the function.</p><p>To invoke the function<code> f()</code> as a method of the object o (passing no arguments),</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>f.call(o);</code></p></td></tr><tr><td class="confluenceTd"><p><code>f.apply(o);</code></p></td></tr></tbody></table></div><p>To pass two numbers to the function <code>f()</code> and invoke it as if it were a method of the object o,</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">f.call(o, 1, 2);</pre>
</div></div></td></tr></tbody></table></div><p>The <code>apply()</code> method is like the <code>call()</code> method, except that the arguments to be passed to the function are specified as an array:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">f.apply(o, [1,2]);</pre>
</div></div></td></tr></tbody></table></div><p>The <code>trace() </code>function defined uses the <code>apply() </code>method instead of a spread operator, and by doing that, it is able to invoke the wrapped method with the same arguments and the same this value as the wrapper method</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function trace(o, m) {
  let original = o[m]; 
  o[m] = function(...args) {
    console.log(new Date(), &quot;Entering:&quot;, m); 
    let result = original.apply(this, args);
    console.log(new Date(), &quot;Exiting:&quot;, m); 
    return result; 
  };
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Thebind()Method">The bind() Method</h3><p>The primary purpose of <code>bind()</code> is to bind a function to an object.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>function f(y) { return this.x + y; }</code></p></td></tr><tr><td class="confluenceTd"><p><code>let o = { x: 1 };</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let g = f.bind(o);</code></p></td></tr><tr><td class="confluenceTd"><p><code>g(2)</code></p></td><td class="confluenceTd"><p>3</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let p = { x: 10, g };</code></p></td></tr><tr><td class="confluenceTd"><p><code>p.g(2)</code></p></td><td class="confluenceTd"><p>3 // g is still bound to o, not p.</p></td></tr></tbody></table></div><p>The most common use case for calling <code>bind()</code> is to make non-arrow functions behave like arrow functions.</p><p>Partial application is a common technique in functional programming and is sometimes called <code>currying</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let sum = (x,y) =&gt; x + y;</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let succ = sum.bind(null, 1);</code></p></td></tr><tr><td class="confluenceTd"><p><code>succ(2)</code></p></td><td class="confluenceTd"><p>3</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ThetoString()Method">The toString() Method</h3><p>Most (but not all) implementations of this <code>toString()</code> method return the complete source code for the function</p><h3 id="JavaScriptDefinitiveGuide-TheFunction()Constructor">The Function() Constructor</h3><p>The Function() constructor is best thought of as a globally scoped version of <code>eval()</code>  that defines new variables and functions in its own private scope. You will probably never need to use this constructor in your code.</p><h2 id="JavaScriptDefinitiveGuide-FunctionalProgramming">Functional Programming</h2><h3 id="JavaScriptDefinitiveGuide-ProcessingArrayswithFunctions">Processing Arrays with Functions</h3><p>Skipping</p><h3 id="JavaScriptDefinitiveGuide-Higher-OrderFunctions">Higher-Order Functions</h3><p>A higher-order function is a function that operates on functions, taking one or more functions as arguments and returning a new function.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function not(f) {
  return function(...args) { 
    let result = f.apply(this, args);
    return !result; 
  };
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>const even = x =&gt; x % 2 === 0;</code></p></td><td class="confluenceTd"><p>A function to determine if a number is even</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>const odd = not(even);</code></p></td></tr><tr><td class="confluenceTd"><p><code>[1,1,3,5,5].every(odd)</code></p></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p>Returns a new function that maps one array to another</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const map = function(a, ...args) { return a.map(...args); };</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function mapper(f) {
  return a =&gt; map(a, f);
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const increment = x =&gt; x + 1;</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const incrementAll = mapper(increment);</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">incrementAll([1,2,3]</pre>
</div></div></td><td class="confluenceTd"><p>[2,3,4]</p></td></tr></tbody></table></div><p>Example that takes two functions, f and g, and returns a new function that computes f(g()):</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 244.0px;"/><col style="width: 514.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function compose(f, g) {
  return function(...args) {
    return f.call(this, g.apply(this, args));
  };
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>const sum = (x,y) =&gt; x+y;</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>const square = x =&gt; x*x;</code></p></td></tr><tr><td class="confluenceTd"><p><code>compose(square, sum)(2,3)</code></p></td><td class="confluenceTd"><p>25</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Memoization">Memoization</h3><p>We defined a factorial function that cached its previously computed results. In functional programming, this kind of caching is called memoization.</p><h1 id="JavaScriptDefinitiveGuide-Classes">Classes</h1><p>JavaScript’s classes and prototype-based inheritance mechanism are substantially different from the classes and class-based inheritance mechanism of Java.</p><h2 id="JavaScriptDefinitiveGuide-ClassesandPrototypes">Classes and Prototypes</h2><p>If we define a prototype object and then use <code>Object.create()</code> to create objects that inherit from it, we have defined a JavaScript class.</p><p>Factory function that returns a new range object:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 187.0px;"/><col style="width: 571.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function range(from, to) {
  let r = Object.create(range.methods);
  r.from = from;
  r.to = to;
  return r;
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">range.methods = {
  includes(x) { return this.from &lt;= x &amp;&amp; x &lt;= this.to; },
  *[Symbol.iterator]() {
    for(let x = Math.ceil(this.from); x &lt;= this.to; x++)
      yield x;
  },
  toString() { return &quot;(&quot; + this.from + &quot;...&quot; + this.to +&quot;)&quot;; }
};</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let r = range(1,3);</code></p></td></tr><tr><td class="confluenceTd"><p><code>r.includes(2)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>r.toString()</code></p></td><td class="confluenceTd"><p>&quot;(1...3)&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>[...r]</code></p></td><td class="confluenceTd"><p>[1, 2, 3]</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ClassesandConstructors">Classes and Constructors</h2><p>A constructor is a function designed for the initialization of newly created objects.</p><p>The critical feature of constructor invocations is that the <code>prototype</code> property of the constructor is used as the prototype of the new object.</p><p>While almost all objects have a prototype, only a few objects have a <code>prototype</code> property. It is function objects that have a <code>prototype</code> property.</p><p>This means that all objects created with the same constructor function inherit from the same object and are therefore members of the same class.</p><p>A Range class using a constructor</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 284.0px;"/><col style="width: 476.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function Range(from, to) {
  this.from = from;
  this.to = to;
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Range.prototype = {
  includes: function(x) { return this.from &lt;= x &amp;&amp; x &lt;= this.to; },
  [Symbol.iterator]: function*() {
    for(let x = Math.ceil(this.from); x &lt;= this.to; x++)
      yield x;
  },
  toString: function() { return &quot;(&quot; + this.from + &quot;...&quot; + this.to + &quot;)&quot;; }
};</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let r = new Range(1,3);</code></p></td></tr><tr><td class="confluenceTd"><p><code>r.includes(2)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>r.toString()</code></p></td><td class="confluenceTd"><p>&quot;(1...3)&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>[...r]</code></p></td><td class="confluenceTd"><p>[1, 2, 3]</p></td></tr></tbody></table></div><p>Because the <code>Range() </code>constructor is invoked with <code>new</code>, it does not have to call <code>Object.create()</code> or take any action to create a new object.</p><p>In the first example, the prototype was <code>range.methods</code>. This was a convenient and descriptive name, but arbitrary. In the second example, the prototype is <code>Range.prototype</code>, and this name is mandatory. </p><p>An invocation of the <code>Range()</code> constructor automatically uses <code>Range.prototype</code> as the prototype of the <code>new Range</code> object.</p><h3 id="JavaScriptDefinitiveGuide-Constructors,ClassIdentity,andinstanceof">Constructors, Class Identity, and instanceof</h3><p>Two objects are instances of the same class if and only if they inherit from the same prototype object.</p><p>The <code>instanceof</code> operator is not checking whether <code>r</code> was actually initialized by the Range constructor. Instead, it is checking whether <code>r</code> inherits from <code>Range.prototype</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function Strange() {}
Strange.prototype = Range.prototype;</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">new Strange() instanceof Range</pre>
</div></div></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p>If you want to test the prototype chain of an object for a specific prototype and do not want to use the constructor function as an intermediary, you can use the <code>isPrototypeOf()</code> method</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">range.methods.isPrototypeOf(r);</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-TheconstructorProperty">The constructor Property</h3><p>Every regular JavaScript function automatically has a <code>prototype</code> property. The value of this property is an object that has a single, non-enumerable <code>constructor</code> property. </p><p>The value of the <code>constructor</code> property is the function object</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let F = function() {};</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let p = F.prototype;</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let c = p.constructor;</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">c === F</pre>
</div></div></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let o = new F();</code></p></td></tr><tr><td class="confluenceTd"><p><code>o.constructor === F</code></p></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p>Instances of the Range class, as defined, do not have a constructor property. We can remedy this problem by explicitly adding a constructor to the prototype:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Range.prototype = {
  constructor: Range
};</pre>
</div></div></td></tr></tbody></table></div><p>Another common technique that you are likely to see in older JavaScript code is to use the predefined prototype object with its constructor property and add methods to it one at a time with code like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Range.prototype.includes = function(x) {
  return this.from &lt;= x &amp;&amp; x &lt;= this.to;
};
Range.prototype.toString = function() {
  return &quot;(&quot; + this.from + &quot;...&quot; + this.to + &quot;)&quot;;
};</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ClasseswiththeclassKeyword">Classes with the class Keyword</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Range {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }
  includes(x) { return this.from &lt;= x &amp;&amp; x &lt;= this.to; }
  *[Symbol.iterator]() {
    for(let x = Math.ceil(this.from); x &lt;= this.to; x++)
      yield x;
  }
  toString() { return `(${this.from}...${this.to})`; }
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let r = new Range(1,3);</code></p></td></tr><tr><td class="confluenceTd"><p><code>r.includes(2)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>r.toString()</code></p></td><td class="confluenceTd"><p>(1...3)</p></td></tr><tr><td class="confluenceTd"><p><code>[...r]</code></p></td><td class="confluenceTd"><p>[1, 2, 3]</p></td></tr></tbody></table></div><p>Although class bodies are superficially similar to object literals, they are not the same thing. In particular, they do not support the definition of properties with name/value pairs.</p><p>If your class does not need to do any initialization, you can omit the constructor keyword and its body, and an empty constructor function will be implicitly created for you.</p><p>If you want to define a class that subclasses - or inherits from - another class, you can use the <code>extends</code> keyword with the class keyword:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Span extends Range {
  constructor(start, length) {
    if (length &gt;= 0) {
      super(start, start + length);
    }
    else {
      super(start + length, start);
    }
  }
}</pre>
</div></div></td></tr></tbody></table></div><p>class declarations have both statement and expression forms</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let Square = class { constructor(x) { this.area = x * x; } };</code></p></td></tr><tr><td class="confluenceTd"><p><code>new Square(3).area</code></p></td><td class="confluenceTd"><p>9</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Staticmethods">Static methods</h3><p>You can define a <code>static</code> method within a class body by prefixing the method declaration with the <code>static</code> keyword. Static methods are defined as properties of the constructor function rather than properties of the prototype object.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">static parse(s) {
  let matches = s.match(/^\((\d+)\.\.\.(\d+)\)$/);
  if (!matches) {
    throw new TypeError(`Cannot parse Range from &quot;${s}&quot;.`)
  }
  return new Range(parseInt(matches[1]),
  parseInt(matches[2]));
}</pre>
</div></div></td></tr></tbody></table></div><p>The method defined by this code is <code>Range.parse()</code>, not <code>Range.prototype.parse()</code>, and you must invoke it through the constructor, not through an instance:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let r = Range.parse(&#39;(1...10)&#39;);</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Getters,Setters,andotherMethodForms">Getters, Setters, and other Method Forms</h3><p>Within a class body, you can define getter and setter methods  just as you can in object literals. The only difference is that in class bodies, you don’t put a comma after the getter or setter.</p><h3 id="JavaScriptDefinitiveGuide-Public,Private,andStaticFields">Public, Private, and Static Fields</h3><p>The ES6 standard only allows the creation of methods (including getters, setters, and generators) and static methods; it does not include syntax for defining fields.</p><p>If you want to define a field on a class instance, you must do that in the constructor function or in one of the methods. And if you want to define a static field for a class, you must do that outside the class body, after the class has been defined.</p><p>Standardization is underway, however, for extended class syntax that allows the definition of instance and static fields, in both public and private forms.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 431.0px;"/><col style="width: 65.0px;"/><col style="width: 464.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Buffer {
  constructor() {
    this.size = 0;
    this.capacity = 4096;
    this.buffer = new Uint8Array(this.capacity);
  }
}</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Buffer {
  size = 0;
  capacity = 4096;
  buffer = new Uint8Array(this.capacity);
}</pre>
</div></div></td></tr></tbody></table></div><p>The same proposal that seeks to standardize these instance fields also defines private (with the # prefix) instance fields.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Buffer {
  #size = 0;
  get size() { return this.#size; }
}</pre>
</div></div></td></tr></tbody></table></div><p>A related proposal seeks to standardize the use of the <code>static</code> keyword for fields.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">static integerRangePattern = /^\((\d+)\.\.\.(\d+)\)$/;
static parse(s) {
  let matches = s.match(Range.integerRangePattern);
  if (!matches) {
    throw new TypeError(`Cannot parse Range from &quot;${s}&quot;.`)
  }
  return new Range(parseInt(matches[1]), matches[2]);
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-AddingMethodstoExistingClasses">Adding Methods to Existing Classes</h2><p>We can augment JavaScript classes simply by adding new methods to their prototype objects.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">if (!String.prototype.startsWith) {
  String.prototype.startsWith = function(s) {
    return this.indexOf(s) === 0;
  };
}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Number.prototype.times = function(f, context) {
  let n = this.valueOf();
  for(let i = 0; i &lt; n; i++) f.call(context, i);
};</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Subclasses">Subclasses</h2><h3 id="JavaScriptDefinitiveGuide-SubclassesandPrototypes">Subclasses and Prototypes</h3><p>Span subclass of the Range class.  This subclass will work just like a Range, but instead of initializing it with a start and an end, we’ll instead specify a start and a distance, or span.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function Span(start, span) {
  if (span &gt;= 0) {
    this.from = start;
    this.to = start + span;
  }
  else {
    this.to = start;
    this.from = start + span;
  }
}</pre>
</div></div></td></tr></tbody></table></div><p>Ensure that the <code>Span</code> prototype inherits from the <code>Range</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Span.prototype = Object.create(Range.prototype);</pre>
</div></div></td></tr></tbody></table></div><p>We don't want to inherit <code>Range.prototype.constructor</code>, so we define our own constructor property:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Span.prototype.constructor = Span;</pre>
</div></div></td></tr></tbody></table></div><p><code>Span</code> overrides the <code>toString()</code> method</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>Span.prototype.toString = function() {</code><br/><code> return `(${this.from}... +${this.to - this.from})`;</code><br/><code>};</code></p></td></tr></tbody></table></div><p>A robust subclassing mechanism needs to allow classes to invoke the methods and constructor of their superclass, but prior to ES6, JavaScript did not have a simple way to do these things.</p><h3 id="JavaScriptDefinitiveGuide-Subclasseswithextendsandsuper">Subclasses with extends and super</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class EZArray extends Array {
  get first() { return this[0]; }
  get last() { return this[this.length-1]; }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>let a = new EZArray();</code></p></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><p><code>a instanceof EZArray</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>a instanceof Array</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>a.push(1,2,3,4);</code></p></td></tr><tr><td class="confluenceTd"><p><code>a.pop()</code></p></td><td class="confluenceTd"><p>4</p></td></tr><tr><td class="confluenceTd"><p><code>a.first</code></p></td><td class="confluenceTd"><p>1</p></td></tr><tr><td class="confluenceTd"><p><code>a.last</code></p></td><td class="confluenceTd"><p>3</p></td></tr><tr><td class="confluenceTd"><p><code>Array.isArray(a)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>EZArray.isArray(a)</code></p></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>Array.prototype.isPrototypeOf(EZArray.prototype</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>Array.isPrototypeOf(EZArray)</code></p></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p>Example demonstrates the use of the <code>super</code> keyword to invoke the constructor and methods of the superclass</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class TypedMap extends Map {
  constructor(keyType, valueType, entries) {
    if (entries) {
      for(let [k, v] of entries) {
        if (typeof k !== keyType || typeof v !== valueType) {
          throw new TypeError(`Wrong type for entry [${k}, ${v}]`);
        }
     }
   }
 
    super(entries);
    this.keyType = keyType;
    this.valueType = valueType;
  }
  set(key, value) {
    if (this.keyType &amp;&amp; typeof key !== this.keyType) {
      throw new TypeError(`${key} is not of type${this.keyType}`);
    }
    if (this.valueType &amp;&amp; typeof value !== this.valueType)
    {
      throw new TypeError(`${value} is not of type ${this.valueType}`);
    }
    return super.set(key, value);
  }
}</pre>
</div></div></td></tr></tbody></table></div><p>You may not use the <code>this</code> keyword in your constructor until after you have invoked the superclass constructor with <code>super()</code>. This enforces a rule that superclasses get to initialize themselves before subclasses do.</p><p>Once private fields are supported, we could change these properties to <code>#keyType</code> and <code>#valueType</code> so that they could not be altered from the outside.</p><h3 id="JavaScriptDefinitiveGuide-ClassHierarchiesandAbstractClasses">Class Hierarchies and Abstract Classes</h3><p>Define abstract classes—classes that do not include a complete implementation—to serve as a common superclass for a group of related subclasses.</p><h1 id="JavaScriptDefinitiveGuide-Modules">Modules</h1><h2 id="JavaScriptDefinitiveGuide-AutomatingClosure-BasedModularity">Automating Closure-Based Modularity</h2><p>Imagine a tool that takes a set of files, wraps the content of each of those files within an immediately invoked function expression, keeps track of the return value of each function, and concatenates everything into one big file.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const modules = {};
function require(moduleName) { return modules[moduleName]; }


modules[&quot;sets.js&quot;] = (function() {
  const exports = {};
  exports.BitSet = class BitSet { ... };
  return exports;
}());


modules[&quot;stats.js&quot;] = (function() {
  const exports = {};
  const sum = (x, y) =&gt; x + y;
  const square = x = &gt; x * x;
  exports.mean = function(data) { ... };
  exports.stddev = function(data) { ... };
  return exports;
}());</pre>
</div></div></td></tr></tbody></table></div><p>writing code like the following to make use of those modules</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const stats = require(&quot;stats.js&quot;);
const BitSet = require(&quot;sets.js&quot;).BitSet;
// Now write code using those modules
let s = new BitSet(100);
s.insert(10);
s.insert(20);
s.insert(30);
let average = stats.mean([...s]);</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ModulesinES6">Modules in ES6</h2><p>ES6 adds import and export keywords to JavaScript and finally supports real modularity as a core language feature.</p><p>ES6 modularity is conceptually the same as Node modularity: each file is its own module, and constants, variables, functions, and classes defined within a file are private to that module unless they are explicitly exported.</p><h3 id="JavaScriptDefinitiveGuide-ES6Exports">ES6 Exports</h3><p>To export a constant, variable, function, or class from an ES6 module, simply add the keyword export before the declaration</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">export const PI = Math.PI;

export function degreesToRadians(d) { return d * PI / 180; }

export class Circle {
  constructor(r) { this.r = r; }
  area() { return PI * this.r * this.r; }
}</pre>
</div></div></td></tr></tbody></table></div><p>or:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">export { Circle, degreesToRadians, PI };</pre>
</div></div></td></tr></tbody></table></div><p>It is common to write modules that export only one value (typically a function or class), and in this case, we usually use export <code>default</code> instead of <code>export</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">export default class BitSet {
  // implementation omitted
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ES6Imports">ES6 Imports</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">import BitSet from &#39;./bitset.js&#39;;</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">import { mean, stddev } from &quot;./stats.js&quot;;</pre>
</div></div></td></tr></tbody></table></div><p>When importing from a module that defines many exports, however, you can easily import everything with an import statement like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">import * as stats from &quot;./stats.js&quot;;</pre>
</div></div></td></tr></tbody></table></div><p>With the wildcard import shown in the previous example, the importing module would use the imported <code>mean()</code> and<code> stddev()</code> functions through the stats object, invoking them as <code>stats.mean()</code> and <code>stats.stddev()</code>.</p><p>Note: not finished.</p><h1 id="JavaScriptDefinitiveGuide-TheJavaScriptStandardLibrary">The JavaScript Standard Library</h1><h2 id="JavaScriptDefinitiveGuide-TheSetClass">The Set Class</h2><p>Sets are not ordered or indexed, and they do not allow duplicates.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let s = new Set();
let t = new Set([1, s]);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let t = new Set(s);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let unique = new Set(&quot;Mississippi&quot;);</pre>
</div></div></td></tr></tbody></table></div><p>The argument to the <code>Set()</code> constructor need not be an array: any iterable object (including other Set objects) is allowed.</p><p>The <code>add()</code> method takes a single argument; if you pass an array, it adds the array itself to the set, not the individual array elements. <code>add()</code> always returns the set it is invoked on, however, so if you want to add multiple values to a set, you can used chained method calls like.</p><p>it is very important to understand that set membership is based on strict equality checks, like the === operator performs.</p><p>The most important thing we do with sets is not to add and remove elements from them, but to check to see whether a specified value is a member of the set:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let oneDigitPrimes = new Set([2,3,5,7]);</code></p><p><code>oneDigitPrimes.has(2)</code></p></td></tr></tbody></table></div><p>The Set class is iterable, which means that you can use a <code>for/of</code> loop to enumerate all of the elements of a set:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let sum = 0;
for(let p of oneDigitPrimes) { 
  sum += p; // and add them up
}</pre>
</div></div></td></tr></tbody></table></div><p>Because Set objects are iterable, you can convert them to arrays and argument lists with the ... spread operator</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>[...oneDigitPrimes]</code></p></td></tr></tbody></table></div><p>JavaScript Set class always remembers the order that elements were inserted in, and it always uses this order when you iterate a set: the first element inserted will be the first one iterated (assuming you haven’t deleted it first), and the most recently inserted element will be the last one iterated.</p><p>Set class also implements a <code>forEach()</code> method</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let product = 1;
oneDigitPrimes.forEach(n =&gt; { product *= n; });</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-TheMapClass">The Map Class</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let m = new Map();
let n = new Map([[&quot;one&quot;, 1],[&quot;two&quot;, 2]]);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let copy = new Map(n);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = { x: 1, y: 2};
let p = new Map(Object.entries(o));</pre>
</div></div></td></tr></tbody></table></div><p>map is a set of keys, each of which has an associated value. This is not quite the same as a set of key/value pairs.</p><p>use <code>has()</code> to check whether a map includes the specified key; use <code>delete()</code> to remove a key (and its associated value) from the map; use <code>clear()</code> to remove all key/value pairs from the map; and use the size property to find out how many keys a map contains.</p><p><code>set()</code> method of Map can be chained.</p><p>Any JavaScript value can be used as a key or a value in a Map. This includes<code> null, undefined</code>, and <code>NaN</code>, as well as reference types like objects and arrays.</p><p>Map compares keys by identity, not by equality.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 233.0px;"/><col style="width: 525.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let m = new Map();</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>m.set({}, 1);</code></p></td></tr><tr><td class="confluenceTd"><p><code>m.set({}, 2);</code></p></td><td class="confluenceTd"><p>Map a different empty object to the number 2.</p></td></tr><tr><td class="confluenceTd"><p><code>m.get({})</code></p></td><td class="confluenceTd"><p>undefined:</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>m.set(m, undefined);</code></p></td></tr><tr><td class="confluenceTd"><p><code>m.has(m)</code></p></td><td class="confluenceTd"><p>true</p></td></tr><tr><td class="confluenceTd"><p><code>m.get(m)</code></p></td><td class="confluenceTd"><p>undefined</p></td></tr></tbody></table></div><p>Iterate over map:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let m = new Map([[&quot;x&quot;, 1], [&quot;y&quot;, 2]]);</code></p></td></tr><tr><td class="confluenceTd"><p><code>[...m]</code></p></td><td class="confluenceTd"><p>[[&quot;x&quot;, 1], [&quot;y&quot;, 2]]</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>for(let [key, value] of m) {...}</code></p></td></tr></tbody></table></div><p>Map class iterates in insertion order</p><p>If you want to iterate just the keys or just the associated values of a map, use the <code>keys()</code> and <code>values()</code> methods: these return iterable objects that iterate keys and values, in insertion order. (The<br/><code>entries()</code> method returns an iterable object that iterates key/value pairs, but this is exactly the same as iterating the map directly.)</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[...m.keys()] 
[...m.values()]
[...m.entries()]</pre>
</div></div></td></tr></tbody></table></div><p>Map objects can also be iterated using the <code>forEach()</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">m.forEach((value, key) =&gt; {...}</pre>
</div></div></td></tr></tbody></table></div><p>Note that the value parameter comes before the key parameter.</p><h2 id="JavaScriptDefinitiveGuide-WeakMapandWeakSet">WeakMap and WeakSet</h2><p>The <code>WeakMap </code>class is a variant (but not an actual subclass) of the Map class that does not prevent its key values from being garbage collected.</p><p><code>WeakMap </code>keys must be objects or arrays; primitive values are not subject to garbage collection and cannot be used as keys.</p><p>WeakMap implements only the<code> get(), set(), has(),</code> and <code>delete()</code> methods. In particular, <code>WeakMap</code> is not iterable and does not define <code>keys(), values(),</code> or <code>forEach()</code>. If WeakMap was iterable, then its keys would be reachable and it wouldn’t be weak.</p><p>Similarly, WeakMap does not implement the size property because the <code>size</code> of a WeakMap could change at any time as objects are garbage collected</p><h2 id="JavaScriptDefinitiveGuide-TypedArraysandBinaryData">Typed Arrays and Binary Data</h2><p>They differ from regular arrays in some very important ways</p><ul><li><p>The elements of a typed array are all numbers. Unlike regular JavaScript numbers, however, typed arrays allow you to specify the type (signed and unsigned integers and IEEE-754 floating point) and size (8 bits to 64 bits) of the numbers to be stored in the array.</p></li><li><p>You must specify the length of a typed array when you create it, and that length can never change.</p></li><li><p>The elements of a typed array are always initialized to 0 when the array is created.</p></li></ul><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 189.0px;"/><col style="width: 189.0px;"/><col style="width: 210.0px;"/><col style="width: 170.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Int8Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Uint8Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Uint8ClampedArray()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Int16Array()</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Uint32Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Uint16Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Int32Array()</pre>
</div></div></td><td class="confluenceTd"><p /></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">BigInt64Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">BigUint64Array()</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Float32Array()</pre>
</div></div></td><td class="confluenceTd"><p /></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let bytes = new Uint8Array(1024);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let matrix = new Float64Array(9);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let sudoku = new Int8Array(81);</pre>
</div></div></td></tr></tbody></table></div><p>Initialize with values</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let white = Uint8ClampedArray.of(255, 255, 255, 0);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let ints = Uint32Array.from(white);</pre>
</div></div></td></tr></tbody></table></div><p>one more way to create typed arrays that involves the <code>ArrayBuffer</code> type</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let buffer = new ArrayBuffer(1024*1024);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">buffer.byteLength</pre>
</div></div></td><td class="confluenceTd"><p>1024*1024</p></td></tr></tbody></table></div><p>Typed arrays are not true arrays, but they re-implement most array methods, so you can use them pretty much just like you’d use regular arrays:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let ints = new Int16Array(10);</code></p></td><td class="confluenceTd"><p>10 short integers</p></td></tr><tr><td class="confluenceTd"><p><code>ints.fill(3).map(x=&gt;x*x).join(&quot;&quot;)</code></p></td><td class="confluenceTd"><p>&quot;9999999999&quot;</p></td></tr></tbody></table></div><p>Remember that typed arrays have fixed lengths, so the length property is read-only, and methods that change the length of the array (such as<code> push(), pop(), unshift(), shift(),</code> and <code>splice()</code>) are not implemented for typed arrays. Methods that alter the contents of an array without changing the length (such as <code>sort(), reverse()</code>, and <code>fill()</code>) are implemented.</p><h3 id="JavaScriptDefinitiveGuide-DetermineEndianessandDataView">Determine Endianess and DataView</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let littleEndian = new Int8Array(new Int32Array([1]).buffer)
[0] === 1;</pre>
</div></div></td></tr></tbody></table></div><p>You can use the <code>DataView</code> class, which defines methods for reading and writing values from an <code>ArrayBuffer</code> with explicitly specified byte ordering. Refer to book for more examples.</p><h2 id="JavaScriptDefinitiveGuide-PatternMatchingwithRegularExpressions">Pattern Matching with Regular Expressions</h2><p>RegExp objects may be created with the <code>RegExp()</code> constructor, of course, but they are more often created using a special literal syntax.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 329.0px;"/><col style="width: 64.0px;"/><col style="width: 365.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let pattern = /s$/;</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let pattern = new RegExp(&quot;s$&quot;);</pre>
</div></div></td></tr></tbody></table></div><p>Regular expressions can also have one or more flag characters that affect how they work</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let pattern = /s$/i;</pre>
</div></div></td><td class="confluenceTd"><p>i = case insensitive</p></td></tr></tbody></table></div><p>Punctuation characters have special meanings in regular expressions: <code>^ $ . * + ? = ! : | \ / ( ) [ ] { }. </code>Other punctuation characters, such as quotation marks and @, do not have special meaning and simply match themselves literally in a regular expression.</p><p>If you use the <code>RegExp()</code> constructor, keep in mind that any backslashes in your regular expression need to be doubled, since strings also use backslashes as an escape character.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 145.0px;"/><col style="width: 613.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Character</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Matches</strong></p></th></tr><tr><td class="confluenceTd"><p><code>[...]</code></p></td><td class="confluenceTd"><p>Any one character between the brackets.</p></td></tr><tr><td class="confluenceTd"><p><code>[^...]</code></p></td><td class="confluenceTd"><p>Any one character not between the brackets</p></td></tr><tr><td class="confluenceTd"><p><code>.</code></p></td><td class="confluenceTd"><p>Any character except newline or another Unicode line terminator. Or, if the <code>RegExp</code> uses the s flag, then a period matches any character, including line terminators.</p></td></tr><tr><td class="confluenceTd"><p><code>\w</code></p></td><td class="confluenceTd"><p>Any ASCII word character. Equivalent to [a-zA-Z0-9_].</p></td></tr><tr><td class="confluenceTd"><p><code>\W</code></p></td><td class="confluenceTd"><p>Equivalent to [^a-zA-Z0-9_]</p></td></tr><tr><td class="confluenceTd"><p><code>\s</code></p></td><td class="confluenceTd"><p>Any Unicode whitespace character.</p></td></tr><tr><td class="confluenceTd"><p><code>\S</code></p></td><td class="confluenceTd"><p>Any character that is not Unicode whitespace.</p></td></tr><tr><td class="confluenceTd"><p><code>\d</code></p></td><td class="confluenceTd"><p>Equivalent to [0-9].</p></td></tr><tr><td class="confluenceTd"><p><code>\D</code></p></td><td class="confluenceTd"><p>Equivalent to [^0-9].</p></td></tr><tr><td class="confluenceTd"><p><code>[\b]</code></p></td><td class="confluenceTd"><p>A literal backspace (special case).</p></td></tr><tr><td class="confluenceTd"><p><code>[\s\d]</code></p></td><td class="confluenceTd"><p>Any one whitespace character or digit</p></td></tr></tbody></table></div><p>REPETITIONS</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 125.0px;"/><col style="width: 633.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Character</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Meaning</strong></p></th></tr><tr><td class="confluenceTd"><p><code>{n,m}</code></p></td><td class="confluenceTd"><p>Match the previous item at least n times but no more than m times</p></td></tr><tr><td class="confluenceTd"><p><code>{n,}</code></p></td><td class="confluenceTd"><p>Match the previous item n or more times.</p></td></tr><tr><td class="confluenceTd"><p><code>{n}</code></p></td><td class="confluenceTd"><p>Match exactly n occurrences of the previous item.</p></td></tr><tr><td class="confluenceTd"><p><code>?</code></p></td><td class="confluenceTd"><p>Equivalent to {0,1}.</p></td></tr><tr><td class="confluenceTd"><p><code>+</code></p></td><td class="confluenceTd"><p>Equivalent to {1,}</p></td></tr><tr><td class="confluenceTd"><p>*</p></td><td class="confluenceTd"><p>Equivalent to {0,}.</p></td></tr></tbody></table></div><p /><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 242.0px;"/><col style="width: 516.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Example</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Description</strong></p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let r = /\d{2,4}/;</pre>
</div></div></td><td class="confluenceTd"><p>Match between two and four digits</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">r = /\w{3}\d?/;</pre>
</div></div></td><td class="confluenceTd"><p>Match exactly three word characters and an optional digit</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">r = /\s+java\s+/;</pre>
</div></div></td><td class="confluenceTd"><p>Match &quot;java&quot; with one or more spaces before and after</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">r = /[^(]*/;</pre>
</div></div></td><td class="confluenceTd"><p>Match zero or more characters that are not open parens</p></td></tr></tbody></table></div><p>If you want to match repetitions of more complicated expressions, you’ll need to define a group with parentheses</p><p>Be careful when using the * and ? repetition characters. Since these characters may match zero instances of whatever precedes them, they are allowed to match nothing.</p><h3 id="JavaScriptDefinitiveGuide-NON-GREEDYREPETITION">NON-GREEDY REPETITION</h3><p>It is also possible to specify that repetition should be done in a non-greedy way. Simply follow the repetition character or characters with a question mark: <code>??, +?, *?</code>, or even {1,5}?.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>String</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Pattern</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Match</strong></p></th></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;aaa&quot;</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/a+/</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;aaa&quot;</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;aaa&quot;</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/a+?/</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;a&quot;</pre>
</div></div></td></tr></tbody></table></div><p>Note that using non-greedy repetition may not always produce the results you expect. This is because regular expression pattern matching is done by findingthe first position in the string at which a match is possible. Since a match is possible starting at the first character of the string, shorter matches starting at subsequent characters are never even considered.</p><h3 id="JavaScriptDefinitiveGuide-ALTERNATION,GROUPING,ANDREFERENCES">ALTERNATION, GROUPING, AND REFERENCES</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 87.0px;"/><col style="width: 265.0px;"/><col style="width: 406.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><p><strong>Char</strong></p></th><th class="confluenceTh"><p><strong>Pattern</strong></p></th><th class="confluenceTh"><p><strong>Pattern</strong></p></th></tr><tr><td rowspan="3" class="confluenceTd"><p><code>|</code></p></td><td class="confluenceTd"><p><code>/ab|cd|ef/</code></p></td><td class="confluenceTd"><p>“ab” or the string “cd” or the string “ef”.</p></td></tr><tr><td class="confluenceTd"><p><code>/\d{3}|[a-z]{4}/</code></p></td><td class="confluenceTd"><p>either three digits or four lowercase letters.</p></td></tr><tr><td class="confluenceTd"><p><code>/a|ab/</code></p></td><td class="confluenceTd"><p>matches only the first letter &quot;a&quot;</p></td></tr><tr><td rowspan="2" class="confluenceTd"><p><code>()</code></p></td><td class="confluenceTd"><p><code>/java(script)?/</code></p></td><td class="confluenceTd"><p>matches “java” followed by the optional “script”</p></td></tr><tr><td class="confluenceTd"><p><code>/(ab|cd)+|ef/</code></p></td><td class="confluenceTd"><p>matches “java” followed by the optional “script”</p></td></tr></tbody></table></div><p>If the left alternative matches, the right alternative is ignored, even if it would have produced a “better” match</p><p>Another purpose of parentheses in regular expressions is to define subpatterns within the complete pattern. When a regular expression is successfully matched against a target string, it is possible to extract the portions of the target string that matched any particular parenthesized subpattern. For example, suppose you are looking for one or more lowercase letters followed by one or more digits. You might use the pattern <code>/[a-z]+\d+/</code>. But suppose you only really care about the digits at the end of each match. If you put that part of the pattern in parentheses (/[a-z]+(\d+)/), you can extract the digits from any matches you find,</p><p>A related use of parenthesized subexpressions is to allow you to refer back to a subexpression later in the same regular expression. This is done by following a \ character by a digit or digits. The digits refer to the position of the parenthesized subexpression within the regular expression. For example, \1 refers back to the first subexpression, and \3 refers to the third.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Match</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Pattern</strong></p></th></tr><tr><td class="confluenceTd"><p>zero or more characters within single or double quotes. However, it does not<br/>require the opening and closing quotes to match</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/[&#39;&quot;][^&#39;&quot;]*[&#39;&quot;]/</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p>To require the quotes to match,use a reference</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">/([&#39;&quot;])[^&#39;&quot;]*\1/</pre>
</div></div></td></tr></tbody></table></div><p /><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 127.0px;"/><col style="width: 631.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Character</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Meaning</strong></p></th></tr><tr><td class="confluenceTd"><p>|</p></td><td class="confluenceTd"><p>match either the subexpression to the left or the subexpression to the right.</p></td></tr><tr><td class="confluenceTd"><p>(...)</p></td><td class="confluenceTd"><p>Grouping: group items into a single unit that can be used with *, +, ?, |, and so on. Also remember the characters that match this group for use with later references</p></td></tr><tr><td class="confluenceTd"><p>(?:...)</p></td><td class="confluenceTd"><p>group items into a single unit, but do not remember the characters that match this group.</p></td></tr></tbody></table></div><p>Note<code> (?:...)</code> syntax:</p><p>In pattern<code> &quot;/([Jj]ava(?:[Ss]cript)?)\sis\s(fun\w*)/</code>&quot; <code>\2</code> refers to the text matched by <code>(fun\w*)</code> since <code>(?:[Ss]cript)?)</code> in not remembered.</p><h3 id="JavaScriptDefinitiveGuide-SPECIFYINGMATCHPOSITION">SPECIFYING MATCH POSITION</h3><p><em>regular expression anchors</em> because they anchor the pattern to a specific position in the search string. The most commonly used anchor elements are ^, which ties the pattern to the beginning of the string, and $, which anchors the pattern to the end of the string.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Example</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Pattern</strong></p></th></tr><tr><td class="confluenceTd"><p>match the word “JavaScript” on a line by itself</p></td><td class="confluenceTd"><p><code>/^JavaScript$/</code></p></td></tr></tbody></table></div><p>To search for “Java” as a word by itself you can try the pattern <code>/\sJava\s/</code>, which requires a space before and after the word. But there are two problems with this solution. First, it does not match “Java” at the beginning or the end of a string, but only if it appears with space on either side. Second, when this pattern does find a match, the matched string it returns has leading and trailing spaces, which is not quite what’s needed. So instead of matching actual space characters with \s, match (or anchor to) word boundaries with \b. The resulting expression is <code>/\bJava\b/</code>.</p><p>The element <code>\B</code> anchors the match to a location that is not a word boundary. Thus, the pattern <code>/\B[Ss]cript/</code> matches “JavaScript” and “postscript”, but not “script” or “Scripting”.</p><p>You can also use arbitrary regular expressions as anchor conditions.</p><p>If you include an expression within <code>(?= and )</code> characters, it is a lookahead assertion, and it specifies that the enclosed characters must match, without actually matching them.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Example</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Pattern</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Matches</strong></p></th></tr><tr><td class="confluenceTd"><p>to match the name of a common programming language, but only if it is followed by a colon</p></td><td class="confluenceTd"><p><code>/[Jj]ava([Ss]cript)?(?=\:)/</code></p></td><td class="confluenceTd"><p>matches the word “JavaScript” in “JavaScript: The DefinitiveGuide”</p><p>does not match “Java” in “Java in a Nutshell”</p></td></tr></tbody></table></div><p>If you instead introduce an assertion with <code>(?!</code>, it is a negative lookahead assertion.</p><h3 id="JavaScriptDefinitiveGuide-FLAGS">FLAGS</h3><p>Flags are specified after the second / character of a regular expression literal or as a string passed as the second argument to the RegExp() constructor.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 59.0px;"/><col style="width: 699.0px;"/></colgroup><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Flag</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Meaning</strong></p></th></tr><tr><td class="confluenceTd"><p>g</p></td><td class="confluenceTd"><p>“global”—that is,that we intend to use it to find all matches within a string rather than just finding the first <a href="http://match.it" class="external-link" rel="nofollow">match.it</a> does alter the behavior of the String <code>match()</code> method and the <code>RegExp exec()</code> method in important ways.</p></td></tr><tr><td class="confluenceTd"><p>i</p></td><td class="confluenceTd"><p>case-insensitive</p></td></tr><tr><td class="confluenceTd"><p>m</p></td><td class="confluenceTd"><p>“multiline” mode</p></td></tr><tr><td class="confluenceTd"><p>s</p></td><td class="confluenceTd"><p>useful when working with text that includes newlines.Normally, a “.” in a regular expression matches any character except a line terminator. When the s flag is used, however, “.” will match any character, including line terminators.</p></td></tr><tr><td class="confluenceTd"><p>u</p></td><td class="confluenceTd"><p>Unicode.</p><p>Setting the u flag on a RegExp also allows you to use the new <code>\u{...}</code> escape sequence for Unicode character and also enables the \p{...} notation for Unicode character classes.</p></td></tr><tr><td class="confluenceTd"><p>y</p></td><td class="confluenceTd"><p>“sticky”. should match at the beginning of a string or at the first character following the previous match</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-StringMethodsforPatternMatching">String Methods for Pattern Matching</h2><h3 id="JavaScriptDefinitiveGuide-SEARCH()">SEARCH()<br/></h3><p>Strings support four methods that use regular expressions.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>&quot;JavaScript&quot;.search(/script/ui)</code></p></td><td class="confluenceTd"><p>4</p></td></tr><tr><td class="confluenceTd"><p><code>&quot;Python&quot;.search(/script/ui)</code></p></td><td class="confluenceTd"><p>-1</p></td></tr></tbody></table></div><p><code>search()</code> does not support global searches; it ignores the <code>g</code> flag of its regular expression argument.</p><p>REPLACE()</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>text.replace(/javascript/gi, &quot;JavaScript&quot;);</code></p></td><td class="confluenceTd"><p>No matter how it is capitalized, replace it with the correct capitalization</p></td></tr></tbody></table></div><p>parenthesized subexpressions of a regular expression are numbered from left to right and that the regular expression remembers the text that each subexpression matches.</p><p>to replace quotation marks in a string with other characters:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let quote = /&quot;([^&quot;]*)&quot;/g;</code></p></td></tr><tr><td class="confluenceTd"><p><code>'He said &quot;stop&quot;'.replace(quote, '«$1»')</code></p></td><td class="confluenceTd"><p>'He said «stop»'</p></td></tr></tbody></table></div><p>If your RegExp uses named capture groups, then you can refer to the matching text by name rather than by number:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let quote = /&quot;(?&lt;quotedText&gt;[^&quot;]*)&quot;/g;</code></p></td></tr><tr><td class="confluenceTd"><p><code>'He said &quot;stop&quot;'.replace(quote, '«$&lt;quotedText&gt;»')</code></p></td><td class="confluenceTd"><p>'He said «stop»'</p></td></tr></tbody></table></div><p>Instead of passing a replacement string as the second argument to replace(), you can also pass a function that will be invoked to compute the replacement value.</p><p>Example to convert decimal integers in a string to hexadecimal:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let s = &quot;15 times 15 is 225&quot;;</code></p></td></tr><tr><td class="confluenceTd"><p><code>s.replace(/\d+/gu, n =&gt; parseInt(n).toString(16))</code></p></td><td class="confluenceTd"><p>&quot;f times f is e1&quot;</p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-MATCH()">MATCH()</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>&quot;7 plus 8 equals 15&quot;.match(/\d+/g)</code></p></td><td class="confluenceTd"><p>[&quot;7&quot;, &quot;8&quot;, &quot;15&quot;]</p></td></tr></tbody></table></div><p>If the regular expression does not have the <code>g</code> flag set, <code>match()</code> does not do a global search; it simply searches for the first match. In this nonglobal case, <code>match()</code> still returns an array, but the array elements are completely different.</p><p>Thus, if <code>match()</code> returns an array a, a[0] contains the complete match, a[1] contains the substring that matched the first parenthesized expression, and so on.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 287.0px;"/><col style="width: 488.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let url = /(\w+):\/\/([\w.]+)\/(\S*)/;
let text = &quot;Visit my blog at http://www.example.com/~david&quot;;
let match = text.match(url);
let fullurl, protocol, host, path;
if (match !== null) {</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">  fullurl = match[0];</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="http://www.example.com/~david" class="external-link" rel="nofollow">http://www.example.com/~david</a>&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">  protocol = match[1];</pre>
</div></div></td><td class="confluenceTd"><p>&quot;http&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">  host = match[2];</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="http://www.example.com/" class="external-link" rel="nofollow">www.example.com</a>&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">  path = match[3];</pre>
</div></div></td><td class="confluenceTd"><p>&quot;~david&quot;</p></td></tr></tbody></table></div><p>In this non-global case, the array returned by match() also has some object properties in addition to the numbered array elements.</p><p>input property refers to the string on which match() was called</p><p>The index property is the position within that string at which the match starts.</p><p>if the regular expression contains named capture groups, then the returned array also has a groups property whose value is an object.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 260.0px;"/><col style="width: 500.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let url = /(?&lt;protocol&gt;\w+):\/\/(?&lt;host&gt;[\w.]+)\/(?&lt;path&gt;\S*)/;</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let text = &quot;Visit my blog at http://www.example.com/~david&quot;;</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let match = text.match(url);</code></p></td></tr><tr><td class="confluenceTd"><p><code>match[0]</code></p></td><td class="confluenceTd"><p>&quot;<a href="http://www.example.com/~david" class="external-link" rel="nofollow">http://www.example.com/~david</a>&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>match.input</code></p></td><td class="confluenceTd"><p>text</p></td></tr><tr><td class="confluenceTd"><p><code>match.index</code></p></td><td class="confluenceTd"><p>17</p></td></tr><tr><td class="confluenceTd"><p><code>match.groups.protocol</code></p></td><td class="confluenceTd"><p>&quot;http&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>match.groups.host</code></p></td><td class="confluenceTd"><p>&quot;<a href="http://www.example.com/" class="external-link" rel="nofollow">www.example.com</a>&quot;</p></td></tr><tr><td class="confluenceTd"><p><code>match.groups.path</code></p></td><td class="confluenceTd"><p>&quot;~david&quot;</p></td></tr></tbody></table></div><p>There are also important but less dramatic differences in behavior when the y flag is set. Refer to book for examples.</p><h3 id="JavaScriptDefinitiveGuide-MATCHALL()">MATCHALL()</h3><p>Instead of returning an array of matching substrings like <code>match()</code> does, however, it returns an iterator that yields the kind of match objects that match() returns when used with a non-global RegExp.</p><h3 id="JavaScriptDefinitiveGuide-SPLIT()">SPLIT()</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 317.0px;"/><col style="width: 441.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><p><code>&quot;123,456,789&quot;.split(&quot;,&quot;)</code></p></td><td class="confluenceTd"><p>[&quot;123&quot;, &quot;456&quot;,&quot;789&quot;]</p></td></tr><tr><td class="confluenceTd"><p><code>&quot;1, 2, 3,\n4, 5&quot;.split(/\s*,\s*/)</code></p></td><td class="confluenceTd"><p>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;,&quot;5&quot;]</p></td></tr></tbody></table></div><p>Surprisingly, if you call <code>split()</code> with a RegExp delimiter and the regular expression includes capturing groups, then the text that matches the capturing groups will be included in the returned array.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>const htmlTag = /&lt;([^&gt;]+)&gt;/;</code></p></td></tr><tr><td class="confluenceTd"><p><code>&quot;Testing&lt;br/&gt;1,2,3&quot;.split(htmlTag)</code></p></td><td class="confluenceTd"><p>[&quot;Testing&quot;, &quot;br/&quot;,&quot;1,2,3&quot;]</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-TheRegExpClass">The RegExp Class</h2><p>The <code>RegExp()</code> constructor is useful when a regular expression is being dynamically created and thus cannot be represented with the regular expression literal syntax.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let zipcode = new RegExp(&quot;\\d{5}&quot;, &quot;g&quot;);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>let exactMatch = /JavaScript/;</code><br/><code>let caseInsensitive = new RegExp(exactMatch, &quot;i&quot;);</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-TEST()">TEST()</h3><p>Returns true or false by calling <code>exec()</code>.</p><h3 id="JavaScriptDefinitiveGuide-EXEC()">EXEC()</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let pattern = /Java/g;
let text = &quot;JavaScript &gt; Java&quot;;
let match;
while((match = pattern.exec(text)) !== null) {
  console.log(`Matched ${match[0]} at ${match.index}`);
  console.log(`Next search begins at ${pattern.lastIndex}`);
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-THELASTINDEXPROPERTYANDREGEXPREUSE">THE LASTINDEX PROPERTY AND REGEXP REUSE</h3><p>The use of the <code>lastIndex</code> property with the g and y flags is a particularly awkward part of this API.  When you use these flags, you need to be particularly careful when calling the <code>match(), exec()</code>, or <code>test()</code> methods because the behavior of these methods depends on <code>lastIndex</code>, and the value of <code>lastIndex</code> depends on what you have previously done with the RegExp object.</p><p>To find the index of all &lt;p&gt; tags within a string of HTML text:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let match, positions = [];
while((match = /&lt;p&gt;/g.exec(html)) !== null) { 
  positions.push(match.index);
}</pre>
</div></div></td></tr></tbody></table></div><p>If the html string contains at least one &lt;p&gt; tag, then it will loop forever. For each iteration of the loop, we’re creating a new RegExp object with <code>lastIndex</code> set to 0, so <code>exec()</code> always begins at the start of the string, and if there is a match, it will keep matching over and over. The  solution, of course, is to define the RegExp once, and save it to a variable so that we’re using the same RegExp object for each iteration of the loop.</p><p>On the other hand, sometimes reusing a RegExp object is the wrong thing to do. Suppose, for example, that we want to loop through all of the words in a dictionary to find words that contain pairs of double letters.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 252.0px;"/><col style="width: 506.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let dictionary = [ &quot;apple&quot;, &quot;book&quot;, &quot;coffee&quot; ];
let doubleLetterWords = [];
let doubleLetter = /(\w)\1/g;
for(let word of dictionary) {
  if (doubleLetter.test(word)) {
    doubleLetterWords.push(word);
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>doubleLetterWords</code></p></td><td class="confluenceTd"><p>[&quot;apple&quot;, &quot;coffee&quot;]: &quot;book&quot; is missing!</p></td></tr></tbody></table></div><p>Because we set the g flag on the RegExp, the <code>lastIndex</code> property is changed after successful matches, and the <code>test()</code> method (which is based on <code>exec()</code>) starts searching for a match at the position specified by <code>lastIndex</code>. After matching the “pp” in “apple”, <code>lastIndex</code> is 3, and so we start searching the word “book” at position 3 and do not see the “oo” that it contains.</p><h2 id="JavaScriptDefinitiveGuide-DatesandTimes">Dates and Times</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 443.0px;"/><col style="width: 315.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let now = new Date();</pre>
</div></div></td><td class="confluenceTd"><p>The current time</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let epoch = new Date(0);</pre>
</div></div></td><td class="confluenceTd"><p>Midnight, January 1st, 1970, GMT</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let century = new Date(2100,
0, 
1,
2, 3, 4, 5);</pre>
</div></div></td><td class="confluenceTd"><p>Year 2100</p><p>January</p><p>1st</p><p>02:03:04.005, local</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let century = new Date(Date.UTC(2100, 0, 1));</pre>
</div></div></td><td class="confluenceTd"><p>Midnight in GMT, January 1, 2100</p></td></tr></tbody></table></div><p>If you print a date (with console.log(century), for example), it will, by default, be printed in your local time zone. If you want to display a date in UTC, you should explicitly convert it to a string with <code>toUTCString()</code> or<code> toISOString()</code>.</p><p>if you pass a string to the Date() constructor, it will attempt to parse that string as a date and time specification</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let century = new Date(&quot;2100-01-01T00:00:00Z&quot;);</code></p></td></tr></tbody></table></div><p>Once you have a Date object, various get and set methods allow you to query and modify the year, month, day-of-month, hour, minute, second, and millisecond fields of the Date. Each of these methods hastwo forms: one that gets or sets using local time and one that gets or sets using UTC time.</p><p>Note that the methods for querying the day-of-month are <code>getDate()</code> and <code>getUTCDate()</code>. The more natural-sounding functions <code>getDay()</code> and <code>getUTCDay()</code> return the day-of-week (0 for Sunday through 6 for Saturday). The day-of-week is read-only, so there is not a corresponding <code>setDay()</code> method.</p><h3 id="JavaScriptDefinitiveGuide-Timestamps">Timestamps</h3><p>JavaScript represents dates internally as integers that specify the number of milliseconds since (or before) midnight on January 1, 1970, UTC time.</p><p>For any Date object, the <code>getTime()</code> method returns this internal value, and the <code>setTime()</code> method sets it.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.setTime(d.getTime() + 30000);</pre>
</div></div></td><td class="confluenceTd"><p>add 30 secs</p></td></tr></tbody></table></div><p>The static Date.now() method returns the current time as a timestamp and is helpful when you want to measure how long your code takes to run</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let startTime = Date.now();
reticulateSplines(); // Do some time-consuming operation
let endTime = Date.now();
console.log(`Spline reticulation took ${endTime -startTime}ms.`);</pre>
</div></div></td></tr></tbody></table></div><p>adds three months and two weeks to the current date:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let d = new Date();</code><br/><code>d.setMonth(d.getMonth() + 3, d.getDate() + 14);</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-FormattingandParsingDateStrings">Formatting and Parsing Date Strings</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let d = new Date(2020, 0, 1, 17, 10, 30);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.toString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;Wed Jan 01 2020 17:10:30 GMT-0800 (Pacific Standard Time)&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.toUTCString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;Thu, 02 Jan 2020 01:10:30 GMT&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.toLocaleDateString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;1/1/2020&quot;: 'en-US' locale</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.toLocaleTimeString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;5:10:30 PM&quot;: 'en-US' locale</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">d.toISOString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;2020-01-02T01:10:30.000Z&quot;</p></td></tr></tbody></table></div><p>there is also a static Date.parse() method that takes a string as its argument, attempts to parse it as a date and time, and returns a timestamp representing that date. <code>Date.parse()</code> is able to parse the same strings that the <code>Date()</code> constructor can and is guaranteed to be able to parse the output of<code> toISOString(), toUTCString()</code>, and<code> toString()</code>.</p><h2 id="JavaScriptDefinitiveGuide-ErrorClasses">Error Classes</h2><p>One good reason to use an Error object is that, when you create an Error, it captures the state of the JavaScript stack, and if the exception is uncaught, the stack trace will be displayed with the error message, which will help you debug the issue.</p><p>Error objects have two properties: <code>message</code> and <code>name</code>, and a<code> toString()</code> method. Node and all modern browsers also define a <code>stack</code> property on Error objects.</p><p>Subclasses are <code>EvalError, RangeError, ReferenceError, SyntaxError, TypeError,</code> and <code>URIError</code>.</p><p>You should feel free to define your own Error subclasses that best encapsulate the error conditions of your own program.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 186.0px;"/><col style="width: 572.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class HTTPError extends Error {
  constructor(status, statusText, url) {
    super(`${status} ${statusText}: ${url}`);
    this.status = status;
    this.statusText = statusText;
    this.url = url;
  }
  get name() { return &quot;HTTPError&quot;; }
}</pre>
</div></div></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let error = new HTTPError(404, &quot;Not Found&quot;, &quot;http://example.com/&quot;);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">error.status</pre>
</div></div></td><td class="confluenceTd"><p>404</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">error.message</pre>
</div></div></td><td class="confluenceTd"><p>&quot;404 Not Found:<a href="http://example.com/" class="external-link" rel="nofollow">http://example.com/</a>&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">error.name</pre>
</div></div></td><td class="confluenceTd"><p>HTTPError</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-JSONSerializationandParsing">JSON Serialization and Parsing</h2><p>JavaScript supports JSON serialization and deserialization with the two functions <code>JSON.stringify()</code> and <code>JSON.parse().</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = {s: &quot;&quot;, n: 0, a: [true, false, null]};</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let s = JSON.stringify(o);</pre>
</div></div></td><td class="confluenceTd"><p>s == '{&quot;s&quot;:&quot;&quot;,&quot;n&quot;:0,&quot;a&quot;:[true,false,null]}'</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let copy = JSON.parse(s);</pre>
</div></div></td><td class="confluenceTd"><p>copy == {s: &quot;&quot;, n: 0, a:[true, false, null]}</p></td></tr></tbody></table></div><p>Inefficient way of creating a deep copy of an object</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function deepcopy(o) {
  return JSON.parse(JSON.stringify(o));
}</pre>
</div></div></td></tr></tbody></table></div><p>Typically, you pass only a single argument to <code>JSON.stringify()</code> and <code>JSON.parse()</code>. Both functions accept an optional second argument that allows us to extend the JSON format.</p><p><code>JSON.stringify()</code> also takes an optional third argument. If you would like your JSONformatted string to be human-readable (if it is being used as a configuration file, for example), then you should pass null as the second argument and pass a number or string as the third argument. If the third argument is a number, then it will use that number of spaces for each indentation level. If the third argument is a string of whitespace (such as '\t'), it will use that string for each level of indent.</p><h3 id="JavaScriptDefinitiveGuide-JSONCustomizations">JSON Customizations</h3><p>If <code>JSON.stringify()</code> is asked to serialize a value that is not natively supported by the JSON format, it looks to see if that value has a <code>toJSON()</code> method, and if so, it calls that method and then stringifies the return value in place of the original value. Date objects implement <code>toJSON()</code>: it returns the same string that <code>toISOString()</code> method does.</p><p>If you need to re-create Date objects (or modify the parsed object inany other way), you can pass a “reviver” function as the second argument to <code>JSON.parse()</code>.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let data = JSON.parse(text, function(key, value) {
  if (key[0] === &quot;_&quot;) return undefined;
  if (typeof value === &quot;string&quot; &amp;&amp; /^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ$/.test(value)) {
    return new Date(value);
  }
  return value;
});</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-TheConsoleAPI">The Console API</h2><p>Console functions that print their arguments like console.log() have a little-known feature: if the first argument is a string that includes <code>%s, %i, %d, %f, %o, %O, or %c</code>, then this first argument is treated as format string, and the values of subsequent arguments are substituted into the string in place of the two-character % sequences.</p><h2 id="JavaScriptDefinitiveGuide-URLAPI">URL API</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let url = new URL(&quot;https://example.com:8000/path/name?q=term#fragment&quot;);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.href</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="https://example.com:8000/path/name" class="external-link" rel="nofollow">https://example.com:8000/path/name</a>?q=term#fragment&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.origin</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="https://example.com:8000/" class="external-link" rel="nofollow">https://example.com:8000</a>&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.protocol</pre>
</div></div></td><td class="confluenceTd"><p>&quot;https:&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.host</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="http://example.com/" class="external-link" rel="nofollow">example.com</a>:8000&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.hostname</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="http://example.com/" class="external-link" rel="nofollow">example.com</a>&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.port</pre>
</div></div></td><td class="confluenceTd"><p>&quot;8000&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.pathname</pre>
</div></div></td><td class="confluenceTd"><p>&quot;/path/name&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.search</pre>
</div></div></td><td class="confluenceTd"><p>&quot;?q=term&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.hash</pre>
</div></div></td><td class="confluenceTd"><p>&quot;#fragment&quot;</p></td></tr></tbody></table></div><p /><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let url = new URL(&quot;https://example.com&quot;);</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.pathname = &quot;api/search&quot;;</pre>
</div></div></td><td class="confluenceTd"><p>Add a path to an API endpoint</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.search = &quot;q=test&quot;;</pre>
</div></div></td><td class="confluenceTd"><p>Add a query parameter</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.toString()</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="https://example.com/api/search?q=test" class="external-link" rel="nofollow">https://example.com/api/search?q=test</a>&quot;</p></td></tr></tbody></table></div><p>One of the important features of the URL class is that it correctly adds punctuation and escapes special characters in URLs when that is needed</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let url = new URL(&quot;https://example.com&quot;);</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.pathname = &quot;path with spaces&quot;;</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.pathname</pre>
</div></div></td><td class="confluenceTd"><p>&quot;/path%20with%20spaces&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.search = &quot;q=foo#bar&quot;;</pre>
</div></div></td><td class="confluenceTd"><p><br/></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.search</pre>
</div></div></td><td class="confluenceTd"><p>&quot;?q=foo%23bar&quot;</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">url.href</pre>
</div></div></td><td class="confluenceTd"><p>&quot;<a href="https://example.com/path%20with%20spaces?q=foo%23bar" class="external-link" rel="nofollow">https://example.com/path%20with%20spaces?q=foo%23bar</a>&quot;</p></td></tr></tbody></table></div><p>Often, however, HTTP requests encode the values of multiple form fields or multiple API parameters into the query portion of a URL. In this format, the query portion of the URL is a question mark followed by one or more name/value pairs, which are separated from one another by ampersands.</p><p>If you want to encode these kinds of name/value pairs into the query portion of a URL, then the searchParams property will be more useful than the search property.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 326.0px;"/><col style="width: 432.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let url = new URL(&quot;https://example.com/search&quot;);</code></p></td></tr><tr><td class="confluenceTd"><p><code>url.search</code></p></td><td class="confluenceTd"><p>&quot;&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>url.searchParams.append(&quot;q&quot;, &quot;term&quot;);</code></p></td></tr><tr><td class="confluenceTd"><p><code>url.search</code></p></td><td class="confluenceTd"><p>&quot;?q=term&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>url.searchParams.set(&quot;q&quot;, &quot;x&quot;);</code></p></td></tr><tr><td class="confluenceTd"><p><code>url.search</code></p></td><td class="confluenceTd"><p>&quot;?q=x&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>url.searchParams.append(&quot;opts&quot;, &quot;1&quot;);</code></p></td></tr><tr><td class="confluenceTd"><p><code>url.search</code></p></td><td class="confluenceTd"><p>&quot;?q=x&amp;opts=1&quot;</p></td></tr></tbody></table></div><p>The value of the searchParams property is a URLSearchParams object.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let url = new URL(&quot;http://example.com&quot;);</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>let params = new URLSearchParams();</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>params.append(&quot;q&quot;, &quot;term&quot;);</code></p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>params.append(&quot;opts&quot;, &quot;exact&quot;);</code></p></td></tr><tr><td class="confluenceTd"><p><code>params.toString()</code></p></td><td class="confluenceTd"><p>&quot;q=term&amp;opts=exact&quot;</p></td></tr><tr><td colspan="2" class="confluenceTd"><p><code>url.search = params;</code></p></td></tr><tr><td class="confluenceTd"><p><code>url.href</code></p></td><td class="confluenceTd"><p>&quot;<a href="http://example.com/" class="external-link" rel="nofollow">http://example.com/</a>?q=term&amp;opts=exact&quot;</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Timers">Timers</h2><p><code>setTimeout()</code> and<code> setInterval()</code>—that allow programs to ask the browser to invoke a function after a specified amount of time has elapsed or to invoke the function repeatedly at a specified interval.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">setTimeout(() =&gt; { console.log(&quot;Ready...&quot;); }, 1000);
setTimeout(() =&gt; { console.log(&quot;set...&quot;); }, 2000);
setTimeout(() =&gt; { console.log(&quot;go!&quot;); }, 3000);</pre>
</div></div></td></tr></tbody></table></div><p>If you want to invoke a function repeatedly, use <code>setInterval()</code></p><p>Both <code>setTimeout()</code> and <code>setInterval()</code> return a value. If you save this value in a variable, you can then use it later to cancel the execution of the function by passing it to <code>clearTimeout()</code> or <code>clearInterval()</code>.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 468.0px;"/><col style="width: 290.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let clock = setInterval(() =&gt; {
  console.clear();
  console.log(new Date().toLocaleTimeString());
}, 1000);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">setTimeout(() =&gt; { clearInterval(clock); }, 10000);</pre>
</div></div></td><td class="confluenceTd"><p>After 10 seconds: stop the repeating code above</p></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-IteratorsandGenerators">Iterators and Generators</h1><p>The iterator method of an iterable object does not have a conventional name but uses the Symbol, Symbol.iterator as its name. So a simple for/of loop over an iterable object iterable could also be written the hard way, like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let iterable = [99];
let iterator = iterable[Symbol.iterator]();
for(let result = iterator.next(); !result.done; result =iterator.next()) {
  console.log(result.value) // result.value == 99
}</pre>
</div></div></td></tr></tbody></table></div><p>When you want to iterate though a “partially used” iterator:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 302.0px;"/><col style="width: 456.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><p><code>let list = [1,2,3,4,5];</code><br/><code>let iter = list[Symbol.iterator]();</code></p></td></tr><tr><td class="confluenceTd"><p><code>let head = iter.next().value;</code></p></td><td class="confluenceTd"><p>head == 1</p></td></tr><tr><td class="confluenceTd"><p><code>let tail = [...iter];</code></p></td><td class="confluenceTd"><p>tail == [2,3,4,5]</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-ImplementingIterableObjects">Implementing Iterable Objects</h2><p>we will implement the Range class one more time, making it iterable without relying on a generator. </p><p>In order to make a class iterable, you must implement a method whose name is the Symbol <code>Symbol.iterator</code></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 440.0px;"/><col style="width: 318.0px;"/></colgroup><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">class Range {
  constructor (from, to) {
    this.from = from;
    this.to = to;
  }
  has(x) { return typeof x === &quot;number&quot; &amp;&amp; this.from &lt;= x &amp;&amp; x &lt;= this.to; }
  toString() { return `{ x | ${this.from} ≤ x ≤ ${this.to}}`; }

  [Symbol.iterator]() {
    let next = Math.ceil(this.from); 
    let last = this.to; 
    return { 
      next() {
        return (next &lt;= last) ? { value: next++ } : { done: true }; 
      },
      [Symbol.iterator]() { return this; }
    };
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(let x of new Range(1,10)) console.log(x);</pre>
</div></div></td><td class="confluenceTd"><p>Logs numbers 1 to 10</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[...new Range(-2,2)]</pre>
</div></div></td><td class="confluenceTd"><p>[-2, -1, 0,1, 2]</p></td></tr></tbody></table></div><p>In addition to making your classes iterable, it can be quite useful to define functions that return iterable values.</p><p>Return an iterable object that iterates the result of applying <code>f()</code>  to each value from the source iterable</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function map(iterable, f) {
  let iterator = iterable[Symbol.iterator]();
  return { 
    [Symbol.iterator]() { return this; },
    next() {
      let v = iterator.next();
      if (v.done) {
        return v;
      }
      else {
        return { value: f(v.value) };
      }
    }
  };
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>[...map(new Range(1,4), x =&gt; x*x)]</code></p></td><td class="confluenceTd"><p>[1, 4, 9, 16]</p></td></tr></tbody></table></div><p>Return an iterable object that filters the specified iterable, iterating only those elements for which the predicate returns true</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function filter(iterable, predicate) {
  let iterator = iterable[Symbol.iterator]();
  return { 
    [Symbol.iterator]() { return this; },
    next() {
      for(;;) {
       let v = iterator.next();
       if (v.done || predicate(v.value)) {
         return v;
       }
     }
   }
 };
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>[...filter(new Range(1,10), x =&gt; x % 2 === 0)]</code></p></td><td class="confluenceTd"><p>[2,4,6,8,10]</p></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Generators">Generators</h2><p>Particularly useful when the values to be iterated are not the elements of a data structure, but the result of a computation.</p><p>To create a generator, you must first define a generator function - defined with the keyword <code>function*</code> rather than <code>function</code></p><p>When you invoke a generator function, it does not actually execute the function body, but instead returns a generator object. This generator object is an iterator.</p><p>Calling its <code>next()</code> method causes the body of the generator function to run from the start (or whatever its current position is) until it reaches a <code>yield</code> statement.</p><p>The value of the <code>yield</code> statement becomes the value returned by the <code>next()</code> call on the iterator.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function* oneDigitPrimes() { 
  yield 2; 
  yield 3;
  yield 5; 
  yield 7;
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let primes = oneDigitPrimes();</pre>
</div></div></td><td class="confluenceTd"><p>we get a generator</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">primes.next().value</pre>
</div></div></td><td class="confluenceTd"><p>2</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">primes.next().value</pre>
</div></div></td><td class="confluenceTd"><p>3</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">primes.next().value</pre>
</div></div></td><td class="confluenceTd"><p>5</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">primes.next().value</pre>
</div></div></td><td class="confluenceTd"><p>7</p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">primes.next().done</pre>
</div></div></td><td class="confluenceTd"><p>true</p></td></tr></tbody></table></div><p>Generators have a <code>Symbol.iterator</code> method to make them iterable</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>primes[Symbol.iterator]()</code></p></td></tr></tbody></table></div><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>[...oneDigitPrimes()]</code></p></td><td class="confluenceTd"><p>[2,3,5,7]</p></td></tr><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let sum = 0;
for(let prime of oneDigitPrimes()) sum += prime;</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">sum</pre>
</div></div></td><td class="confluenceTd"><p>17</p></td></tr></tbody></table></div><p>Like regular functions, however, we can also define generators in expression form.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const seq = function*(from,to) {
  for(let i = from; i &lt;= to; i++) yield i;
};</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[...seq(3,5)]</pre>
</div></div></td><td class="confluenceTd"><p>[3, 4, 5]</p></td></tr></tbody></table></div><p>In classes and object literals, we can use shorthand notation to omit the function keyword entirely when we define methods.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let o = {
  x: 1, y: 2, z: 3,
  *g() {
    for(let key of Object.keys(this)) {
      yield key;
    }
  }
};</pre>
</div></div></td></tr><tr><td class="confluenceTd"><p><code>[...o.g()]</code></p></td><td class="confluenceTd"><p>[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;g&quot;]</p></td></tr></tbody></table></div><p>Generators often make it particularly easy to define iterable classes.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">*[Symbol.iterator]() {
  for(let x = Math.ceil(this.from); x &lt;= this.to; x++)
    yield x;
}</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-GeneratorExamples">Generator Examples</h3><p>Generators are more interesting if they actually generate the values they yield by doing some kind of computation.</p><p>generator function that yields Fibonacci numbers</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function* fibonacciSequence() {
  let x = 0, y = 1;
  for(;;) {
    yield y;
    [x, y] = [y, x+y];
  }
}</pre>
</div></div></td></tr></tbody></table></div><p>If this generator is used with the ... spread operator, it will loop until memory is exhausted and the program crashes.</p><p>Use it in a <code>for/of</code> loop, however</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function fibonacci(n) {
  for(let f of fibonacciSequence()) {
    if (n-- &lt;= 0) return f;
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fibonacci(20)</pre>
</div></div></td><td class="confluenceTd"><p>10946</p></td></tr></tbody></table></div><p>This kind of infinite generator becomes more useful with a <code>take()</code> generator like this</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td colspan="2" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function* take(n, iterable) {
  let it = iterable[Symbol.iterator]();
  while(n-- &gt; 0) {
    let next = it.next(); 
    if (next.done) return; 
    else yield next.value; 
  }
}</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[...take(5, fibonacciSequence())]</pre>
</div></div></td><td class="confluenceTd"><p>[1, 1, 2, 3, 5]</p></td></tr></tbody></table></div><h1 id="JavaScriptDefinitiveGuide-AsynchronousJavascript">Asynchronous Javascript</h1><p><code>Promises</code>, new in ES6, are objects that represent the not-yet-available result of an asynchronous operation.</p><p>The keywords <code>async</code> and <code>await</code> were introduced in ES2017 and provide new syntax that simplifies asynchronous programming by allowing you to structure your Promise based code as if it was synchronous.</p><p>Asynchronous iterators and the<code> for/await</code> loop were introduced in ES2018 and allow you to work with streams of asynchronous events using simple loops that appear synchronous.</p><h2 id="JavaScriptDefinitiveGuide-AsynchronousProgrammingwithCallbacks">Asynchronous Programming with Callbacks</h2><h3 id="JavaScriptDefinitiveGuide-Timers.1">Timers</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>setTimeout(checkForUpdates, 60000);</code></p></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let updateIntervalId = setInterval(checkForUpdates, 60000);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function stopCheckingForUpdates() {
  clearInterval(updateIntervalId);
} </pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Events">Events</h3><p>Event-driven JavaScript programs register callback functions for specified types of events in specified contexts, and the web browser invokes those functions whenever the specified events occur. </p><p>These callback functions are called event handlers or event listeners, and they are registered with <code>addEventListener()</code></p><p>Ask the web browser to return an object representing the HTML &lt;button&gt; element that matches this CSS selector:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>let okay = document.querySelector('#confirmUpdateDialogbutton.okay');</code></p></td></tr></tbody></table></div><p>Now register a callback function to be invoked when the user clicks on that button</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>okay.addEventListener('click', applyUpdate);</code></p></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-NetworkEvents">Network Events</h3><p>JavaScript running in the browser can fetch data from a web server with code like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function getCurrentVersionNumber(versionCallback) {
  let request = new XMLHttpRequest();
  request.open(&quot;GET&quot;, &quot;http://www.example.com/api/version&quot;);
  request.send();

  request.onload = function() {
    if (request.status === 200) {
      let currentVersion = parseFloat(request.responseText);
      versionCallback(null, currentVersion);
    } 
    else {
      versionCallback(response.statusText, null);
    }
  };

  request.onerror = request.ontimeout = function(e) {
    versionCallback(e.type, null);
  };
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="JavaScriptDefinitiveGuide-Promises">Promises</h2><p>Promises, a core language feature designed to simplify asynchronous programming.</p><p>A Promise is an object that represents the result of an asynchronous computation. That result may or may not be ready yet, and the Promise API is intentionally vague about this: there is no way to synchronously get the value of a Promise; you can only ask the Promise to call a callback function when the value is ready.</p><p>One real problem with callback-based asynchronous programming is that it is common to end up with callbacks inside callbacks inside callbacks, with lines of code so highly indented that it is difficult to read. </p><p>Promises allow this kind of nested callback to be re-expressed as a more linear Promise chain that tends to be easier to read and easier to reason about.</p><p>Another problem with callbacks is that they can make handling errors difficult. If an asynchronous function (or an asynchronously invoked callback) throws an exception, there is no way for that exception to propagate back to the initiator of the asynchronous operation. This is a fundamental fact about asynchronous programming: it breaks exception handling. Promises help here by standardizing a way to handle errors and providing a way for errors to propagate correctly through a chain of promises.</p><p>Note that Promises represent the future results of single asynchronous computations. They cannot be used to represent repeated asynchronous computations, however. </p><p>We can’t use Promises to replace <code>setInterval()</code> because that function invokes a callback function repeatedly, which is something that Promises are just not designed to do.</p><h3 id="JavaScriptDefinitiveGuide-UsingPromises">Using Promises</h3><p>How we would use this Promise returning utility function</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">getJSON(url).then(jsonData =&gt; {
  // callback function that will be asynchronously invoked with the parsed JSON value when it becomes available.
});</pre>
</div></div></td></tr></tbody></table></div><p>The Promise object defines a then() instance method. Instead of passing our callback function directly to <code>getJSON()</code>, we instead pass it to the then() method. When the HTTP response arrives, the body of that response is parsed as JSON, and the resulting parsed value is passed to the function that we passed to <code>then()</code>.</p><p>If you call the <code>then()</code> method of a Promise object multiple times, each of the functions you specify will be called when the promised computation is complete. </p><p>Unlike many event listeners, though, a Promise represents a single computation, and each function registered with then() will be invoked only once.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function displayUserProfile(profile) { ...}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">getJSON(&quot;/api/user/profile&quot;).then(displayUserProfile);</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-HANDLINGERRORSWITHPROMISES">HANDLING ERRORS WITH PROMISES</h3><p>Asynchronous operations, particularly those that involve networking, can typically fail in a number of ways, and robust code has to be written to handle the errors that will inevitably occur.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><code>getJSON(&quot;/api/user/profile&quot;).then(displayUserProfile, handleProfileError);</code></p></td></tr></tbody></table></div><p>if <code>getJSON()</code> runs normally, it passes its result to <code>displayUserProfile()</code>. If there is an error (the user is not logged in, the server is down, the user’s internet connection dropped, the request timed out, etc.), then <code>getJSON()</code> passes an Error object to <code>handleProfileError()</code>.</p><p>In practice, it is rare to see two functions passed to then(). There is a better and more idiomatic way of handling errors when working with Promises. </p><p>To understand it, first consider what happens if <code>getJSON()</code> completes normally but an error occurs in <code>displayUserProfile()</code>. That callback function is invoked asynchronously when <code>getJSON()</code> returns, so it is also asynchronous and cannot meaningfully throw an exception (because there is no code on the call stack to handle it).</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">getJSON(&quot;/api/user/profile&quot;).then(displayUserProfile).catch(handleProfileError);</pre>
</div></div></td></tr></tbody></table></div><p>With this code, a normal result from<code> getJSON()</code> is still passed to <code>displayUserProfile()</code>, but any error in <code>getJSON()</code> or in <code>displayUserProfile()</code> (including any exceptions thrown by <code>displayUserProfile</code>) get passed to <code>handleProfileError()</code>.</p><h2 id="JavaScriptDefinitiveGuide-ChainingPromises">Chaining Promises</h2><p>One of the most important benefits of Promises is that they provide a natural way to express a sequence of asynchronous operations as a linear chain of <code>then()</code> method invocations, without having to nest each operation within the callback of the previous one.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fetch(documentURL)
.then(response =&gt; response.json()) 
.then(document =&gt; {return render(document); })
.then(rendered =&gt; {cacheInDatabase(rendered); })
.catch(error =&gt; handle(error));</pre>
</div></div></td></tr></tbody></table></div><p>has largely been replaced by the newer, Promise-based Fetch API. In its simplest form, this new HTTP API is just the function fetch(). That promise is fulfilled when the HTTP response begins to arrive and the HTTP status and headers are available.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fetch(&quot;/api/user/profile&quot;)
  .then(response =&gt; {
    if (response.ok &amp;&amp;  response.headers.get(&quot;Content-Type&quot;) === &quot;application/json&quot;) {
      // What can we do here? We don&#39;t actually have the response body yet.
    }
});</pre>
</div></div></td></tr></tbody></table></div><p>But although the initial Promise is fulfilled, the body of the response may not yet have arrived. So these <code>text()</code> and<code> json()</code> methods for accessing the body of the response themselves return Promises.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fetch(&quot;/api/user/profile&quot;)
  .then(response =&gt; {
    return response.json();
  })
  .then(profile =&gt; {
    displayUserProfile(profile);
  });</pre>
</div></div></td></tr></tbody></table></div><p>There is a second <code>then()</code> in the chain, which means that the first invocation of the <code>then()</code> method must itself return a Promise. That is not how Promises work, however.</p><p>When we write a chain of <code>.then()</code> invocations, we are not registering multiple callbacks on a single Promise object. Instead, each invocation of the <code>then()</code> method returns a new Promise object. That new Promise object is not fulfilled until the function passed to <code>then()</code> is complete.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fetch(theURL)       // task 1; returns promise 1
  .then(callback1)  // task 2; returns promise 2
  .then(callback2); // task 3; returns promise 3</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-ResolvingPromises">Resolving Promises</h3><p>There is actually a fourth Promise object involved as which brings up the point of what it means for a Promise to be “resolved.” </p><p>fetch() returns a Promise object which, when fulfilled, passes a Response object to the callback function we register. This Response object has <code>.text(), .json(),</code> and other methods to request the body of the HTTP response in various forms. But since the body may not yet have arrived, these methods must return Promise objects.</p><p>“task 2” calls the <code>.json()</code> method and returns its value. This is the fourth Promise object, and it is the return value of the <code>callback1()</code> function.</p><p>Let's consider:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function c1(response) {
  let p4 = response.json();
  return p4;
}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence"> // callback 1
 // returns promise 4

</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">function c2(profile) { 
  displayUserProfile(profile);
}</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">// callback 2</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let p1 = fetch(&quot;/api/user/profile&quot;);</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">promise 1, task 1</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let p2 = p1.then(c1);</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">promise 2, task 2</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let p3 = p2.then(c2);</pre>
</div></div></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">promise 3, task 3</pre>
</div></div></td></tr></tbody></table></div><p>In order for Promise chains to work usefully, the output of task 2 must become the input to task 3. The input to task 3 is the body of the URL that was fetched, parsed as a JSON object. But the return value of callback c1 is not a JSON object, but Promise p4 for that JSON object.</p><p>When p1 is fulfilled, c1 is invoked, and task 2 begins. And when p2 is fulfilled, c2 is invoked, and task 3 begins. </p><p>And when p2 is fulfilled, c2 is invoked, and task 3 begins. But just because task 2 begins when c1 is invoked,it does not mean that task 2 must end when c1 returns. </p><p>Promises are about managing asynchronous tasks, and if task 2 is asynchronous, then that task will not be complete by the time the callback returns.</p><p>When you pass a callback c to the <code>then()</code> method, <code>then()</code> returns a Promise p and arranges to asynchronously invoke c at some later time. The callback performs some computation and returns a value v. When the callback returns, p is resolved with the value v. When a Promise is resolved with a value that is not itself a Promise, it is immediately fulfilled with that value. </p><p>So if c returns a non-Promise, that return value becomes the value of p, p is fulfilled and we are done. But if the return value v is itself a Promise, then p is resolved but not yet fulfilled.</p><p>At this stage, p cannot settle until the Promise v settles. If v is fulfilled, then p will be fulfilled to the same value. If v is rejected, then p will be rejected for the same reason. This is what the “resolved” state of a Promise means</p><p>the Promise has become associated with, or “locked onto,” another Promise. We don’t know yet whether p will be fulfilled or rejected, but our callback c no longer has any control over that. p is “resolved” in the sense that its fate now depends entirely on what happens to Promise v.</p><p>Let’s bring this back to our URL-fetching example. When c1 returns p4, p2 is resolved. But being resolved is not the same as being fulfilled, so task 3 does not begin yet. When the full body of the HTTP response becomes available, then the .<code>json()</code> method can parse it and use that parsed value to fulfill p4. When p4 is fulfilled, p2 is automatically fulfilled as well, with the same parsed JSON value. At this point, the parsed JSON object is passed to c2, and task 3 begins.</p><h3 id="JavaScriptDefinitiveGuide-MoreonPromisesandErrors">More on Promises and Errors</h3><p>With synchronous code, if you leave out error-handling code, you’ll at least get an exception and a stack trace that you can use to figure out what is going wrong. With asynchronous code, unhandled exceptions will often go unreported, and errors can occur silently, making them much harder to debug. The good news is that the <code>.catch()</code> method makes it easy to handle errors when working with Promises.</p><p>THE CATCH AND FINALLY METHODS</p><p>The <code>.catch()</code> method of a Promise is simply a shorthand way to call <code>.then()</code> with null as the first argument and an error-handling callback as the second argument.</p><p>Normal exceptions don’t work with asynchronous code. The <code>.catch()</code> method of Promises is an alternative that does work for asynchronous code.</p><div class="table-wrap"><table data-layout="wide" class="confluenceTable"><colgroup><col style="width: 518.0px;"/><col style="width: 442.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">fetch(&quot;/api/user/profile&quot;)
  .then(response =&gt; {
    if (!response.ok) {
      return null;
    }
    let type = response.headers.get(&quot;content-type&quot;);
    if (type !== &quot;application/json&quot;) {
      throw new TypeError(`Expected JSON, got ${type}`);
    }
    return response.json();
  })
  .then(profile =&gt; {
    if (profile) {
      displayUserProfile(profile);
    }
    else { 
      displayLoggedOutProfilePage();
    }
  })
  .catch(e =&gt; {
  if (e instanceof NetworkError) {
    displayErrorMessage(&quot;Check your internet connection.&quot;);
  }
  else if (e instanceof TypeError) {
    displayErrorMessage(&quot;Something is wrong with our server!&quot;);
  }
  else {
    console.error(e);
  }
});</pre>
</div></div></td><td class="confluenceTd"><p>p1 is the Promise returned by the <code>fetch()</code> call</p><p>p2 is the Promise returned by the first <code>.then()</code> call</p><p>c1 is the callback that we pass to that .<code>then()</code> call</p><p>p3 is the Promise returned by the second <code>.then()</code> call</p><p>c2 is the callback we pass to that call</p><p>c3 is the callback that we pass to the <code>.catch()</code> call</p></td></tr></tbody></table></div><p>The first thing that could fail is the fetch() request itself. Let's say p1 was rejected with a NetworkError object.</p><p>We didn’t pass an error-handling callback function as the second argument to the <code>.then()</code> call, so p2 rejects as well with the same NetworkError object.</p><p>Without a handler, though, p2 is rejected, and then p3 is rejected for the same reason.</p><p>At this point, the c3 error-handling callback is called, and the NetworkError-specific code within it runs.</p><p>There are a couple of things worth noting about this code. First, notice that the error object thrown with a regular, synchronous throw statement ends up being handled asynchronously with a <code>.catch()</code> method invocation in a Promise chain. This should make it clear why this shorthand method is preferred over passing a second argument to .<code>then()</code>, and also why it is so idiomatic to end Promise chains with a <code>.catch()</code> call.</p><p>it is also perfectly valid to use <code>.catch()</code> elsewhere in a Promise chain.  If one of the stages in your Promise chain can fail with an error, and if the error is some kind of recoverable error that should not stop the rest of the chain from running, then you can insert a <code>.catch()</code> call in the chain, resulting in code that might look like this:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">startAsyncOperation()
  .then(doStageTwo)
  .catch(recoverFromStageTwoError)
  .then(doStageThree)
  .then(doStageFour)
  .catch(logStageThreeAndFourErrors);</pre>
</div></div></td></tr></tbody></table></div><p>If the callback returns normally, then the <code>.catch()</code> callback will be skipped, and the return value of the previous callback will become the input to the next .<code>then()</code> callback. </p><p>Once an error has been passed to a <code>.catch()</code> callback, it stops propagating down the Promise chain. A <code>.catch()</code> callback can throw a new error, but if it returns normally, than that return value is used to resolve and/or fulfill the associated Promise, and<br/>the error stops propagating.</p><p>Sometimes, in complex network environments, errors can occur more or less at random, and it can be appropriate to handle those errors by simply retrying the asynchronous request.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">queryDatabase()
  .catch(e =&gt; wait(500).then(queryDatabase)) 
  .then(displayTable)
  .catch(displayDatabaseError);</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-PromisesinParallel">Promises in Parallel</h3><p>Sometimes,we want to execute a number of asynchronous operations in parallel. The function <code>Promise.all()</code> can do this. <code>Promise.all()</code> takes an array of Promise objects as its input and returns a Promise. </p><p>The returned Promise will be rejected if any of the input Promises are rejected. Otherwise, it will be fulfilled with an array of the fulfillment values of each of the input Promises.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const urls = [ /* zero or more URLs here */ ];
promises = urls.map(url =&gt; fetch(url).then(r =&gt; r.text()));
Promise.all(promises)
  .then(bodies =&gt; { /* do something with the array of strings */ })
  .catch(e =&gt; console.error(e));</pre>
</div></div></td></tr></tbody></table></div><p>The Promise returned by <code>Promise.all()</code> rejects when any of the input Promises is rejected. This happens immediately upon the first rejection and can happen while other input Promises are still pending. In ES2020, <code>Promise.allSettled()</code> takes an array of input<br/>Promises and returns a Promise, just like Promise.all() does. But <code>Promise.allSettled()</code> never rejects the returned Promise, and it does not fulfill that Promise until all of the input Promises have settled. The Promise resolves to an array of objects, with one object for each input Promise. Each of these returned objects has a status property set to “fulfilled” or “rejected.” If the status is “fulfilled”, then the object will also have a value property that gives the fulfillment value. And if the status is “rejected”, then the object will also have a reason property that gives the error or rejection value of the corresponding Promise.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">Promise.allSettled([Promise.resolve(1), Promise.reject(2),3]).then(results =&gt; {
  results[0] // =&gt; { status: &quot;fulfilled&quot;, value: 1 }
  results[1] // =&gt; { status: &quot;rejected&quot;, reason: 2 }
  results[2] // =&gt; { status: &quot;fulfilled&quot;, value: 3 }
});</pre>
</div></div></td></tr></tbody></table></div><p>Occasionally, you may want to run a number of Promises at once but may only care about the value of the first one to fulfill. In that case, you can use <code>Promise.race()</code> instead of <code>Promise.all()</code>. It returns a Promise that is fulfilled or rejected when the first of the Promises in the input array is fulfilled or rejected.</p><h3 id="JavaScriptDefinitiveGuide-MakingPromises">Making Promises</h3><h3 id="JavaScriptDefinitiveGuide-PromisesinSequence">Promises in Sequence</h3><h2 id="JavaScriptDefinitiveGuide-asyncandawait">async and await</h2><p>These new keywords dramatically simplify the use of Promises and allow us to write Promise-based, asynchronous code that looks like synchronous code that blocks while waiting for network responses or other asynchronous events.</p><p>Asynchronous code can’t return a value or throw an exception the way that regular synchronous code can. And this is why Promises are designed the way the are. The value of a fulfilled Promise is like the return value of a synchronous function. And the value of a rejected Promise is like a value thrown by a synchronous function.</p><p><code>async</code> and <code>await</code> take efficient, Promise-based code and hide the Promises so that your asynchronous code can be as easy to read and as easy to reason about as inefficient, blocking, synchronous code.</p><p>Given a Promise object p, the expression await p waits until p settles. If p fulfills, then the value of await p is the fulfillment value of p. On the other hand, if p is rejected, then the await p expression throws the rejection value of p.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let response = await fetch(&quot;/api/user/profile&quot;);
let profile = await response.json();</pre>
</div></div></td></tr></tbody></table></div><p>It is critical to understand right away that the <code>await</code> keyword does not cause your program to block and literally do nothing until the specified Promise settles. The code remains asynchronous, and the <code>await</code> simply disguises this fact. This means that any code that uses await is itself asynchronous.</p><h3 id="JavaScriptDefinitiveGuide-asyncFunctions">async Functions</h3><p>Because any code that uses await is asynchronous, there is one critical rule: you can only use the await keyword within functions that have been declared with the <code>async</code> keyword.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">async function getHighScore() {
  let response = await fetch(&quot;/api/user/profile&quot;);
  let profile = await response.json();
  return profile.highScore;
}</pre>
</div></div></td></tr></tbody></table></div><p>Declaring a function <code>async</code> means that the return value of the function will be a Promise even if no Promise-related code appears in the body of the function.</p><p>The <code>getHighScore()</code> function is declared <code>async</code>, so it returns a Promise. And because it returns a Promise, we can use the <code>await</code> keyword with it:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">displayHighScore(await getHighScore());</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-AwaitingMultiplePromises">Awaiting Multiple Promises</h3><p>Suppose that we’ve written our <code>getJSON()</code> function using async:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">async function getJSON(url) {
  let response = await fetch(url);
  let body = await response.json();
  return body;
}</pre>
</div></div></td></tr></tbody></table></div><p>And now suppose that we want to fetch two JSON values with this function</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let value1 = await getJSON(url1);</pre>
</div></div></td></tr><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let value2 = await getJSON(url2);</pre>
</div></div></td></tr></tbody></table></div><p>The problem with this code is that it is unnecessarily sequential: the fetch of the second URL will not begin until the first fetch is complete. If the second URL does not depend on the value obtained from the firstURL, then we should probably try to fetch the two values at the same time.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">let [value1, value2] = await Promise.all([getJSON(url1), getJSON(url2)]);</pre>
</div></div></td></tr></tbody></table></div><h3 id="JavaScriptDefinitiveGuide-Thefor/awaitLoop">The for/await Loop</h3><p>Suppose you have an array of URLs:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const urls = [url1, url2, url3];</pre>
</div></div></td></tr></tbody></table></div><p>You can call fetch() on each URL to get an array of Promises:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">const promises = urls.map(url =&gt; fetch(url));</pre>
</div></div></td></tr></tbody></table></div><p>We could now use<code> Promise.all()</code> to wait for all the Promises in the array to be fulfilled. But suppose we want the results of the first fetch as soon as they become available and don’t want to wait for all the URLs to be fetched.</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><colgroup><col style="width: 315.0px;"/><col style="width: 68.0px;"/><col style="width: 375.0px;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for(const promise of promises) {
  response = await promise;
  handle(response);
}</pre>
</div></div></td><td class="confluenceTd"><p>&lt;--&gt;</p></td><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">for await (const response of promises) {
  handle(response);
}</pre>
</div></div></td></tr></tbody></table></div><p>both examples will only work if they are within functions declared async; a <code>for/await</code> loop is no different than a regular await expression in that way</p><h3 id="JavaScriptDefinitiveGuide-ImplementingAsynchronousIterators">Implementing Asynchronous Iterators</h3><p><br/></p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:35</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
