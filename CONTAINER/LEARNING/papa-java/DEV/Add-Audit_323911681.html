<!DOCTYPE html>
<html>
    <head>
        <title>DevOps : Add Audit</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DevOps</a></span>
                            </li>
                                                    <li>
                                <span><a href="DevOps-Home_603226548.html">DevOps Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_278921431.html">Tutorials</a></span>
                            </li>
                                                    <li>
                                <span><a href="Project-Profit-Application_315097089.html">Project Profit Application</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DevOps : Add Audit
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicholas Guner</span>, last modified on Apr 30, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="AddAudit-Modifyin-memorydatabasetoaddCREATED_BY,CREATED_ON,LAST_MODIFIED_BYfields">Modify in-memory database to add CREATED_BY, CREATED_ON, LAST_MODIFIED_BY fields</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">-- PROJECT
INSERT INTO PROJECT(ID, PROJECT_NAME, PROJECT_DESCRIPTION, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(1, &#39;P-1&#39;, &#39;Project one&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT(ID, PROJECT_NAME, PROJECT_DESCRIPTION, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(2, &#39;P-2&#39;, &#39;Project two&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT(ID, PROJECT_NAME, PROJECT_DESCRIPTION, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(3, &#39;P-3&#39;, &#39;Project three&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT(ID, PROJECT_NAME, PROJECT_DESCRIPTION, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(4, &#39;P-4&#39;, &#39;Project four&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)

-- EMPLOYEE
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(1, &#39;EC-1&#39;, &#39;One First&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(2, &#39;EC-2&#39;, &#39;Two Second&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(3, &#39;EC-3&#39;, &#39;Three Third&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(4, &#39;EC-4&#39;, &#39;Four Forth&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(5, &#39;EC-5&#39;, &#39;Five Fifth&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE(ID, EMPLOYEE_CODE, EMPLOYEE_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(6, &#39;EC-6&#39;, &#39;Six Sixth&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)

-- SUBSCRIPTION
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(1, &#39;SUB-1&#39;, &#39;Subscription 1&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(2, &#39;SUB-2&#39;, &#39;Subscription 2&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(3, &#39;SUB-3&#39;, &#39;Subscription 3&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(4, &#39;SUB-4&#39;, &#39;Subscription 4&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(5, &#39;SUB-5&#39;, &#39;Subscription 5&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(6, &#39;SUB-6&#39;, &#39;Subscription 6&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO SUBSCRIPTION(ID, SUBSCRIPTION_CODE, SUBSCRIPTION_NAME, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(7, &#39;SUB-7&#39;, &#39;Subscription 7&#39;, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)


-- PROJECT-EMPLOYEE-MAP
--  PROJECT 1
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(1, 1, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(2, 1, 3, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
--  PROJECT 2
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(4, 2, 2, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(5, 2, 4, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
-- PROJECT 3
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(6, 3, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(7, 3, 2, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(8, 3, 3, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO PROJECT_EMPLOYEE_MAP(ID, PROJECT_ID, EMPLOYEE_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(9, 3, 4, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)

-- EMPLOYEE-SUBSCRIPTION-MAP
--  EMPLOYEE-1
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(1, 1, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(2, 1, 2, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(3, 1, 3, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
--  EMPLOYEE-2
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(4, 2, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(5, 2, 2, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(6, 2, 3, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(7, 2, 4, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
--  EMPLOYEE-3
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(8, 3, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(9, 3, 3, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(10, 3, 5, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
--  EMPLOYEE-4
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(11, 4, 2, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(12, 4, 4, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(13, 4, 6, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)
--  EMPLOYEE-5
INSERT INTO EMPLOYEE_SUBSCRIPTION_MAP(ID, EMPLOYEE_ID, SUBSCRIPTION_ID, CREATED_BY, CREATED_ON, LAST_MODIFIED_BY) VALUES(14, 5, 1, &#39;unknown&#39;, CURRENT_TIMESTAMP, &#39;unknown&#39;)

--SEQUENCE
alter sequence HIBERNATE_SEQUENCE restart with 101</pre>
</div></div></td></tr></tbody></table></div><h1 id="AddAudit-AddBaseEntityclass">Add BaseEntity class</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@MappedSuperclass
public class BaseEntity extends ResourceSupport
{
    @CreatedBy
    @Column(name = &quot;created_by&quot;)
    private String createdBy;

    @LastModifiedBy
    @Column(name = &quot;last_modified_by&quot;)
    private String lastModifiedBy;

    @CreatedDate
    @Column(name = &quot;created_on&quot;)
    private Date createdOn;

    public String getCreatedBy()
    {
        return createdBy;
    }

    public void setCreatedBy(String createdBy)
    {
        this.createdBy = createdBy;
    }

    public String getLastModifiedBy()
    {
        return lastModifiedBy;
    }

    public void setLastModifiedBy(String lastModifiedBy)
    {
        this.lastModifiedBy = lastModifiedBy;
    }

    public Date getCreatedOn()
    {
        return createdOn;
    }

    public void setCreatedOn(Date createdOn)
    {
        this.createdOn = createdOn;
    }
}</pre>
</div></div></td></tr></tbody></table></div><h1 id="AddAudit-ModifyallEntityclassestoderivefromBaseEntity">Modify all Entity classes to derive from BaseEntity</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Entity
public class Employee extends BaseEntity


@Entity
@Table(name = &quot;EMPLOYEE_SUBSCRIPTION_MAP&quot;)
public class EmployeeSubscriptionPair extends BaseEntity

@Entity
public class Project extends BaseEntity

@Entity
@Table(name = &quot;PROJECT_EMPLOYEE_MAP&quot;)
public class ProjectEmployeePair extends BaseEntity

@Entity
public class Subscription extends BaseEntity</pre>
</div></div></td></tr></tbody></table></div><h1 id="AddAudit-TestwithAuditingfields">Test with Auditing fields</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost:8080/employees" class="external-link" rel="nofollow">http://localhost:8080/employees</a></p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">[
  {
    &quot;createdBy&quot;: &quot;unknown&quot;,
    &quot;lastModifiedBy&quot;: &quot;unknown&quot;,
    &quot;createdOn&quot;: &quot;2020-04-29T13:43:59.192-04:00&quot;,
    &quot;employeeCode&quot;: &quot;EC-1&quot;,
    &quot;employeeName&quot;: &quot;One First&quot;,
    &quot;links&quot;: [
      {
        &quot;rel&quot;: &quot;self&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/employees/1&quot;
      },
      {
        &quot;rel&quot;: &quot;subscription&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/1&quot;,
        &quot;title&quot;: &quot;SUB-1&quot;
      },
      {
        &quot;rel&quot;: &quot;subscription&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/2&quot;,
        &quot;title&quot;: &quot;SUB-2&quot;
      },
      {
        &quot;rel&quot;: &quot;subscription&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/3&quot;,
        &quot;title&quot;: &quot;SUB-3&quot;
      },
      {
        &quot;rel&quot;: &quot;project&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/projects/1&quot;,
        &quot;title&quot;: &quot;P-1&quot;
      },
      {
        &quot;rel&quot;: &quot;project&quot;,
        &quot;href&quot;: &quot;http://localhost:8080/projects/3&quot;,
        &quot;title&quot;: &quot;P-3&quot;
      }
    ]
  },
   ...</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><h1 id="AddAudit-TryCreatingaNewEntity">Try Creating a New Entity</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>POST Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Body</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/employees</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
    &quot;employeeCode&quot;: &quot;EC-X&quot;,
    &quot;employeeName&quot;: &quot;x ex&quot;
}</pre>
</div></div><p><br/></p></td><td class="confluenceTd"><p>201</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/employees/101</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;employeeCode&quot;: &quot;EC-X&quot;,
  &quot;employeeName&quot;: &quot;x ex&quot;,
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees/101&quot;
    },
    &quot;all&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees&quot;
    }
  }
}</pre>
</div></div><p><br/></p></td></tr><tr><td class="confluenceTd"><p>localhost:8080/employees/1</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;createdBy&quot;: &quot;unknown&quot;,
  &quot;lastModifiedBy&quot;: &quot;unknown&quot;,
  &quot;createdOn&quot;: &quot;2020-04-29T13:43:59.192-04:00&quot;,
  &quot;employeeCode&quot;: &quot;EC-1&quot;,
  &quot;employeeName&quot;: &quot;One First&quot;,
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees/1&quot;
    },
    &quot;subscription&quot;: [
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/1&quot;,
        &quot;title&quot;: &quot;SUB-1&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/2&quot;,
        &quot;title&quot;: &quot;SUB-2&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/3&quot;,
        &quot;title&quot;: &quot;SUB-3&quot;
      }
    ],
    &quot;project&quot;: [
      {
        &quot;href&quot;: &quot;http://localhost:8080/projects/1&quot;,
        &quot;title&quot;: &quot;P-1&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/projects/3&quot;,
        &quot;title&quot;: &quot;P-3&quot;
      }
    ],
    &quot;all&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees&quot;
    }
  }
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><h3 id="AddAudit-Note:">Note:</h3><p>Audit fields are not displayed on the newly created object.</p><h1 id="AddAudit-EnableAuditFields">Enable Audit Fields</h1><h2 id="AddAudit-AddEntityListenersannotationtoBaseEntity">Add EntityListeners annotation to BaseEntity</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@MappedSuperclass
@EntityListeners(AuditingEntityListener.class)
public class BaseEntity extends ResourceSupport
...</pre>
</div></div></td></tr></tbody></table></div><h2 id="AddAudit-Addnewclassestothenewconfigpackage">Add new classes to the new <code>config</code> package</h2><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public class AuditorAwareImpl implements AuditorAware&lt;String&gt;
{
    @Override
    public Optional&lt;String&gt; getCurrentAuditor()
    {
        return Optional.of(System.getProperty(&quot;user.name&quot;));
    }
}</pre>
</div></div></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">@Configuration
@EnableJpaAuditing(auditorAwareRef = &quot;auditorAware&quot;)
public class JpaConfig
{
    @Bean
    public AuditorAware&lt;String&gt; auditorAware()
    {
        return new AuditorAwareImpl();
    }
}</pre>
</div></div></td></tr></tbody></table></div><h2 id="AddAudit-"><br/><br/></h2><h3 id="AddAudit-Re-TestCreatingNewObjectandViewResponse">Re-Test Creating New Object and View Response</h3><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/employees/101</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;createdBy&quot;: &quot;gunern&quot;,
  &quot;lastModifiedBy&quot;: &quot;gunern&quot;,
  &quot;createdOn&quot;: &quot;2020-04-29T14:07:21.955-04:00&quot;,
  &quot;employeeCode&quot;: &quot;EC-X&quot;,
  &quot;employeeName&quot;: &quot;x ex&quot;,
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees/101&quot;
    },
    &quot;all&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees&quot;
    }
  }
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><h3 id="AddAudit-Note:.1">Note:</h3><p>created_on field is in local timezone.</p><h1 id="AddAudit-SetDateTimezonetoUTC">Set Date Timezone to UTC</h1><p>Add new property to application.properties file</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">...
spring.jpa.properties.hibernate.jdbc.time_zone=UTC</pre>
</div></div></td></tr></tbody></table></div><p>It's important to have this property set. However, if does not fix the problem. The created_on date is still in local time zone. This has to do with timing when H2 database is getting initialized.</p><p>Modify the main method:</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><td data-highlight-colour="#ffffff" class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">public static void main(String[] args)
{
   TimeZone.setDefault(TimeZone.getTimeZone(&quot;UTC&quot;));
   SpringApplication.run(SubscriptionTrackerApplication.class, args);
}</pre>
</div></div></td></tr></tbody></table></div><p>Now, the date is correctly displayed in UTC</p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/employees/101</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;createdBy&quot;: &quot;gunern&quot;,
  &quot;lastModifiedBy&quot;: &quot;gunern&quot;,
  &quot;createdOn&quot;: &quot;2020-04-29T18:16:54.18Z&quot;,
  &quot;employeeCode&quot;: &quot;EC-X&quot;,
  &quot;employeeName&quot;: &quot;x ex&quot;,
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees/101&quot;
    },
    &quot;all&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees&quot;
    }
  }
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div><h3 id="AddAudit-Note:.2">Note:</h3><p>To insert data into database make sure to subtract CURRENT_TIMEZONE from CURRENT_TIMESTAMP. Note the CURRENT_TIMEZONE is not recognized by H2.</p><h1 id="AddAudit-Testmodifyingexistingrecord">Test modifying existing record</h1><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>PUT Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Body</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Status</strong></p></th></tr><tr><td class="confluenceTd"><p>localhost:8080/employees/1</p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
    &quot;employeeName&quot;: &quot;ONE FIRST&quot;
}</pre>
</div></div><p><br/></p></td><td class="confluenceTd"><p>201</p></td></tr></tbody></table></div><p><br/></p><div class="table-wrap"><table data-layout="default" class="confluenceTable"><tbody><tr><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>GET Request</strong></p></th><th data-highlight-colour="#f0f0f0" class="confluenceTh"><p><strong>Response</strong></p></th></tr><tr><td class="confluenceTd"><p><a href="http://localhost:8080/employees/1" class="external-link" rel="nofollow">http://localhost:8080/employees/1</a></p></td><td class="confluenceTd"><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">{
  &quot;createdBy&quot;: &quot;unknown&quot;,
  &quot;lastModifiedBy&quot;: &quot;gunern&quot;,
  &quot;createdOn&quot;: &quot;2020-04-29T18:45:02.666+0000&quot;,
  &quot;employeeCode&quot;: &quot;EC-1&quot;,
  &quot;employeeName&quot;: &quot;ONE FIRST&quot;,
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees/1&quot;
    },
    &quot;subscription&quot;: [
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/1&quot;,
        &quot;title&quot;: &quot;SUB-1&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/2&quot;,
        &quot;title&quot;: &quot;SUB-2&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/subscriptions/3&quot;,
        &quot;title&quot;: &quot;SUB-3&quot;
      }
    ],
    &quot;project&quot;: [
      {
        &quot;href&quot;: &quot;http://localhost:8080/projects/1&quot;,
        &quot;title&quot;: &quot;P-1&quot;
      },
      {
        &quot;href&quot;: &quot;http://localhost:8080/projects/3&quot;,
        &quot;title&quot;: &quot;P-3&quot;
      }
    ],
    &quot;all&quot;: {
      &quot;href&quot;: &quot;http://localhost:8080/employees&quot;
    }
  }
}</pre>
</div></div><p><br/></p></td></tr></tbody></table></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Feb 12, 2021 23:36</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
